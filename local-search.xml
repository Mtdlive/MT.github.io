<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>金仓数据库命令</title>
    <link href="/p/kingbase.html"/>
    <url>/p/kingbase.html</url>
    
    <content type="html"><![CDATA[<h1 id="Kingbase-command"><a href="#Kingbase-command" class="headerlink" title="Kingbase command"></a>Kingbase command</h1><p>*d&#x3D;”hitokoto”&gt;获取中…</p></p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs bash">一、系统<br>– 查询license有效期<br>select GET_LICENSE_VALIDDAYS();<br><br>– 修改字符编码<br>alter table 模式名称.表名称 CHARACTER SET utf8 COLLATE utf8_general_ci<br><br>– 查看数据库<br>select * from sys_database<br>– 查看表空间<br><br>select * from sys_tablespace<br><br>– 查看语言<br>select * from sys_language<br><br>– 查看角色用户<br>select * from sys_user<br><br>– 查看会话进程<br>select * from sys_stat_activity<br><br>– 查看当前账号会话数<br>select count(*), usename from sys_stat_activity group by usename<br><br>– 查看系统所有表<br>SELECT * FROM sys_tables<br><br>– 查看表字段<br>select * from information_schema.columns <br><br>– 查看索引<br>select * from sys_index <br><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash">二、数据库<br>– 查询数据库连接情况<br>select  * from pg_stat_activity<br><br>– 杀死空闲连接<br>SELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE state=<span class="hljs-string">&#x27;idle&#x27;</span><br><br>– 查询最大连接数<br>show max_connections<br><br>– 超级连接数<br>show superuser_reserved_connections<br><br>– 杀死空闲连接<br>SELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE state=<span class="hljs-string">&#x27;idle&#x27;</span><br><br>– 展示大小写状况<br>show case_sensitive<br><br>– 查询客户端、服务端编码<br>show server_encoding;<br>show client_encoding;<br><br>– 设置客户端、服务端编码<br><span class="hljs-built_in">set</span> client_encoding to <span class="hljs-string">&#x27;GBK&#x27;</span>;<br><span class="hljs-built_in">set</span> server_encodingto <span class="hljs-string">&#x27;utf-8&#x27;</span>;<br><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">三、模式<br>– 模式创建<br>CREATE SCHEMA 模式名称 <br><br>– 模式删除<br>DROP SCHEMA 模式名称<br><br>– 修改模式名称<br>alter schema 被修改模式名称 rename to 需要重命名模式名称 <br><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs bash">四、表字段<br>– 修改字段类型<br>alter table 模式名称.表名称 modify 修改字段 需要被修改字段类型<br>示例：<br>    alter table sub_test.tb_filegroup modify bbox varchar(32)<br><br>– 修改字段名称<br>alter table 模式名称.表名称 rename 字段 to 修改字段<br>示例：<br>    alter table sub_test.tb_filegroup rename <span class="hljs-string">&quot;bbox&quot;</span> to <span class="hljs-string">&quot;b_box&quot;</span><br>    alter table sub_test.tb_filegroup rename COLUMN bbox to b_box<br><br>– 添加字段<br>alter table 模式名称.表名称 add 添加字段 字段类型<br>示例：<br>    alter table sub_test.tb_filegroup add bbox varchar(255)<br>    alter table sub_test.tb_filegroup add COLUMN bbox varchar(255) null<br><br>– 删除字段<br>alter table 模式名称.表名称 drop 需要删除字段<br>示例：<br>    alter table sub_test.tb_filegroup drop bbox<br><br>– 添加字段注释<br>comment on column 表名称.字段名称 is ‘注释内容’<br>示例：<br>    comment on column sub_test.tb_filegroup.bbox is <span class="hljs-string">&#x27;方位&#x27;</span><br><br>– 创建索引<br>CREATE INDEX <span class="hljs-string">&quot;索引名称&quot;</span> ON 模式名称.表名称 (字段名称)<br><br>示例：<br>CREATE INDEX <span class="hljs-string">&quot;metadataGroupId&quot;</span> ON <span class="hljs-string">&quot;sub_test&quot;</span>.tb_filegroup(metadataId);<br><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">五、表<br>– 创建表及注释字段、实体参考<br>CREATE TABLE <span class="hljs-string">&quot;sub_test&quot;</span>.<span class="hljs-string">&quot;t_table&quot;</span>(<br><span class="hljs-built_in">id</span> VARCHAR(32) NOT NULL，<br>remark VARCHAR(255),<br>leng<br></code></pre></td></tr></table></figure><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>database</category>
      
    </categories>
    
    
    <tags>
      
      <tag>database</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>当我真正爱自己</title>
    <link href="/p/zbl.html"/>
    <url>/p/zbl.html</url>
    
    <content type="html"><![CDATA[<div class="note note-success">            <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@glorious/demo@0.11.12/dist/gdemo.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/prismjs/themes/prism-tomorrow.css"><script src="//cdn.jsdelivr.net/npm/@glorious/demo@0.11.12/dist/gdemo.min.js"></script><div id='demo-teriminal' style='height: 1250px'></div><script>new GDemo('#demo-teriminal')  .openApp('terminal', {minHeight: '1250px', windowTitle: '当我真正爱自己', promptString: '#'})  .command(`当我真正开始爱自己，`, {onCompleteDelay: 800})  .command(`我才认识到，所有的痛苦和情感的折磨，`, {onCompleteDelay: 800})  .command(`都只是提醒我：活着，不要违背自己的本心。`, {onCompleteDelay: 800})  .command(`今天我明白了，这叫做“真实”。`, {onCompleteDelay: 800})  .command(`当我真正开始爱自己，`, {onCompleteDelay: 800})  .command(`我才懂得，把自己的愿望强加于人，`, {onCompleteDelay: 800})  .command(`是多么的无礼，就算我知道，时机并不成熟，`, {onCompleteDelay: 800})  .command(`那人也还没有做好准备，`, {onCompleteDelay: 800})  .command(`就算那个人就是我自己。`, {onCompleteDelay: 800})  .command(`今天我明白了，这叫做“尊重”。`, {onCompleteDelay: 800})  .command(`当我开始爱自己，`, {onCompleteDelay: 800})  .command(`我不再渴求不同的人生，`, {onCompleteDelay: 800})  .command(`我知道任何发生在我身边的事情，`, {onCompleteDelay: 800})  .command(`都是对我成长的邀请。`, {onCompleteDelay: 800})  .command(`如今，我称之为“成熟”。`, {onCompleteDelay: 800})  .command(`当我开始真正爱自己，`, {onCompleteDelay: 800})  .command(`我才明白，我其实一直都在正确的时间，`, {onCompleteDelay: 800})  .command(`正确的地方，发生的一切都恰如其分。`, {onCompleteDelay: 800})  .command(`由此我得以平静。`, {onCompleteDelay: 800})  .command(`今天我明白了，这叫做“自信”。`, {onCompleteDelay: 800})  .command(`当我真正开始爱自己，`, {onCompleteDelay: 800})  .command(`我不再牺牲自己的自由时间，`, {onCompleteDelay: 800})  .command(`不再去勾画什么宏伟的明天。`, {onCompleteDelay: 800})  .command(`今天我只做有趣和快乐的事，`, {onCompleteDelay: 800})  .command(`做自己热爱，让心欢喜的事，`, {onCompleteDelay: 800})  .command(`用我的方式、我的韵律。`, {onCompleteDelay: 800})  .command(`今天我明白了，这叫做“单纯”。`, {onCompleteDelay: 800})  .command(`当我开始真正爱自己，`, {onCompleteDelay: 800})  .command(`我开始远离一切不健康的东西。`, {onCompleteDelay: 800})  .command(`不论是饮食和人物，还是事情和环境，`, {onCompleteDelay: 800})  .command(`我远离一切让我远离本真的东西。`, {onCompleteDelay: 800})  .command(`从前我把这叫做“追求健康的自私自利”，`, {onCompleteDelay: 800})  .command(`但今天我明白了，这是“自爱”。`, {onCompleteDelay: 800})  .command(`当我开始真正爱自己，`, {onCompleteDelay: 800})  .command(`我不再总想着要永远正确，不犯错误。`, {onCompleteDelay: 800})  .command(`我今天明白了，这叫做“谦逊”。`, {onCompleteDelay: 800})  .command(`当我开始真正爱自己，`, {onCompleteDelay: 800})  .command(`我不再继续沉溺于过去，`, {onCompleteDelay: 800})  .command(`也不再为明天而忧虑，`, {onCompleteDelay: 800})  .command(`现在我只活在一切正在发生的当下，`, {onCompleteDelay: 800})  .command(`今天，我活在此时此地，`, {onCompleteDelay: 800})  .command(`如此日复一日。这就叫“完美”。`, {onCompleteDelay: 800})  .command(`当我开始真正爱自己，`, {onCompleteDelay: 800})  .command(`我明白，我的思虑让我变得贫乏和病态，`, {onCompleteDelay: 800})  .command(`但当我唤起了心灵的力量，`, {onCompleteDelay: 800})  .command(`理智就变成了一个重要的伙伴，`, {onCompleteDelay: 800})  .command(`这种组合我称之为，“心的智慧”。`, {onCompleteDelay: 800})  .command(`我们无须再害怕自己和他人的分歧，`, {onCompleteDelay: 800})  .command(`矛盾和问题，因为即使星星有时也会碰在一起，`, {onCompleteDelay: 800})  .command(`形成新的世界，今天我明白，这就是“生命”。`, {onCompleteDelay: 800})  .respond(``)  .end();</script>          </div><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>诗歌</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>harbor Arm架构部署</title>
    <link href="/p/harbor.html"/>
    <url>/p/harbor.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="52bf0c2dc4b5e6eaac47cdbb8969502c1eb2ee9cdb1aa9578232dbce857449d9">9a350bc4045233cb092f39ef57eaed07ef9ad949a7b3bef297f47c5bd3730edeb431e8fa49ac077b746eb13657d1b23108ac82cb3acc8e32eaf57235e87db8b4642ea12cfafef96548ac722c401f058b3314796fca67ac309c837bb926acf7356851af5610b7d78b117225a3a14b903cebb6e28e104a2e4dd78e9e09d3f99297fc36ba358954b672597d7cec1ad8a9fc15c10c2b8f61537e33a06a7ce57bc2b9ecb505104e6f40ca83ad27bdcbed6e1d9e6a2d503b0415b4d4f47c9af91dc653c148ff71adf6d9d2b128d2d5a3fe4e98a43c7a34199d50e85622234a03f173ec1bd706e5cde3d93d18fab86a1ac5ffba154126e1a9ea5921efd456361e5f4e883ada783666934fd8a66dc1ff07211536c75ed5a8cb607ca9b9d0517e46093373ce49ce9c3d9be7eda87f0d3646239fed40e2c629f570018459ebf41079d03d716ba79a39b4fdbeac83078e5b5f5c0cd6a2c1ba63c2a7de5de72802cdbf2a44f28f70df23abc53822816067b6f6cf9b929a1057eafb75bf6b22787dae6a42a9cc2b3ba1628cfecd71a235153f2632cd48f7829f9b5fc6615aff74209b1f1a3146ac2899a03e009dbcb2959fc06bc6b7d74a3299bb7e144f8abcec099a7126ab338e704bc30af910d69663fe2dc7d2bb30b35f5fae812c1f637732127eb19b4fc7fe134394a88ae3820cbad059a145d1b466057efba579157de2f3631347adee39488994ba0a31fd9bb2bae42384eed0907c0df3dd58ad71a82e8bd5f7f28cd8eef0c319ee9c937b48f95fb8499921451abf8c004e9d0bec21e8751d4d34fc1c5e9550a8fe9ecbe15dd0f3828a19ec4aeca86e0abe9d96612969efa8251ddda213ed30e0adc448d3a1add98fdc1401f1951506eaaf7e0a91480646faf086f32fa51d4888e3bfa1a816859191862ae47677cab6b7092e0df7bcaf28e5998ffbef479850ae1c5d7c792fabbca457a9585935c443ac5a6ee5407a8a34c231c28547a0dc06cc60be79bdd5cbfb461cedf7d84958e137ed71189fffc12dffeea77f68fe05408138c542ab072c48a7728060e4958322f27535d7624cf8c7ba3232d6357253356e564840fb4b3c52055f47a0061216480a77e784019f63534cccf9f8dfda0759ed16e45b89936b578cc8c32a322df0a31de6d79418bb6a54f021e15888ecb237560282f93fef7b839e2801b4e66f940436dfd51c8945d5567bcb5225a088c78543621dea8763124b9f275d4ea39d6e5d709e1805233a643bde1794e2e53164525278a7c60f87bf8c6e7f4d35e0a03145f64b427773c7fb07fad8aef5aa04a604039a4906d133c5ebad2e8164e31e43e45d0e3e7ef54d6869bf2c01f0cf9070bb59c3886445b404dbd11588102c974834b5036ad99284b3a928b8515ebe2f7dbc7040f5ccb765668b3c6b2ffb44e8cb7e0f8506386f43879850c4c02608abe61635e4b10f6070cf00762ecd20d96562def7214cde93d9b52f9d27f3890438543427ec1dcb4a008636302e62210cf3a7e9048b35714d76fb1b52ca999f379293520309f90a7820f40f5f297589418bbaf4618c570ee06ec8271aaba12da05ef336317ed9faeb83d3180252c5bd98e7074c9dcd240c8a6e4cde6d5730fcbeab8518efba739c5d3c2352a670980bfe66536c04c44651379d4b73cbce583f1e8f6790f9321d1230a1992181031fb8ff880fa3525f55eda920a0ecf6b48b7bb7d6ab3a41d76de2338c9f871ea521a1f58581b872f51f3c9c3fd8cfc08f30181c79f7c3a60273ded22010d77b55fe6ac08933a382b454e997d20124ca78ff198d7f7f69166974256605c3595e5f2beb63c2515ee163f8cf9aa2cba31c9c330d2f5f21c52c679666688f9be0af20c1667e6f6e4f6751c9c281a8b117662e56843b4543b64a01563041a7a80e0c392ab705628e2aca28f8cf24126d873c1dba9a2090ed99fb58dfb8ee4efbf5fee600aa0b548d2aab041e3199c16f22f673a8d2d6e8879fee70e7c738926fe181f5d0288478e90a1b8034e57c272f368b52e11c64daa9f0c17f50b4320bd28b5d7576cfceb515a5cb9e3d2440c205bb7f72881fdabe37867c806d4fa26c0bdad7d0eacedd55c4c721eb14b1deaa2591fcbd37a1591bcae09fa0c2a94a824402c054ad8ed2fb1ea3143f6d9a3635be5a9389cecac264f8c8b25bcc0c6611add84e2e03efd6a39c3338e49c2ba8bfccd63cd412be5cee293e6aa39f89e0485d4f4e8358a9a98bccf9dda1e7b0cd7244d0b47af889a5cf2d3ac4a03f7f19e6a8cf68cbc015460e2547bcb0d0543f5ba75742398c3f89b9706f4bd386572ba150cdcffbbf0cf09e51768a34a67b935e720c189c3ac4d5fd6cc3cb28d8fe7602105e2e81e9ce78077fb962272820f5f542d8d2f0f5e4c464866d3601000a53782273f0c6a071b83399b61a714afc094dbef08ed11267b404b144b37c4aadcf7e1ecf1e34c4a0c79ed60e9f3757fdfa6e3625cd0ddb071c554b0be0370a476a74c14a6eedaf2bd25e6ed136af174b26f4798d8c043e4d714634b12b94cd105699a6ffa7f8bb350fbcf3f628a7219c2eca81301d30c17f0b9d72d8123b2a09b04391a193d265ec31499fd70b0683f9d697c0245d584822a85bcbc9a153c0be31c6cda61e8ee2755b13e46d4cad3bfc13e72a611a1dcb4768a54145f62b68c0bb828686ae0799f23e17e290aed6cf46545b7657e8f7077cef20f4096436ea191bff067004bfa230e1e26b8139e488b44ee904528b55baa90ec641259d78bad1f63415f3eb3b7c7e170efa6f2154d9c0719f7daf46361d888382980933b66beda7e750db30c3179461586953c6d8b2cc846332d1386b19b774da02c9a301fd1232b4d9529d31ef5948163875d6f29d31e44cc133b655738627d0185d85e7b3c83214a37048d9cd4f833c6d7f29bb463ecd81394d50b6bb57bc5e7055b2a43886e7b9499aa1f52c611366a81d6a0af917b9263fe66d7783da220eee5a1a0146b35113c257349132b1db7378be5f58b3744d91d2aab180de01082e85862c41bfbb34deb7acc5f8f656e0d89c6fa7a59d0879f97a29e76c4410dff3402060a886f3389df8a140a2de6565b67ee42e58142e4b019d18548a514b4357608b7bc9a8644b41914550dffcc96f9f9fbc819c18cb80a2fbc16da91f399f5de440760e966b0fa1f54df214377216efad912189ff67d3306c5c08b83af75fc763a0704bd9cd5c7c0744c97f7f641e19677ec623c60f63ba400a050939c4dd739f2b26a9a00949b5c14cfb3ff6ee0be08cb1b6fdbc3e3eafed8bafdb04964613af67a2fe3e82bfae0316b6ce485f1ac568e129729791c7af159b4d5133df378346d7f0d9f70130147755d5be21422e60204c1d08cb32f951aee0f132610caeb96bccda678a2329991d4d8e0975bf33b35277bb04fe37239d83294a1757496e8cb5d08adc8b9cdcb3283ad27c4b9896bf7b20b4734f80d06563d5310109f08cc7ecedf2cfe211e6f240f58060eb12a8e0b64ec7116b9667c86c4d58dd9ad8900cf722d1ca128a85001d9fb60476e2b29a38e37477112c67cfa5de9a956e050cd46ce3b5c34082aae98cf1cb78c7105fd5161201be589668b4ba8e8fd8f68581fb95959567ac6f07d87efb95e7de5cf907dbe0187619d95e09d0973ab557b9a14d5d6f7c9c981443aaa70a18eda73e0c327da72232ce2b3c211b50dc8175dbe856aaa80068c9829d7b460fcf5196b661d3e11cc3cd2262498432029fa20c8cfc8bea843207914b75bb8745e592deb725a5797fa622342005054cebf5015b825f4553093faf171c56b64ab7b5bf895f0c294265e58af1f006680208847452f1080556676bc50e19418aa5ae3af857ab727908d6b294c756ffa9e7f0aa82bd137956f01ed2eba95091f7c0d77244c5d834d14a6d3daab3a5c9bbac8ded48a70fd0cda13da41e68dee1bad9fc9698dbcc70ca82d4886749ef4d996b517908b1facfebf9364113a203c61a9eba25adbdbbd3c1ef24d63d86e9a126bae2b4001279236fb1eec12dbfa13eecbc846d447ae671a7c60818e4dd372bbb651eb9d894825a4ba2cba116115e541574bb76845437fca4d6f3a773943687dcc431c0ad3faedd382b74ef7bc4484f72244af5b8f2b7ac19a3ca18fa7e32046a494e2a6172e19878e5ee6c6c3f0a25e0e6925c86bbb49b459648343d536619c69f62f9858a2455a74c94c6a8dacad54f4bc3c1c2dfa0f11c91aff68d438d5e9a7dccd94b2de25ce9aa827c0a163e070832a58dd868462e7280f91cca6431a7dca26d505c06885ecc24b4cdf9f612c57cde57629ee01823459017783dbd3e7d46f23abc6f5442107b85bc0bc85f43a10a0cbfda5e24cfdc37bf3648ac2551d6b0338ccff9aba4be7005f32d149de40b93e9a85aab8b3a4d1e04e6c6ca2bde844b8e940338d5eaefd1a2610caa43735230be29468068317169da889206918b19cc89b6ad39813ce327affe39489d5127e7b46ec5ccfdfffe589c38cfc5aee8115b29da012a4803716735e513b415bf357d0815481cd15729271808db7739e3f485e6d39fb61e4dee452f93414218b0b455db8b1750cc0de1e5cb48f3ec8fd8d62009094e693ac6cbc186550d68d4ada8f1d7f8e7e8b22240ccb90d9249a27d50f9783777c1635f576e23f82661cdae238e2b59afb2f35ab3c683a94d1359c9a8c06f73a40fb1b5fe4161f6c023cda19e019b49c78c0b90b976da5473847dad58f941ba19a83b9ca1cfca6504a7b903abcfc56d391a8e22f9b052bc88a83cab200d60ebcebc7ddd4292a7336ecb45a1f8fed6da8b944020dfd89bf870efa024eeef8a46a8c1c902b7e1a6955c2bfb54fcf7dd60f3196090ad204620acacf4b35a6964da5de600617807367bdb12f7abf7b33bcd2e6e903236bc56455e474c68e03336ddbf5b4c3fa8911dbb76da52d06bde627c3f428a18cd83c5b85c6efe05e56a2be942a313abf449cd74c7a00f2cd55c5c5f4e24b80bc4d42596b5e9f10949ecf0bf8e29e4200b3f4c4e38b8169fab9b1ca0cc894eca7f6ea736927899484079fe14505994f07a6328ece981bed8298fdfb36bd66340c4014e753531d7b74065bc3c0aa1723137a152a13ed6dc0a77c165c5e280e7ece8c410919124072bc1b3a17ce30be230d2b962291225f90b766c19d26ebec368e4826b53849f20e203ccc1debe23e0bbbb14dc6dc377e92d8aafed304a73fcb8da218a4e83c4af74156df8e9ce2c45351795ac0ea1d637b151d8ab13713d761cb96c2fe06e802357b028380b166147476a18e72af4abd418e9617b8feddb91e2723bc539741bddaf9c89174014fa970060acc7e40a3087cb3d30802b7b5b5dc8167d3f55b1e892d23c212308d79eb9d4fc1627b3bc311a3ca65b7bf1402c53ca7cfa0e9101866e8b949a912dd956f2b9390d92e418ab61c7121069cf2619a0911967c4fa9ee499f862d8fa0cd4ae3b9346968e04ca4aefead09a00e8be3d201ed7f358bdd1e48999a8ae984d9e4369dcf2ac49728cc9b9c74c7e54534ee7f9cb6baece5d23770bcaafb4e7d64c8b17ad64b5290a7e81b4fcf725e1b9fc2795a7b3c15cb10d2e61b95ed1683a675293dc751b889f10678008b46d9ea8c8741c038866679bc6a2cc7c66a442aebc3b890437ce801b0e536a43f98deb63e520bf525d2f42344b06bd6929dff4c872add89bcd7a62e07a4a95c6814fdb27caf6981d9d4367a864669c2d24ef0e3322f1b78fee7f3a127d59f198144e8a9bc2bafc4609dc5978c93d1a538ccf3a41aeafb00fdd6901b0a9d63e2bf7425df9b0d6d63fe0282ac08184b09900d1e7926a3bdb5a77e45ee86d92f0e3c0af1e5b9eb3530a6715c6900c1871f7e16b349bb56c2dbb27fbdf8eb37fcd6f578daa1e0d33cc31c11419c5ff383010692fb6183977cc313d9a0ac95b30227bd9f5b82867be2a06de35662aa9183769835dd34a547d436c81f25f031941cc68629fef6d17bf1e96813145308a51c388dd0eee102fd8fe8feed4e9d276758eb5e9a3a2649bcb826383616abf7a1b054b05fb23f896d9f5fcc9ad3ff71d4b18bb27401f9150def8781015969786e67f6077fbb8e159aaa2a9ff0612005094de6067a6f9fc8461393565d072b418c8639bd041251456fefc01bdd7e481c295cdba407232f608eab8b56f439c01f3a5e9152029cf0986770337f068209db3b5e3466ba0626853969338a4eed5e67cc0bdf8e593f8c06941500a7e9e8d92b22d8cc24dbb0fa459d891b83e7106332d749787c67a83bf36b286f5c7c4fc3e75b8e4276e4fe0b504dc8cb3854fed6e79149b8a7c8aa3a4a40584dd0e8cfb3e5d3508707195d50fb67e4620eb0acebfdf2f6b917c9b3e22f488953613669b4279f45649140a3393505ac4afb79c2203d9d2b93b25c465d9f203151928a9a82a3399f095dca00a6a3fb993624470266ebebfb4a76db6bed1973077ba4720a3cc33e04ba65d3fbd3c1db857ae1ae2a78eba16420e2768aac1f155329220ebc993737c5e35773fa8f0c721d0e92e59fc0c2ec7a1f7b7dae893e29bdfe4d25b5e7ac6ee04c096000fab3a0b9a0d6f792e2f597e8f01bc96658b6fc13c8a8e6954c4e75991abb56dd6f39dda558b0b03ecad93ec6295b6a096a13a0d009012cf996dc8cc4660816a3f115750c279100ec29749e3a64b7d2fac24407724dfddd9e507658b41cac51aa6f6606d00b3e35e5901c26219e69de1da763f96292a3ae78c271df0fa0e4146e26ad70db3074768ba14bf4038385e8a2b2d382f162c1f098bfd30b3fd3223746eb08055365ffa3e78d58b4d50da51b1c5b810006f03f3f59af883cdc920db86f80c14aa0add28f237c3ea5a02bf136aa5289cf171a1ad2c16e248682424433579e8bc9d503f641eb6dd8bf5ea0c4d214099070680c28d03d3c546df57133d7b32a92685b930906014cc9968be14702a06033aad0149e1b9b54bec5df572bf5c783e1c4fec911a7f544e05aac050c01b91aafe41e2d8b6577c96358b9bdb553b571a28fa7c52433e8ff5a66f04ea78bd0942d2f6a4d16f8a29abf50f4e6f9a702542ef08cc9670ae6d2ee7510cd9f7f2ce5e5d7a1ec59fb04d56ac4afc95498bfd5318987a6dd61adaae24c382921e4b2aeefc4e6ab64b691ae159206202bf04029e76196474f28954506adfc6c30a0ac9dca0869a98f3087c01289bc83798dacd6185d78edc914ff767c007398127b436901368e7b9c9231154d6896e6b37d4596c8679cd5205d65d2be2acf66372d7535d98ccd649d47524041926573641c86b5c3730de279c9eed28897703e3d6740889d725235003c5463a11969d827ac5a28afe224f8a96e0eb8b7b73fa7708e5fb98b2b977131d1b9f9ac84fbe453546bc0b1198262880be95dc7d50ad40293b59078dd9c94dfe2a40ab19450e2eeb0a59ba537f97538b9313041e05c29c7a040681f3a4074151434ddcff1d4414e5f5030f1c4f59a21d6211c2084ec3c02667a65239005c413dc3a29de1230404143e361735ff0e4111dde6494d219f11e8ccca097c7dd5cf875f548b3bb71d7c08d7d550f4bba6d4909050d9cd9e364898b17138e60da3b9caa53ee396cf64fdf947c5b46eb0c8a8bab70a336b352a5d126615c6ba92b4f9ccb0264bb32f0e81ef1e1bbdb3dbc0ea367dc3bfb96ff8138a4e6cb974ff31703176df3b578eb25cf8f7b96f2ab74768339d106a9a27ffa592a2c9d75b02b620ca0c171fbd336d4fdd38c959b865e5670ba5b6b1bbfebc520db1100f12908af00859456c8ccb8a664e7aa89ef7b16dabdedd999b6056145e0b5fb3c1d788cbac4b3f25a3f407bba1f0b015dfcc4413c3c4a8f7706f083a3132e185819f9e31cb249a4092043c3fdbebb9308b054ce1746c948ecd2813a26d99e767d68dead3d366906b835b75c1bfb7258f81c303f4b7fb7407085b1ed1b15f42099fff36efaf5ca7bb5a3e16ffe9fd529a906a2dd5ed943a8ead7f5ae0c0e01bcafddbcb7f4836ee170d2827b0f25ded9e3e4e567fd5227b14b2e9a800f80ca23e02a9c1157e2ab0e1af09bc8f335d1692e34940a31b8b08da364f4f3bf4f8b7f60ad2ed57b72a1b088c0ff476a561df6cec6edfb40bfc9c127db375772aa96722fbd176b7b037b3fcc376ee288f8cd52a8959a669d8aafe58bc0c65a35a78280677421d715e1c9fbd368f2cbdafd35748eb598b26cdbe49cd5d217cc26baf428dc9f620ba1639b4fc3c18f6ae83445f3250914f95a1bcd1127be52cc81b1ba5eaf9e0ded65ee298d0e66309b8353e7946d2ca7521d0fc2ee21d52ee590d6def191c60bc791f2a75f52ceca5aa839b540eba6dd3beb396ccb1949e5fedff992c94cfd4696e8ac2d791330d1a476501bf7ef7f327c0a1fd7e931460e48fb0c9f7f8468097a906a7ebbf9dda24d5c7b83910f0b3b38abcc91ed09f61d30025beaaa717503c6df7268970d5f958e8ec6ef13450beb3dd4f5ffe8d51bb4a5c4245327c74cffdacdd50c0ea00ad7cc096af7af845b0643ffdd933058e6a6c2cd14d3ec7e07dfd8b4552b760f95f3400952eaf1bcba574b018d67876f1e802b2e87357540712fd0e822a92f51b14220c50d17205f229328b344a167ba6d0fc14bf8f63a12fbc2e07f2df9d15e96ea684d6f3f4974f1f54760b5ff465bf6b9c2a1f5face4596aaebc816fd4d63a52706b007127c8f0dea0e8e7e7a790a4a314b8cb5ce98d43ca0dc29f61b6506e8b014cc0591f8651a8a8787b8095ab7d8e06cbda89f5eb9fd91d611a279273431eda1b948c1c0a4151df12fdd35f2dd4b52d19b03847c880bfceb43a52311b5c7c59363458538fb28519976adcdc8c18ea07a10506db2b07da9db2ba1a03bb75970690bd7e63217b5c3dfbef8276eafc2d35b3b8fe7c97a2a2d9b3babeaae14b83a1652ee764e9f0099c8556f4dbdbf8e40ebecde31f1bfcc50a722209bccd6124256c83566f7bd0c5629e9fed27b2ad96314dc77291b060bd103aa75b69dff79b8485eaa2948e2497ef81f7354cf8ebb2ea8dd800c50c948cf4214888c26d6d36da1ff5475d389c25ff5cb6bb5ccd6e351c21b54c6a12a6c657ebad685b9514ff1238b9085ecb5ec399e0f18551703870fe53ef75dbd6979f27fe25bd1964c847e76e0b031164165b231bc2c414fd4221c7f6907bde89a86a2676c34355577762bd0749a9bf144d3c167858adbfb67166ae5a31790a9544238dca9102de83092b1b6b5b942be637ffa59e53d9db3ab6e4db0b9c49f19195b553757bfae760ff0b9f37eba1d318bbd9b9acbdd2ab41611b0d3d662ac4c777ac12ebf9b37d2138937283f5d81d3d55acfe93dbf8318f6ded624e6df8da1c88028fe28b06e33af12d7daae01c70c5875a3e335ef1da49598fa8493f246db0c19d7cecba8dd2d253d44ff663c80109bda557a71cdb6e2d9315e2f6be27bb27dd68df85a53f5ce743de5ef5beea144ae9bd6036644382944a57afeb236ece12964d0a713cba8c5aee45d4ea8d9f83ab035678f9101d2df206dc253bbfcfbe636c0280adaefc20f4aaf1c12e6fc7aabeb14aaf122f4050b42684823628fd310e045a838930283c15299f1fff0fe50b0adb7c9e1fcecc0cfd96eb8bccd5207e118a0392cd3d9fa99f67172c93eabd2cd4fc4fc5cf90262a14c73469f7f132d66d9ef712f94902337e3bb098a9bcae66be5833d0a5b4a086287a122339d0afc5d1a175ca55369015264d04aa24463b807c99d00a8bbb3c86485ae236e202e8deca9603623e7e16c820523139b594b0339c4977d0812821182b98f5bcbc1ba125789fc10ea7f2eaad50944ae880c3489ee3eb8f472a29cc86a7774507151fcf55e86c73a242eaab2dc12c327bfe7f79152272d7fb242cfdf5c234e1bf1e55e7ffac56bf1c71e58362aecea51cc2c14874f8a43984578088fa8a8920579cd12d730e689935dd6a65d990d81f81fe433a659d5743f01ea0cf4cfdd354f1cf4a2e5d6810dde7831f53b26df594dfb4c995d90614fa7601f1d5e46b6e64e3e8c7263d7899e6dc68291fd41bab131b489f4c3b560b2344fc686a69dda42fc7b1e4aa63730aad269df630b545e2e29495e9c189f8a7b8f5a8366014ffbe3da0e0e178e937d639b67284373953213c2df15f46163703b38420824a5fc1686b4b4eafa6e93745cc50cfc652ab674ecb111eb8f5be128b49590aaa5faf8f37423d14add3a849f6052217c40717b5dc15dd81f0f86bbb6744b2583068de178bb8789750ea2f1ae11d36f308af65e7b35f73d5faf4be90e599fc687df387b49f4d0885547e95916e03cfde6f91a3d06ed29f49a2e8413eb7e5e542e516912a9c1b80b3afdd66d628ba6d0d94de4f71abeacaded0acb9d789ab7c0907cee4d52f33d8fb3237235fd9d300062acdd28bf2029bc32f618ddc1961361171cf4a2a32a96ff221a4067f7b42c0d8f25310d44a684ce45fd576dba192614c158fa349bbfbeada4804ee4369783f0790ce5d65c4e30831d93f1057439d6fb813eb24c1a9209444ee84390a58c70b35568ecbb2f00a4f1d1f7758afd6e3a7f4c70e419222abd352d66127d1ccff1573b0a58a80eb17a5be00bb6e23e4fa1cfc958a17e94d4f55ad87d8fea4b9926c863e088946602c8eae278de89fe7e0e9f4a37a37ded0217ae60f38b03eea240f7cea88770a112ad671c1eba3b6e71c5f5e8ef613346440611113404d79acf29976854e56b3ff09db755cc1d520b87dd1d5538e3902bb3325f48c4c02ae54ed6c8d632dc42df97678e139ea887eaccee0576c6d9d19ae7bba9175a351eefe2e674df9f9045bf4ef7171132add9cbb58e19711cac791e558c8d35dab48fa7a735ad2275bdf2c820062be2c38c5c049fe982ac610284ea0d2955ef592d5a64e985a9cdfb875c9e337447b4c9faa6ba0468835ffdc36280177f89873c366d61d420469a6a31d4c1d8f518f3ca7ddd0faa506e0bcbe8c3d80ffdf8dd902d7c1a3cf79c4d43be112edbdc48bb97eed48e3b175759911752d21fe886967153b79882c8770bdae6503c72ec7c732f1cf5f638590629a5563a049b21efcbecd693aa3104101132415ed6536852b9f64d6d813ef25f858e4b0b6932ae2feb3b0a14d798c64a475900c78980b5c35457814b3412d9940eaefcb9c89e34a46b45370a8a77b383b295be6a878dcecf54ea789b8600fb045542a7bb972a06438c3a3987db205073f102dcb494d3fc36dd762fca53b41e36a976beb93b35c8d4e5dad1ded2fecbc058b9b6205630d52eb7fab7acba6196ead15921fa1bf199c21f686a1353cef7b3c53ebdb246f6016225050c2ef2cf144ec0804ebbab5b924e01ca09c7dde45e364ec4d368f459ffbb2b3a23950fc3513bcf36d3b153b556b6b9419fb446f4fd4f6a761a8c769098dea938012c0eaf7228af691d2754bdfddd67e2f8209cf4a02bb1b9d24c9ef5aa99d39a62fc3e74328e877c3c103e8528fa1476db29661b9b32baa96ff923902e335f9c93938a73cf1cb16304064367599304006eaf5d9650d33fd7addcfa403b476044ca50fda346fbf59bb9e8bc201aac4d80722a1123b19b132fd39a26be83fd28a0299a28542c3fbc51852d2836326271ac4e45a515e5bc06e667a843777f6543dedb1e9ee68440353794899f39a306227ab75b3171ffc8c0114b37691ae1c8afa551d61975708ab37860deab6677a64bc015da769a20af29536b221ba456cf9d07239fc7c4dfbfde531fc888296f0f6a1214288f9f2400a61df54cdd6ca7397528481a20cb9b7410671255222fc842e626700e727f06feb652285cadb0c59b4cf86217bcf03165e613ee29d51c57dea82bd2bea74852dad0487aebf00de1e28674b1488832ae83d447e4a08d71f278a75d2c49250390c3f0d701c499b1a9d7fa605b95fc9285302e1afdbc971fee43638a137ddc731013ecec08037e31d86a645309d0d8a69453bf8200314fc2f61b6330dfa6e2ab63833945dc796d484e35ec4969f973c8fb21287b27648af0c25df94c4bbc4460b918ea733c99e923bc4cb0b36abfbf407eebc8c3b44ca3ed687ba8dcadb5e656c70588000eda22b19eefe85e69ac991cbe281f4b14390527928c28f7d940a40abf3e9c411c8dcc7c602026b6591f64a6be7577473d10515867608c67644ecb558b7f53c5a5d67506ab6f397cb0b1a5fe985471f7fc788a5e3423e7bccf6b570b9fd1c7c16c47d09e72a136fbf0671e2bf514a1ff8ecfe936de621907a44439680378cd6ad0012c70ba0f99c334ee00f7e83f8a05595fc98fb8d91de249c635a47a8ce3f5da36e992d11652251bfefaf53090f61c5513324ba691bb9052b766c7c9b0303f86d2a0374d6ab453c0d26707d3e9cb4cbc8630a49f5edb50b582e9ce0ee56eb197467cebe05fe9a96c313c53527c566c920868c5334258c91db2ed8a5a4df32941e815b061ae5e58b61db67c6f3e0ae3a7a6a0404a1039492bb610c23ea91c834d21c9fdbda1c0ff299d3b5c42ff1ddcdbbe74da1a592185a70c9c4cab34b9a04cf23eee4b2ecc02f642f5cad4536269bf576a1f1073e898da76d0304f775f66a3435f1c32dfb00fa5f7a773883ae5a6d388cc10bfe7717e74273e2a3723194f03a89af90548a05f0887edd648d71699b25b37df109c0b2ff6acaa91ab1f36274b263293e894c921d9dcf348ea7be5f9ffa25db6b5d7bbc4d4b4dcea46b6ae7ca7b47a3c054913c42a92062f8572bab40f395ec9eb373a93b9bf8e8e3c526c5babdb5874dd43a0a18008cb798a510ea7712f68c58bfaefb7af5cb9b8721bc227dd2a3560d908516ef84ab3faf62bfbf387e437fbc42fc554ebe019e4fa211f21f4931d44dc2c824f888f7e504659323e0f78c6550fa0098675bed3e9e35c8e318a2984a8472253ef3b64fa32022be2521b151569ec0bf613805bc68c64aa10519ccd3911168a173b5edc4b4211b54ceb933e979701e263fa27cd609f0922f5702abb60e1be95cade28081cb6ec4043b2c9399b4bb81b6020bff999248196a5fd8faf1bf856a35d95d98f5add33ef7cc9f883601a51337d14c0a21d7a0e6c1f01fb4a9633d0d5fc6350424c447dfef3cc33bf4552e792600b304a01c854f719c6c37dc42143eac00e41da5121ab1d2e3e50cecb56d52f34017bc3bf52503eeffc0e1ae31c880ff068721e6cb591e97b6954e4bf60e02bf1c69f7343205bf044245521e4b23374eec86cf3c0ad665ceacb38ea942ad1fb1a9cc5a630535a4693192a99d45c5065873ea9444213b09939d04ea6b43ee5cebd0a5bd1809b007effc7ca1938d63a33133f69b03e44689b14eced3a64200a8aeb927119a7d0b8964f9cd58b880f18b1df3fb09ad5ba6aadef8605062de30a79eb4b55f2c6e8d50f02071a7bd7c374a4122bc1492aab906a3f1bd454b3973e84bba966b12b8f887f8698919de2cbdab6f49ce80d8aad2be16dfb81cbc1101f4815a8f13675ddf1c0d011618fd1fd204b940e114a02f88a04a6d4449ed606eac4cafb0c7c445877fac5ca3c74fe262866f82613b5848592fd3e0e9d4bda0f48fae5281a58189df5bd7a291ae85ddde8277600f541b13ab360904fa4704b64b79f6dc8b0cd72f38210bdf1ecbc8ff9cbd79260a66ddc8167dab1098d7394f56c438f0a3baef69c59c857975c1aa38d4f6fd2feb617edd70f64609b4070a7ecaa6ae03dd210581cf64eea1169985b4eaaeb8a39b798732ebc74a4bdec790cdf6e712dd0e7244881d3a9a2b098647b157a674fc8af4bb36f6917f283fa52a34686fd0787a08ed453d43f84656dd0e64a65bb782acc33e60b925f42c2cccd6a77178adc11adcfe9a10efd5c3966098c2551f2b15c768d804a48924b6f7b1ebb65432b4943ef29d2797439d9e01525eaeb6d15540e6a1399083b92129cc5839320fa4d5e7b5cf9d0e3160015c148dcf4acb2a0f2f63e915c598c0fe252ee91007f61ec6cd39434e1b4ea06daa0cb0639fb498ddb9f4eb1f44c4750a4332539b4b47054016b6652d9dae823e295ecc35c8158aa2f73838ae6485a408a162e05af7d41e4457e0c34bfa563ff3ed65c97f853aa677b545a1482291bbaad871b5422ef7eeecacd610f8cd2e9e783fd21a750395dfeb35d9a5f468e0c386972bd6006ee88f9a0f9d7857213e07f487e665276ef08829846bedfea222c57d35201206d00ac0ba6782dbc6cbc5296d4a8c963d5b9ab036efda4ffee490eb6b2d09ea47bf5468fe6dff2bacfcdbe2ce2a23de2e00bce5dfab45ff1f73744d8bcd6b47ff0b2291c82ce167bc2b4f1845a9ea2da6b231771b1e852a06f95d0d9b98da4ca2885b9065af57a8b5af4cfbbab6e6dad84d1f04f900b067a0b50894bd91597de48a063f8faf4c997179afdfc26c989b086df33d6528d439b10b52ec150bb3b60b6dd6c0e04dc5778ea5835eb5e684f7b085579fc5dd9cec8b416548c56a4fec2e106b618af7e9c3083bda0e60ba94945193a397ea26ed6cac1aafc206f4f63543efd229a6fb42ba6ab03e48cdc6158b89f256ac14f6fc5174a270f1505d0ebb7e98ee6a46743b569c69ca42b93c74ceb857a527685bca7babb44225cf69fd1238b70b8ab5129dfc9813689975167bab3dcf3ad7ebd81ac117022ebc1594ead6547057518ea2272259066bf9bf366a6ceb08d4a7e8445a436f33d4dd649b7e25ae14b8beb3568fd9f5b23cca9c3efea3ca856b5efe025670f12b449f24cf93a24c05bd3d908154049b4c4293456a1054b54b8c437ff3641ab2ab9a2d5eab1681ec3c6d4ec0f1af5deb4472546048ab61f87ac2b4072b8ac8f11e029a331a22b6e3a454fcf5087e3421b9d8810c201ff198ab7d990a4d7825fbf208c578aea96c383f58ff9bc0a69e6daa8bb636a16f798c2baa41c877df7d794040637c0eb06d7fb4979dc3beac81023cdcb687fb1ade7044d1450ba19c5e9c0372a10345c8315c51e94ff45d9ffaf5b863e593cce014b8691ac32e1f11b2c4396bd68cdc353dc466c19bbc4f35d6fd6ee91cc9d7724a6f1eb9f6b2b51922923bce0383e4a1135ab1a00599443648c43d912233dddc5100b3fe131cccce5c5b5d0d539ed451c0615ab088ea8e07b5f3129c25e7b8def6a1dc6d6b781120cf20073be522c9862907d66f707ff37abcaa1d0bc27e45ac29d52324f228f9aa8ecff447ee5b3d05d365c5bd9ad9982e4e8be374f8f11dfbea4c9f161d59ee0f714e83077dc25d34db1e379d4df71308171f91087cf6e3ba544fafafb0b350e958f9e3b0d91d4e50ef19e1fe887f3243540f902def6c66f38129e86eb0190cdd9368472eb2d9362d6f92a0b511cab47714e931763142f7e2175c7f95a36793d235338d7b211bd374e2e844ddc960f13e30ae8bddf8902101172e1abd4d5e7b3780486684e73733ebe58f80cd107e2cffa0a31139a69d663260396f8dee4d263810c7d0f4de3d4c1f714d0bd4827103607d7761f7d0eb74da18768805a9967c2b7318b3c14b7b73f521c137af076b8694f005021ab890a446c101ff2f8e95e8604baf11191d4de7b7f97609bcc0be6f6771395d459a770c2cf690c85e2be44c7067fe71bd6b6ae643e678c11ebce60b9c812aee0ae574b5414ab9ea1da1068f7654e5a30372a8609ca0a1031ec30e87e179435f94b2d3afffd101ce7ff75970e160199eedc4cd92539ef31a420554cd2ff5c634bb3f84607e8fbf724b6c1fc034123887de9a6024fb517625b1aa18c47817281e711a2821aaaf0f7842812385de515f9d036d650b1f18a8ed3c0f99fb58b990f948a60339533e6c00b0adcebe618a9b4c6ac18d3ebbfd41ad91f904729c74f23e420311ffe337ae1b479fdbcb7abe1c4b64959d2f375f02c19431b5b03738a4158aa4aa95ab679e389eeb758edf1ff8d60c648c53eb5caec117f38fe1bb604eee013af64d23d9a80d49b59d038a8f831c74d41ba2eb10bd8fdd82005481d9220b6bda1a8fbbc3555f9a8434a4bf030a99a313b7ce09510a1031f6b34b9c1e41f836567cc324a41ba53929d3627192a7e5ab5ccd73a4a1066b0472fcf7facf52cfe2747cb5a439473c0e9d80914ed097e3da1ffb61ee7a5001b3337b43e7784514b5afec75316bf400028264f4295d41600815f1fb3db728528b5705e417c24c90b6da8ed363e2c756d964fe8e92c33578583cbef0f1c5cf0ad2e72351edb0216b101c74b9f5dae80f927c97bc78e51701e9db04d0a7c14ba6ed7045e2f9ad2fc38d4a796ffeebb3f1e7b2cb21e2ba17a99f3f7726bb32c717a74f4127abbf588b97c0b08200e2b087cd759a869bfbff7fc8ba2a63fd5b25e7756c67eab89c51b7fc6dab4c21303f3a740fdb66dc127dc6fb42eb30b3263894ede063b7ba6c48aad7f1b3493944c6adce6c20ca163d4c0d67d3143b841dc31cc1e1e9402487422cd7f50b955f8f8b124bc07131b27c1e4e501a1f2b55dd8a31ae6135d817574b4e01b8d876c004f1d17019bc3b3414c174452c7f08ce7e3bba6664b5d21eea1bf9f4a36d042ebec01de97e99dbfec9736990b408d60476b7c7965f5ca00a965e33a90967d17d36348ddb36e68f700aa358358b9c81a9a39aa4221b0acf484d1a346085a4be0dc5eb634c6afa88c0af627352dc97fb449ec8434b9daaf64713964472223386de7984a1a75535409d9364d1be032e604337d8c036cf8f6968c520e2eb80112b053a0a7cd32bed2b58e00112b44507aa6664d7a3ecf1b466fa9c7319f1d397172e6b97d1590cfc327d9537116d03e76fc446459c68c0f06dc825264e320e1f689699b723c6e7106d6812dbddb9a06583c146e5e2faad8330fd25a4e5dde0d99bcc54ecf4dbf64b7311995ba66229e346524af290703953414bfddffdb4e39371d2720d1cc96d197a630d3c4435a5e7fed114830378e4abd9f38ca2ccdb634d73dd314597ea8e32a354cf7ddccdea389eb716591d00708871dc9d3bc69226962fbd1b8400021d9ca7e218bf4faae4a60fd9c7e9f7be8ba84641d481469986b70d304047e6c94c3b4f9bf4e23c3e015327008b23ac9547c7958393d85f940ae358a1734a37c32e9bfdc46f9de909461df570df5dd5cca52d8dffb6044f808a3e209ae2574dceea91f2c2144965855bc04348d3bfc18b446411f73b687a032549c48a9ab6e335083e7b4029dedc3aff91d0acfa63b0eaf073a4ebc4d51cc4532d99706c7372a8aad8a8dea0248452c3aa57139c7508a5a7ba5f0a377c7656054d63f3b4344c66c1c666ef2fed35b8541daaecb8ee54cb80d898216db75b91598c4428c31975ba95a90c136a80bf988533a40bb4a1478cdc838eba852107c738a3690c6c82ed2439fc0b98672b45de52b806a7481b94d6d0f0326cd2a2bf43abfeb39db9a05436c60289950b8dbdf5e7ecca6f974e5809749fbe6e55ab91a0ca27c86d983cb8c5845dec3afcbc31a0c32b7678735ba1347f9b2a0c67bea499af49f14398cfade6339a1b58f5c7c7fd25602b11716470ab11da1ffae1559a008b7125dbd4f04d3259343828546b80bd7a550787978d6159eda35cbd7c649a7176e86a211fd9e9568b4dad921745dae986dc40ba0a57bc662264282d70702bcfbb1a10d9b497eb7b7de65252324349030c36b8c8ea8b604da7ca2a9012aa47495fa594c8a201981ee4089a2d21ce590309a3df5de2d7aedd517c585fc467743031a868464f7341e199c9a9e723128d4bd57269b00bb90a9c335ed332a6f7dea3d65b7ef20a06bcd3dd2e6d04a344b3e2dbe351e4604422c91f67ace112dcc5f33e5f068ec1f7c6b589487e0034c064f72bc76dafba40beafbf5ccf491136c1901df610b5ea5c5e931f7962ed2d8c13f4c7c68762ca2c90c2140f70c645e3537349f8a4b2cecf501ac52413abb6073020533acdd470e4e76582f38a89fda282bafe80dd51c2fbe5c5bebf1db4b8179374fbfd5cace4c58a2e8350f6769ba249072e1fe057c0e1096b3d3c389ec29e4efd00088b1e565c213c25229a4a1335e113f71c7d450209158c83206a9d6f974241dc1e482f5f96d68b7eb9eca8c870f4cc59b61b2bb2425a9df2f5020915968426f7a803b6db3e1216afa2e1351118e6721582fb92dc775eb0a6e99e0d43dabbf5d5ae81ca12fcaf05d3ab71c9e692890c8fb73b0bd28fbfae98dada238e096e0834f9d4c11e6947f1a5bbf0cdcf9d7454c67d9f29ddce4b4a805a8b9f3b6ed42de86f8943e9807b0e931662e103ddcd20aef56cb0f00fde2fde86c7fc3da5fd016c37a5d022c424f4f87edab090d6bd39d97ec21f4f0c95ec62537c29acac95e7d0246c8b3b9d7317df0cd4a7611f635127022c24dd4ded3f086df5e72e76f4235b1e7288e8570e1134a304528d59c268888ba9577ea446f1cee4748f8879198a7bbe2be449fb888550330078735240df5f3c08c5b6c5ec3aa5cf2b8d3f3d5d540f3e375aa21c7271ade08e67c965c0aeeffef635bff763937ae8eb53faf15f2c5b2df9ed3e0f022b7d6809be95a8247c14264cceee16171a5f637f4ab4387fd0da240149559f813d91f2667a9cf694f9e607efe7c73aad51133cad3efa96f158f8cdbfa0caeb89e41a58690fa135a3c12696e6f65ce86a1d8a1c880a860284f189e728a7c3e4d58e0aeee2f6b0625a0faec5950bdb765aac8cca231cd65725c92af78c54729fb78fa49f45e14c93dc259e12f0078d77ebb5154f3eb38a1bb0678680815a957b907dcaba20a984f0d9834aa1a4dcd674fd7683ca7879572d81caee4c92850d407fe9f8d375822ad35c5c5df9311d53a4f7487a9cada05b5209c65bb3975cda4201abf7732943faa83a01f29130c1ce43db1bcea82d1b92a010fbb75215d1da302e483eb5b3007ec16987ac858792586f4411276faca479f45aa83626f282c0c158b3f4160345d16ab3599c3c6f5cd14b9407ce68342b1b77a008fad0cdfc6439a214b0941e657e48bb6dbf9940efa27b41bb390faadb0f6e6b22cc0cadb144ce944a0c05df6cfb512650795dd77fe0c05f41155ba9b3c8178ba363ebce228733472d577f6f8be049a67b38890e2c9373faf0c6a5cbd78dfe6e6936a7b33d4305004eb93457c467a126b39d73189cdd940779b8031be88120370508d2ee37d0183af1cd2a9a4110cd019e3edbb5b813797c766cc2447f78bbc848e9bffca0530a3f9ecd924012f1af2a4d50798a0cfb3bc167676856ddf2625206b14734602ba64a0b0190947fb021940e7dda7c521f8bec9d9ab3628891b3b3d4f0159ebfbda4f422d906286e18908cfe13c51e93512821dfa4faf92f18b64dcea976b9a63d569cdbfa9b9bf8e9bd8b6b12c11cb472e7b76e52c6ec6e759fe4c667281fb1adea836fbfa8e40f257741959ea5ec71164ede757a359dbc32df01ce713e4daf8b4c43225ea55a144a9ce69cf7abe1ed7203865a81cdd85d5fdb62d94a4432a3784c35d422b83fc6092b0df67ac86ed0e8720c51deca60d02226782c77db67c471fef42911b8d3c025b8f75a3a5b322996d839223e7a4997fa65c39b2629f55647efea36177f4509ade0aae4e941ce975e2d6056f7167a9d16705728a31a46ff0a8f9d69d9189ff4642eb3a09b23fb58b5787c9bf51a61a5fc96d56380a2e17939a1461160c8de728a6102f01298fa90587bfc4893158ecb14c72e3dfd35139ae38cfaf3971625f93fc93cf36d0736fc20a2f2cc6ae0c275a616cd18de0e65d6a574cb01c89c6685e82fa0e5bd9443ebc3242dd842e06df1c5be66098b09c206e4b5ab5a97b9d452c61d29d82da797fa4705c37f1d1f592a444486d562aca8e20ebead5da345c9505f9910e7fadb0e5cd7a11986cb8ad6771a7afa272950725ff6699016262b9084ffcfa15937e46a31266d907abb66c30538bc63c7893e22d7ce05c5cf708f187f523b10538fcc8e00e624e08b5dee3bf1eff9ee8351fe54f1dd27243ff5bcec26a9d1343cfcbe88499b0fa326a03eeab57656db3fb25149f9b26ef1c85a6919b29e7700fe6e8e8c85480c346420d6bfbbb4e7473859e5225330b3e71dd5af03949d51280e98d3b6857bf2baa8eb892cc669ff0529063f744052edf6a77e85e6387c4b4a6e0af6201a8deb30cf88b0b2d98f738ab5f2bde3184658ef3c8db6e83e4a697bd5ba3d74b65a46a7e928fb4698ee030fa1829c6a21cf2117fb63c694285929a18829985e601bb57bbb647e474e86ea0562210ba6dcc782c85d1f08a8fe7857bef24f0eb61b90ec459c49d67cb7cea4db606b3332e3f8a5d06088e17b07feef04965c44874c734c31275c440edd5e20fd600c72ffea4f56f76c94c83519a03e03d05fa32ff68a02bcc6233af3a959f2722fe0ee68811f621e526db80c1a785a03b9f332f00c99170680855bd6189cacaa91a304c41c30acf885a3692f654b403d6b17e666b4fcac13af48d3b533cdafc0ddbd0f9d12c5087193efc0a88340faa31a968ff22345dfe1c0c2b772ed1c6d150c90952245d77fdff48904113de2d3c0f3e5e856f01aa2ec3bed85a86cdf9e78177fad513824f3b8c63005fb185040a428388bcb55eefcc7096f0ae8bc2861b7f47cbebc6dbe5df652747abcf2e6541809298a9b185881088031f2e9026b3593316bdaacb1a72401f04bd7015bceff1fb54afbd3daf30f476d98344091398b5590455f37616a3682476cc55edaeed43ba60b986aa1a9216d27a01a11fb03a9019f2a2f3dabddd2d3e4ff6bd1ae26c93f691777084ce7367ebadafbd4a9b63b5cfb9f4bea7bbd318c681077c38b4a8dc373f7f01b6e6d8a0752cae8f6df13d7ef4d28afa19ed2b7cdb90970ed18a9cb634fd4ddc73d8abc90108dfdb673a99b0c90942682908854c485fab7323b340243159136d487f8067fd865957c47bf042884f3ed889470f9d5a10e05dfef4da3eedfa69728b91f167965732c94b697a9e09c7d7de13f030c91c46392790aa08d16489126c8ab2fa92d485c98486d90c9b5d30063e9c76914e54ea24fb3d3ed6a9806ba6a2f9a9f0472f7ebac8ff953cf669cfff6d673639393e9d2208458c63976699e1b9acbe8dac049e0c09b2a88fe1afe6c3bf9e3535c29e0584399e90f5c743842642d14e9ecee2551a470111e8fab138f84fbb70527d39ae4f34bba5e44567354aac80d42f309a7b834f85353d171793609028e4368ecdb40fa617e3e8640a90cd1f1abd49713e3bff13c471f2e47965ba8cf68ab970ac4f18436c81ab8d4bc781b4b727856b8fc53df2c4e6f40a2ec346196e840056f7a2f3690782d48bf5072780c9d29b5c7f50993ca65f52f2ff4a961a0ce7bd6e8676f7eeb9e6c3bcc2bcbd2075b8e469f466511fb5f8f7ad07d90334aa88be99e302b33543a35add9568e2f88ba4aad7d82312e3a7e9902d1056fe2811157cf643dc1745a69a4ed5b37adb04c3732e74d76a67da966979603eb1b0be664bc8fce2a0f065caae34cd26f5ca95d3abe91fdfedb293144c48a30510726ad971d3e2ae004967b9b822f4e97f84b66c301b223cdbcac28af04b9c383709e38e61172c6bbc8157bf500dcac55108939e459bc1d007cfe6421bd8c45aee4afb1405d70b59c081e3669f06b6f7395d07198ba8d326021154dfa8ca88d75c1c93c0fdf3719dab8814c0488b6c0ce26fd5815654d432ac4dafeff06098adb46dbfad3d52c92404042ca185fb89e90522ee0edb3c8810748e4b01dfe996d9c153343102a03f4071860dafe60ea02b7cb8f198885ab4abc6e0cdc38e099546d4da92f10243b0f93e6bb5f2f924f3b48f148b9d2cc4762d539ce3174ecb832b64a70d368e59bca43cb1aa2782e50c85d0192756ee3b9998230c69a2988ce1037f14d48ad2affe2cb49393ae94da045614d204a92d6dca2b10cf262ca20765cbc8a11cb644d9ef6a3c1387d24bdf7ee5122e9e4a17bf125f5a5303f2c2a27a7ce1a5e6d7b55b33e89fbd9e35416bb1d50dd42f6ff0113ad7ceec9feaf8538c11360c74bd33a0a0a472222002f3c77c1bc3989acfd908f778d8049ffa898c0ccc9549b178342eb2c37633f62a3898d0cfeb66d2d067fa94e1fcb811c9cb6b1e9aa119201d3c451dab710c91e0f6efb2013e11e4c68ee55534c4853bf27da168755b3a468edd4b08edfd0a75b7703cdd6e7698c36098ca36a5d8e92022279cf277bfbc5d824e45bb2fee12333ba8d9394260ff08b03c4ea9dde6def05882393bd9ff53082971e143759f73c7e6b445c7cdeeef55c9e42820c30c63925310b44250debecb98e6e286b8a03985c96806804a5f8fed71efe5c3ceca860b1380f42f6a2b4322e0c9c21b8a0efc0b6b107cd0525620cf4928652fecf7700ccafae3715e6d9fe22b24e1f07a80649929e509e48db820139ec4469f58d513d150d334fd850ab2ef42656a52d0f66f7a0a2b205b0b860a4fc02922bc30d7b3a4872c76f1f310822790d2ca767ac465a0c380a28566ca8da31a82e41ad071e3b66e7ef166638e062deaddc7ecc514486ec63aeef483f2b801e79b604df1dca289541f19e1dd4b0ba709366159a2113704455884cc98afe1c3c1b981d16a7fc3caa029a144f3ee919ede7fa813da84e532de473ba94305a8df09c8d263a6c29a53118d6fcb4712f91eae6d9cadf705df53915effb43ac38df64971bbf2fccd88cc2e465df757059137b93ac7458fe250b367deddbaba9b7b296cc1d9ceb08c317277179f7380846f44e1d11abbf3e011e8f2ab6ed4bd8293cf27a293bcf1dc89bf93de39a869a08bd23e84dd4505d1df81f8e0ef21596ed255220c28e664633dcf88337ea0f8acd47f9f9f8195a383febc2b2c06ae509723cd584a2fcb24e213d51cecd65080dd395ee63874fe5d7aaaa757f47ec6b4227aa446f5ba19b2af604ee9f8acea071ec022191ebfcc3dab76d4225f87fb129d996504177dbec4385531f8a8913ef6ccbf2897d78baf0b59172eb0d49c56be12d8799f4824957f6627f4a73490ce8286a0e96def8cdea5439a3cd50c2dad444db0f1f3aba668e4bb5dc4edc165509780aba22c8f6ca6417d0f93e41fbdde5f888dd472214c581603a378972f8a7a4903188050113a41ef7223d1d9e0593604c2e25f9b8a0e448fa262789a17dbf39d956191730a014f3335e1cdd131fe6a179118ff2f183679cf1cf27c8bcea21914480464735f3ca2b8a9305943f96e5c108b5ff018a0764ee212aca0e7872c0aeaa8a7d8d54426097cfe437a96b2feec905983526e02e113b8ab1cc021e8e81404ef890d16c005cbbf63c84993520f62d9742337e0faf26d951a50fa06572948cc522b6b95b4328b7c0379acb5b4da1abdee0f5bd4567a7333187509467154080158db8126bf4889eac67c3a9e2866c0e99589997f83adfaab55adc4cdfc818706ad62786792aadc1da68ea8f2c1526a9f20fdd734db4cf49fd376fb8b9175e39865a5c9a7194575425da884882e7b128f39efa8b99bf2be406629e1090a3c7ac0f930c724ce542065ec1ba000584cf7f42ea63c8c7076d142842a161c20d0c5d06294baf58675a46ea0fffdbbc84096038a448d40a68111fc6310e5d69c00bacaf3082d2a532a4791a5f0cbad6c067dad9a834552088</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">输入密码查看原文！</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>kylin</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
      <tag>kylin</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Jumpserver部署</title>
    <link href="/p/jumpserver.html"/>
    <url>/p/jumpserver.html</url>
    
    <content type="html"><![CDATA[<p id="hitokoto">获取中...</p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><p>@<a href="%E7%9B%AE%E5%BD%95">toc</a></p><hr><h2 id="参考信息"><a href="#参考信息" class="headerlink" title="参考信息"></a>参考信息</h2><p><strong>当前版本：CentOS7.9</strong></p><table><thead><tr><th>主机</th><th>IP</th></tr></thead><tbody><tr><td>Jumpserver服务器</td><td>10.20.0.16</td></tr><tr><td>资产主机</td><td>10.20.0.15</td></tr></tbody></table><p>#执行脚本前请确保以下配置达标</p><div>            <input type="checkbox" disabled checked="checked">访问外网正常          </div><div>            <input type="checkbox" disabled checked="checked">内存>=4GB          </div><div>            <input type="checkbox" disabled checked="checked">处理器>=4          </div><div>            <input type="checkbox" disabled checked="checked">硬盘>=50GB          </div><div>            <input type="checkbox" disabled checked="checked">关闭SELINUX          </div><div>            <input type="checkbox" disabled checked="checked">关闭防火墙          </div><hr><p>#自动化部署脚本<code>quick_start</code>内容如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#cat quick_start.sh</span><br><span class="hljs-comment">#!/usr/bin/env bash</span><br><span class="hljs-comment">#</span><br><br>Version=v2.28.1<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_soft</span></span>() &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v dnf &gt; /dev/null; <span class="hljs-keyword">then</span><br>      dnf -q -y install <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span><br>    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">command</span> -v yum &gt; /dev/null; <span class="hljs-keyword">then</span><br>      yum -q -y install <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span><br>    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">command</span> -v apt &gt; /dev/null; <span class="hljs-keyword">then</span><br>      apt-get -qqy install <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span><br>    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">command</span> -v zypper &gt; /dev/null; <span class="hljs-keyword">then</span><br>      zypper -q -n install <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span><br>    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">command</span> -v apk &gt; /dev/null; <span class="hljs-keyword">then</span><br>      apk add -q <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span><br>      <span class="hljs-built_in">command</span> -v gettext &gt;/dev/null || &#123;<br>      apk add -q gettext-dev python3<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>      <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;[\033[31m ERROR \033[0m] <span class="hljs-variable">$1</span> command not found, Please install it first&quot;</span><br>      <span class="hljs-built_in">exit</span> 1<br>    <span class="hljs-keyword">fi</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">prepare_install</span></span>() &#123;<br>  <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> curl wget tar iptables; <span class="hljs-keyword">do</span><br>    <span class="hljs-built_in">command</span> -v <span class="hljs-variable">$i</span> &amp;&gt;/dev/null || install_soft <span class="hljs-variable">$i</span><br>  <span class="hljs-keyword">done</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">get_installer</span></span>() &#123;<br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;download install script to /opt/jumpserver-installer-<span class="hljs-variable">$&#123;Version&#125;</span>&quot;</span><br>  <span class="hljs-built_in">cd</span> /opt || <span class="hljs-built_in">exit</span> 1<br>  <span class="hljs-keyword">if</span> [ ! -d <span class="hljs-string">&quot;/opt/jumpserver-installer-<span class="hljs-variable">$&#123;Version&#125;</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">timeout</span> 60 wget -qO jumpserver-installer-<span class="hljs-variable">$&#123;Version&#125;</span>.tar.gz https://github.com/jumpserver/installer/releases/download/<span class="hljs-variable">$&#123;Version&#125;</span>/jumpserver-installer-<span class="hljs-variable">$&#123;Version&#125;</span>.tar.gz || &#123;<br>      <span class="hljs-built_in">rm</span> -f /opt/jumpserver-installer-<span class="hljs-variable">$&#123;Version&#125;</span>.tar.gz<br>      <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;[\033[31m ERROR \033[0m] Failed to download jumpserver-installer-<span class="hljs-variable">$&#123;Version&#125;</span>&quot;</span><br>      <span class="hljs-built_in">exit</span> 1<br>    &#125;<br>    tar -xf /opt/jumpserver-installer-<span class="hljs-variable">$&#123;Version&#125;</span>.tar.gz -C /opt || &#123;<br>      <span class="hljs-built_in">rm</span> -rf /opt/jumpserver-installer-<span class="hljs-variable">$&#123;Version&#125;</span><br>      <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;[\033[31m ERROR \033[0m] Failed to unzip jumpserver-installer-<span class="hljs-variable">$&#123;Version&#125;</span>&quot;</span><br>      <span class="hljs-built_in">exit</span> 1<br>    &#125;<br>    <span class="hljs-built_in">rm</span> -f /opt/jumpserver-installer-<span class="hljs-variable">$&#123;Version&#125;</span>.tar.gz<br>  <span class="hljs-keyword">fi</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">config_installer</span></span>() &#123;<br>  <span class="hljs-built_in">cd</span> /opt/jumpserver-installer-<span class="hljs-variable">$&#123;Version&#125;</span> || <span class="hljs-built_in">exit</span> 1<br>  sed -i <span class="hljs-string">&quot;s/VERSION=.*/VERSION=<span class="hljs-variable">$&#123;Version&#125;</span>/g&quot;</span> /opt/jumpserver-installer-<span class="hljs-variable">$&#123;Version&#125;</span>/static.env<br>  ./jmsctl.sh install<br>  ./jmsctl.sh start<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">main</span></span>()&#123;<br>  <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;OS&#125;</span>&quot;</span> == <span class="hljs-string">&#x27;Darwin&#x27;</span> ]]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Unsupported Operating System Error&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;macOS installer please see: https://github.com/jumpserver/Dockerfile&quot;</span><br>    <span class="hljs-built_in">exit</span> 1<br>  <span class="hljs-keyword">fi</span><br>  prepare_install<br>  get_installer<br>  config_installer<br>&#125;<br><br>main<br><br></code></pre></td></tr></table></figure><hr><h2 id="部署开始"><a href="#部署开始" class="headerlink" title="部署开始"></a>部署开始</h2><p><a class="btn" href="https://github.com/jumpserver/jumpserver/releases/download/v2.28.1/quick_start.sh" title="点击跳转">quick_start.sh</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#若果脚本拉不下来也可以直接复制我上面的 quick_start.sh</span><br>[root@C7-6 data]<span class="hljs-comment"># curl -sSL https://github.com/jumpserver/jumpserver/releases/download/v2.28.1/quick_start.sh</span><br><span class="hljs-comment">#github里直接复制粘贴的命令有个缺陷，docker未配置加速，拉镜像慢到跑不动了</span><br><span class="hljs-comment">#建议在执行脚本进行到拉取镜像时手动退出，并配置镜像加速后再重新执行脚本</span><br><br><span class="hljs-comment">#将此行加入 /etc/docker/daemon.json</span><br> <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://dl0ygawi.mirror.aliyuncs.com&quot;</span>],<br><span class="hljs-comment">#记得重启docker</span><br>sudo systemctl daemon-reload &amp;&amp; sudo systemctl restart docker<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@C7-6 data]<span class="hljs-comment"># bash quick_start.sh</span><br><br>……………..<span class="hljs-comment"># 脚本执行时间很长............</span><br>download install script to /opt/jumpserver-installer-v2.28.1<br><br><br>       ██╗██╗   ██╗███╗   ███╗██████╗ ███████╗███████╗██████╗ ██╗   ██╗███████╗██████╗<br>       ██║██║   ██║████╗ ████║██╔══██╗██╔════╝██╔════╝██╔══██╗██║   ██║██╔════╝██╔══██╗<br>       ██║██║   ██║██╔████╔██║██████╔╝███████╗█████╗  ██████╔╝██║   ██║█████╗  ██████╔╝<br>  ██   ██║██║   ██║██║╚██╔╝██║██╔═══╝ ╚════██║██╔══╝  ██╔══██╗╚██╗ ██╔╝██╔══╝  ██╔══██╗<br>  ╚█████╔╝╚██████╔╝██║ ╚═╝ ██║██║     ███████║███████╗██║  ██║ ╚████╔╝ ███████╗██║  ██║<br>   ╚════╝  ╚═════╝ ╚═╝     ╚═╝╚═╝     ╚══════╝╚══════╝╚═╝  ╚═╝  ╚═══╝  ╚══════╝╚═╝  ╚═╝<br><br>   Version:  v2.28.1  <br><br>1. Check Configuration File<br>Path to Configuration file: /opt/jumpserver/config<br>/opt/jumpserver/config/config.txt  [ √ ]<br>/opt/jumpserver/config/nginx/cert/server.crt   [ √ ]<br>/opt/jumpserver/config/nginx/cert/server.key   [ √ ]<br>complete<br><br>&gt;&gt;&gt; Install and Configure Docker<br>1. Install Docker<br>complete<br><br>2. Configure Docker<br>complete<br><br>3. Start Docker<br>complete<br><br>&gt;&gt;&gt; Loading Docker Image<br>[jumpserver/redis:6.2]<br>6.2: Pulling from jumpserver/redis<br>a603fa5e3b41: Pull complete <br>77631c3ef092: Pull complete <br>ed3847cf62b8: Pull complete <br>c35fa6b24d23: Pull complete <br>715a5ac967d7: Pull complete <br>0a26dfd13d55: Pull complete <br>Digest: sha256:a6349e1a6a8b317dbd9e196eb3f4c44b304f7fb899e7d2af7b0211112bccd952<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> jumpserver/redis:6.2<br>docker.io/jumpserver/redis:6.2<br>..............................................<br><span class="hljs-comment">#此处提示是否自动以自定义设置服务相关信息,看个人喜好设置</span><br>Digest: sha256:a7065804f135f3d1fef15412adec99d62475e42e48c0ec6934d7fc4b44aae1ad<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> jumpserver/web:v2.28.1<br>docker.io/jumpserver/web:v2.28.1<br><br>complete<br><br>&gt;&gt;&gt; Install and Configure JumpServer<br>1. Configure Private Key<br>SECRETE_KEY:     ZjQzODRkNTYtNTY1Ny1hNTIyLTBlMmYtNzEzMDVmYTNlZDZk<br>BOOTSTRAP_TOKEN: ZjQzODRkNTYtNTY1Ny1hNTIy<br>complete<br><br>2. Configure Persistent Directory<br>Do you need custom persistent store, will use the default directory /data/jumpserver? (y/n)  (default n): n<br>complete<br><br>3. Configure MySQL<br>Do you want to use external MySQL? (y/n)  (default n): n<br>complete<br><br>4. Configure Redis<br>Do you want to use external Redis? (y/n)  (default n): n<br>complete<br><br>5. Configure External Port<br>Do you need to customize the JumpServer external port? (y/n)  (default n): <br>.................................<br><span class="hljs-comment">#当出现此行时表示安装成功，访问地址和账户信息以打印在下方</span><br>&gt;&gt;&gt; The Installation is Complete<br>1. You can use the following <span class="hljs-built_in">command</span> to start, and <span class="hljs-keyword">then</span> visit<br><span class="hljs-built_in">cd</span> /opt/jumpserver-installer-v2.28.1<br>./jmsctl.sh start<br><br>2. Other management commands<br>./jmsctl.sh stop<br>./jmsctl.sh restart<br>./jmsctl.sh backup<br>./jmsctl.sh upgrade<br>For more commands, you can enter ./jmsctl.sh --<span class="hljs-built_in">help</span> to understand<br><br>3. Web access<br>http://10.20.0.16:80<br>Default username: admin  Default password: admin<br><br>4. SSH/SFTP access<br>ssh -p2222 admin@10.20.0.16<br>sftp -P2222 admin@10.20.0.16<br><br>5. More information<br>Official Website: https://www.jumpserver.org/<br>Documentation: https://docs.jumpserver.org/<br><br><br>[+] Running 8/8<br> ⠿ Container jms_redis   Healthy                                                                                          2.0s<br> ⠿ Container jms_mysql   Healthy                                                                                          2.0s<br> ⠿ Container jms_core    Healthy                                                                                         28.7s<br> ⠿ Container jms_web     Started                                                                                         29.5s<br> ⠿ Container jms_celery  Started                                                                                         29.5s<br> ⠿ Container jms_lion    Started                                                                                         29.7s<br> ⠿ Container jms_koko    Started                                                                                         29.7s<br> ⠿ Container jms_magnus  Started                                                                                         42.3s<br></code></pre></td></tr></table></figure><hr><p>#登录 jumpserver web 界面 ，账户在上图可看<br>#创建普通用户<br><img src="https://img-blog.csdnimg.cn/20200703155615702.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br><img src="https://img-blog.csdnimg.cn/20200703155637153.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><hr><p>#创建管理用户<br>#管理用户应当是资产主机上的root管理员或者是在资产主机上拥有 <code>NOPASSWD: ALL sudo</code> 权限的用户<br>#jumpserver会使用该用户去推送系统用户以及获取资产硬件信息等，因此若该用户的密钥配置错误将会导致无法连接资产主机<br><img src="https://img-blog.csdnimg.cn/20200703155755546.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><hr><p>#创建系统用户<br>#该用户是jumpserver跳转登录资产主机时使用的用户<br><img src="https://img-blog.csdnimg.cn/20200703155838607.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br><img src="https://img-blog.csdnimg.cn/20200703155853724.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><hr><p>#创建资产<br><img src="https://img-blog.csdnimg.cn/20200703155932353.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br><img src="https://img-blog.csdnimg.cn/20200703155946436.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><p><img src="https://img-blog.csdnimg.cn/20200703160009759.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><hr><p>#资产授权<br><img src="https://img-blog.csdnimg.cn/20200703160028355.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br><img src="https://img-blog.csdnimg.cn/20200703160051251.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><hr><p>#登录mahuateng 用户<br><img src="https://img-blog.csdnimg.cn/20200703160114330.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><p><img src="https://img-blog.csdnimg.cn/20200703160124821.png"></p><hr><p>#返回admin用户，配置命令过滤<br><img src="https://img-blog.csdnimg.cn/20200703160146362.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><p><img src="https://img-blog.csdnimg.cn/20200703160152961.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><p><img src="https://img-blog.csdnimg.cn/20200703160201839.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><p><img src="https://img-blog.csdnimg.cn/2020070316021226.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><hr><p>#更新系统用户配置<br><img src="https://img-blog.csdnimg.cn/20200703160224699.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><p><img src="https://img-blog.csdnimg.cn/20200703160231968.png"><br><img src="https://img-blog.csdnimg.cn/20200703160240440.png"></p><hr><p>#登录mahuateng 用户<br><img src="https://img-blog.csdnimg.cn/20200703160301579.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
      <category>jumpserver</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>jumpserver</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ansible相关操作</title>
    <link href="/p/ansible.html"/>
    <url>/p/ansible.html</url>
    
    <content type="html"><![CDATA[<p>@<a href="%E5%AE%9E%E9%AA%8C%E5%88%97%E8%A1%A8">toc</a></p><hr><h1 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h1><p id="hitokoto">获取中...</p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><p>#请确保以下事项</p><div>            <input type="checkbox" disabled checked="checked">三台虚拟机          </div><div>            <input type="checkbox" disabled checked="checked">关闭防火墙          </div><div>            <input type="checkbox" disabled checked="checked">关闭SELINUX          </div><div>            <input type="checkbox" disabled checked="checked">虚拟机时间同步          </div><table><thead><tr><th>主机版本</th><th>主&#x2F;被</th><th>主机IP</th><th>主机名</th></tr></thead><tbody><tr><td>CentOS 7</td><td>主控端</td><td>192.168.124.5</td><td>C7</td></tr><tr><td>CentOS 7</td><td>被控端</td><td>192.168.124.13</td><td>C7-3</td></tr><tr><td>CentOS 7</td><td>被控端</td><td>192.168.124.14</td><td>C7-4</td></tr></tbody></table><hr><h1 id="实验准备"><a href="#实验准备" class="headerlink" title="实验准备"></a>实验准备</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#在主控端 主机C7上操作：</span><br><span class="hljs-comment">#安装ansible</span><br>[root@C7 ~]<span class="hljs-comment"># yum install ansible</span><br>Loaded plugins: fastestmirror, langpacks<br>Loading mirror speeds from cached hostfile<br> * base: mirrors.neusoft.edu.cn<br> * extras: mirrors.aliyun.com<br> * updates: mirrors.neusoft.edu.cn<br>No package ansible available.<br>Error: Nothing to <span class="hljs-keyword">do</span><br><br><span class="hljs-comment">#很显然，我们的光盘仓库中缺失ansible相关依赖包</span><br><span class="hljs-comment">#搜索一下epel并添加epel源</span><br>[root@C7 ~]<span class="hljs-comment"># yum list | grep epel-release</span><br>epel-release.noarch                         7-11                       extras   <br>[root@C7 ~]<span class="hljs-comment"># yum install epel-release -y</span><br><br><span class="hljs-comment">#这次安装成功</span><br>[root@C7 ~]<span class="hljs-comment"># yum install ansible</span><br>……………<br>Total download size: 20 M<br>Installed size: 114 M<br>Is this ok [y/d/N]: y<br>…………<br>Installed:<br>  ansible.noarch 0:2.9.9-1.el7                                                                                                      <br><br>Dependency Installed:<br>  python-babel.noarch 0:0.9.6-8.el7           python-httplib2.noarch 0:0.9.2-1.el7      python-jinja2.noarch 0:2.7.2-4.el7        <br>  python-markupsafe.x86_64 0:0.11-10.el7      python-paramiko.noarch 0:2.1.1-9.el7      python2-jmespath.noarch 0:0.9.4-2.el7     <br>  sshpass.x86_64 0:1.06-2.el7                <br><br>Complete!<br><br><br><span class="hljs-comment">#在继续实验之前我们需要提前配置好远程被控主机的免密钥登录</span><br><span class="hljs-comment">#全部直接回车直到结束</span><br>[root@C7-3 ~]<span class="hljs-comment"># ssh-keygen -t rsa -C &quot;ansible@linux&quot;</span><br>Generating public/private rsa key pair.<br>Enter file <span class="hljs-keyword">in</span> <span class="hljs-built_in">which</span> to save the key (/root/.ssh/id_rsa): <br>Enter passphrase (empty <span class="hljs-keyword">for</span> no passphrase): <br>Enter same passphrase again: <br>Your identification has been saved <span class="hljs-keyword">in</span> /root/.ssh/id_rsa.<br>Your public key has been saved <span class="hljs-keyword">in</span> /root/.ssh/id_rsa.pub.<br>The key fingerprint is:<br>SHA256:KLIoqlICPAnj9JYIHr5opUN8gH4gnziRF56LlxFyweQ ansible@linux<br>The key<span class="hljs-string">&#x27;s randomart image is:</span><br><span class="hljs-string">+---[RSA 2048]----+</span><br><span class="hljs-string">|o+*o             |</span><br><span class="hljs-string">|OXoo             |</span><br><span class="hljs-string">|%*E..            |</span><br><span class="hljs-string">|+&amp;o@   .         |</span><br><span class="hljs-string">|=.&amp; . . S        |</span><br><span class="hljs-string">|oB.o .           |</span><br><span class="hljs-string">|+oo              |</span><br><span class="hljs-string">|+                |</span><br><span class="hljs-string">|=                |</span><br><span class="hljs-string">+----[SHA256]-----+</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#这里的 id_rsa 为私钥文件，id_rsa.pub 为公钥文件</span><br><span class="hljs-comment">#特别注意：.ssh目录的权限需是700</span><br>[root@C7-3 ~]<span class="hljs-comment"># ll /root/.ssh/</span><br>total 8<br>-rw------- 1 root root 1675 Jun  2 17:21 id_rsa<br>-rw-r--r-- 1 root root  395 Jun  2 17:21 id_rsa.pub<br><br>[root@C7 ~]<span class="hljs-comment"># cat /root/.ssh/id_rsa.pub &gt;&gt; /root/.ssh/authorized_keys</span><br>[root@C7 ~]<span class="hljs-comment"># ll /root/.ssh/</span><br>total 16<br>-rw-r--r-- 1 root root  395 Jun  3 08:39 authorized_keys<br>-rw------- 1 root root 1675 Jun  2 17:15 id_rsa<br>-rw-r--r-- 1 root root  395 Jun  3 08:39 id_rsa.pub<br><br><span class="hljs-comment">#当前登录远程被控主机提示需要输入密码</span><br>[root@C7 ~]<span class="hljs-comment"># ssh 192.168.124.13</span><br>root@192.168.124.13<span class="hljs-string">&#x27;s password: </span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">#将authorized_keys 文件发送到另外两台被控主机</span><br><span class="hljs-string">#中间输入yes；密码输入被控主机的root密钥</span><br><span class="hljs-string">[root@C7 ~]# scp /root/.ssh/authorized_keys 192.168.124.13:/root/.ssh/</span><br><span class="hljs-string">The authenticity of host &#x27;</span>192.168.124.13 (192.168.124.13)<span class="hljs-string">&#x27; can&#x27;</span>t be established.<br>ECDSA key fingerprint is SHA256:Qqm+M0hyyYv59HC4ibs/tKiKpM4TIO7HqrZmDJoGWrs.<br>ECDSA key fingerprint is MD5:66:0c:de:ae:d5:6a:99:77:2f:f3:f0:20:a7:73:30:1a.<br>Are you sure you want to <span class="hljs-built_in">continue</span> connecting (<span class="hljs-built_in">yes</span>/no)? <span class="hljs-built_in">yes</span>     <span class="hljs-comment">#输入yes</span><br>Warning: Permanently added <span class="hljs-string">&#x27;192.168.124.13&#x27;</span> (ECDSA) to the list of known hosts.<br>root@192.168.124.13<span class="hljs-string">&#x27;s password:       #输入被控主机的root密钥</span><br><span class="hljs-string">authorized_keys                                                                                        100%  395   121.4KB/s   00:00    </span><br><span class="hljs-string"></span><br><span class="hljs-string">[root@C7 ~]# scp /root/.ssh/authorized_keys 192.168.124.14:/root/.ssh/</span><br><span class="hljs-string">The authenticity of host &#x27;</span>192.168.124.14 (192.168.124.14)<span class="hljs-string">&#x27; can&#x27;</span>t be established.<br>ECDSA key fingerprint is SHA256:Qqm+M0hyyYv59HC4ibs/tKiKpM4TIO7HqrZmDJoGWrs.<br>ECDSA key fingerprint is MD5:66:0c:de:ae:d5:6a:99:77:2f:f3:f0:20:a7:73:30:1a.<br>Are you sure you want to <span class="hljs-built_in">continue</span> connecting (<span class="hljs-built_in">yes</span>/no)? <span class="hljs-built_in">yes</span>     <span class="hljs-comment">#输入yes</span><br>Warning: Permanently added <span class="hljs-string">&#x27;192.168.124.14&#x27;</span> (ECDSA) to the list of known hosts.<br>root@192.168.124.14<span class="hljs-string">&#x27;s password:        #输入被控主机的root密钥</span><br><span class="hljs-string">authorized_keys                                                                                        100%  395   212.5KB/s   00:00    </span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">#现在我们来尝试以下是否可以在主控端远程免密钥登录两台被控主机</span><br><span class="hljs-string">[root@C7 ~]# ssh 192.168.124.13</span><br><span class="hljs-string">Last login: Tue Jun  2 17:19:57 2020 from 192.168.124.5</span><br><span class="hljs-string">[root@C7-3 ~]# exit</span><br><span class="hljs-string">logout</span><br><span class="hljs-string">Connection to 192.168.124.13 closed.</span><br><span class="hljs-string"></span><br><span class="hljs-string">[root@C7 ~]# ssh 192.168.124.14</span><br><span class="hljs-string">Last login: Tue Jun  2 16:14:35 2020 from 192.168.124.1</span><br><span class="hljs-string">[root@C7-4 ~]# exit</span><br><span class="hljs-string">logout</span><br><span class="hljs-string">Connection to 192.168.124.14 closed.</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#如果你觉得输入主机IP 进行远程连接过于麻烦，你可以在主控端的 /etc/hosts 文件中配置IP解析</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/hosts</span><br>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4<br>::1         localhost localhost.localdomain localhost6 localhost6.localdomain6<br><span class="hljs-comment">#追加以下两行就行了</span><br>192.168.124.13 C7-3<br>192.168.124.14 C7-4<br><br>[root@C7 ~]<span class="hljs-comment"># ssh C7-3</span><br>The authenticity of host <span class="hljs-string">&#x27;c7-3 (192.168.124.13)&#x27;</span> can<span class="hljs-string">&#x27;t be established.</span><br><span class="hljs-string">ECDSA key fingerprint is SHA256:Qqm+M0hyyYv59HC4ibs/tKiKpM4TIO7HqrZmDJoGWrs.</span><br><span class="hljs-string">ECDSA key fingerprint is MD5:66:0c:de:ae:d5:6a:99:77:2f:f3:f0:20:a7:73:30:1a.</span><br><span class="hljs-string">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="hljs-string">Warning: Permanently added &#x27;</span>c7-3<span class="hljs-string">&#x27; (ECDSA) to the list of known hosts.</span><br><span class="hljs-string">Last login: Tue Jun  2 17:32:53 2020 from 192.168.124.5</span><br><span class="hljs-string">[root@C7-3 ~]# exit</span><br><span class="hljs-string">logout</span><br><span class="hljs-string">Connection to c7-3 closed.</span><br><span class="hljs-string"></span><br><span class="hljs-string">[root@C7 ~]# ssh C7-4</span><br><span class="hljs-string">The authenticity of host &#x27;</span>c7-4 (192.168.124.14)<span class="hljs-string">&#x27; can&#x27;</span>t be established.<br>ECDSA key fingerprint is SHA256:Qqm+M0hyyYv59HC4ibs/tKiKpM4TIO7HqrZmDJoGWrs.<br>ECDSA key fingerprint is MD5:66:0c:de:ae:d5:6a:99:77:2f:f3:f0:20:a7:73:30:1a.<br>Are you sure you want to <span class="hljs-built_in">continue</span> connecting (<span class="hljs-built_in">yes</span>/no)? <span class="hljs-built_in">yes</span><br>Warning: Permanently added <span class="hljs-string">&#x27;c7-4&#x27;</span> (ECDSA) to the list of known hosts.<br>Last login: Tue Jun  2 17:33:05 2020 from 192.168.124.5<br>[root@C7-4 ~]<span class="hljs-comment"># exit</span><br><span class="hljs-built_in">logout</span><br>Connection to c7-4 closed.<br><br><br><span class="hljs-comment">#觉得手动操作有些不够逼格呢？这里提供参考脚本</span><br><span class="hljs-comment">#利用 sshpass 批量实现基于 key 验证</span><br><span class="hljs-comment">#!/bin/bash</span><br>ssh-keygen -f /root/.ssh/id_rsa  -P <span class="hljs-string">&#x27;&#x27;</span><br>NET=192.168.124<br><span class="hljs-built_in">export</span> SSHPASS=linux<br><span class="hljs-keyword">for</span> IP <span class="hljs-keyword">in</span> &#123;10..20&#125;; <span class="hljs-keyword">do</span><br>    sshpass -e ssh-copy-id  <span class="hljs-variable">$&#123;NET&#125;</span>.<span class="hljs-variable">$&#123;IP&#125;</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><p><strong><code>建议从此刻状态对所有主机创建虚拟机快照</code></strong></p><hr><h1 id="实验开始"><a href="#实验开始" class="headerlink" title="实验开始"></a>实验开始</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#终于可以配置ansible了，前期工作基本就是这些</span><br><span class="hljs-comment">#ansible有三个重要的文件，在yum安装下文件默认在：/etc/ansible/ 下</span><br>[root@C7 ~]<span class="hljs-comment"># ls /etc/ansible/</span><br>ansible.cfg  hosts  roles<br><br><span class="hljs-comment">#ansible.cfg 毫无疑问这是ansible的主配置文件</span><br><span class="hljs-comment">#hosts 远程控制主机清单</span><br><span class="hljs-comment">#roles 存放角色的目录</span><br><br><span class="hljs-comment">#配置hosts文件</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/hosts </span><br><span class="hljs-comment">#随便找个位置写即可</span><br><br>[srvs]    <span class="hljs-comment"># []中的英文尽量写的好记一点，因为后面的终端中要输入</span><br>192.168.124.13    <span class="hljs-comment">#被控主机IP</span><br>192.168.124.14    <span class="hljs-comment">#被控主机IP</span><br><br><span class="hljs-comment">#查看被ansible管理的所有主机列表</span><br>[root@C7 ~]<span class="hljs-comment"># ansible srvs --list</span><br>  hosts (2):<br>    192.168.124.13<br>    192.168.124.14<br><br><span class="hljs-comment">#测试一下被管理的主机能否ping通</span><br>[root@C7 ~]<span class="hljs-comment"># ansible all -m ping</span><br>192.168.124.14 | SUCCESS =&gt; &#123;<br>    <span class="hljs-string">&quot;ansible_facts&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;discovered_interpreter_python&quot;</span>: <span class="hljs-string">&quot;/usr/bin/python&quot;</span><br>    &#125;, <br>    <span class="hljs-string">&quot;changed&quot;</span>: <span class="hljs-literal">false</span>, <br>    <span class="hljs-string">&quot;ping&quot;</span>: <span class="hljs-string">&quot;pong&quot;</span><br>&#125;<br>192.168.124.13 | SUCCESS =&gt; &#123;<br>    <span class="hljs-string">&quot;ansible_facts&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;discovered_interpreter_python&quot;</span>: <span class="hljs-string">&quot;/usr/bin/python&quot;</span><br>    &#125;, <br>    <span class="hljs-string">&quot;changed&quot;</span>: <span class="hljs-literal">false</span>, <br>    <span class="hljs-string">&quot;ping&quot;</span>: <span class="hljs-string">&quot;pong&quot;</span><br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#你是否想过：倘若这里管理的主机多达100台，是否我就必须写100行主机IP呢？</span><br><span class="hljs-comment">#当然不必如此，对于被管理主机非常多的情况下，我们有另一种写法</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/hosts </span><br><span class="hljs-comment">#将前面两台主机IP注释掉，添加新行</span><br><br>[srvs]<br><span class="hljs-comment">#192.168.124.13    #被控主机IP</span><br><span class="hljs-comment">#192.168.124.14    #被控主机IP</span><br>192.168.124.[10:20]    <span class="hljs-comment">#表示10到20的主机IP</span><br><br><span class="hljs-comment">#重新查看被ansible管理的所有主机列表</span><br>[root@C7 ~]<span class="hljs-comment"># ansible srvs --list</span><br>  hosts (11):<br>    192.168.124.10<br>    192.168.124.11<br>…………..<span class="hljs-comment">#省略不写</span><br>    192.168.124.19<br>    192.168.124.20<br><br><span class="hljs-comment">#当然，我这里仅部署了两台被控主机，若此时测试所有主机能否ping通，其余18台主机是不通的</span><br><span class="hljs-comment">#不仅这些主机ping不通，其ping的过程也并不是按照主机IP顺序进行的</span><br>[root@C7 ~]<span class="hljs-comment"># ansible all -m ping</span><br>192.168.124.10 | UNREACHABLE! =&gt; &#123;<br>    <span class="hljs-string">&quot;changed&quot;</span>: <span class="hljs-literal">false</span>, <br>    <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;Failed to connect to the host via ssh: ssh: connect to host 192.168.124.10 port 22: Connection refused&quot;</span>, <br>    <span class="hljs-string">&quot;unreachable&quot;</span>: <span class="hljs-literal">true</span><br>&#125;<br>192.168.124.14 | SUCCESS =&gt; &#123;<br>    <span class="hljs-string">&quot;ansible_facts&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;discovered_interpreter_python&quot;</span>: <span class="hljs-string">&quot;/usr/bin/python&quot;</span><br>    &#125;, <br>    <span class="hljs-string">&quot;changed&quot;</span>: <span class="hljs-literal">false</span>, <br>    <span class="hljs-string">&quot;ping&quot;</span>: <span class="hljs-string">&quot;pong&quot;</span><br>&#125;<br>192.168.124.13 | SUCCESS =&gt; &#123;<br>    <span class="hljs-string">&quot;ansible_facts&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;discovered_interpreter_python&quot;</span>: <span class="hljs-string">&quot;/usr/bin/python&quot;</span><br>    &#125;, <br>    <span class="hljs-string">&quot;changed&quot;</span>: <span class="hljs-literal">false</span>, <br>    <span class="hljs-string">&quot;ping&quot;</span>: <span class="hljs-string">&quot;pong&quot;</span><br>&#125;<br>192.168.124.11 | UNREACHABLE! =&gt; &#123;<br>    <span class="hljs-string">&quot;changed&quot;</span>: <span class="hljs-literal">false</span>, <br>    <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;Failed to connect to the host via ssh: ssh: connect to host 192.168.124.11 port 22: No route to host&quot;</span>, <br>    <span class="hljs-string">&quot;unreachable&quot;</span>: <span class="hljs-literal">true</span><br>&#125;<br><br><span class="hljs-comment">#为了试验正常进行，还是把hosts主机清单改回来吧</span><br></code></pre></td></tr></table></figure><hr><h2 id="ansible中拥有非常多的模块，通过这些模块能够帮助我们完成及减少工作当中一些繁琐重复的内容-例举ansible常用模块：篇幅有限这里仅做例举而不进行详细说明Command-模块；Shell-模块；Script-模块；Copy-模块；Fetch-模块；File-模；unarchive-模块；Archive-模块；Hostname-模块；Cron-模块；Yum-模块；Service-模块；User-模块；Group-模块；Setup-模块；-倘若你对这些如此多的模块感到非常迷茫，那么使用ansible-doc是个办法-其作用是ansible-doc-指定模块-查看该模块的帮助信息"><a href="#ansible中拥有非常多的模块，通过这些模块能够帮助我们完成及减少工作当中一些繁琐重复的内容-例举ansible常用模块：篇幅有限这里仅做例举而不进行详细说明Command-模块；Shell-模块；Script-模块；Copy-模块；Fetch-模块；File-模；unarchive-模块；Archive-模块；Hostname-模块；Cron-模块；Yum-模块；Service-模块；User-模块；Group-模块；Setup-模块；-倘若你对这些如此多的模块感到非常迷茫，那么使用ansible-doc是个办法-其作用是ansible-doc-指定模块-查看该模块的帮助信息" class="headerlink" title="#ansible中拥有非常多的模块，通过这些模块能够帮助我们完成及减少工作当中一些繁琐重复的内容#例举ansible常用模块：篇幅有限这里仅做例举而不进行详细说明Command 模块；Shell 模块；Script 模块；Copy 模块；Fetch 模块；File 模；unarchive 模块；Archive 模块；Hostname 模块；Cron 模块；Yum 模块；Service 模块；User 模块；Group 模块；Setup 模块；#倘若你对这些如此多的模块感到非常迷茫，那么使用ansible-doc是个办法#其作用是ansible-doc +指定模块 查看该模块的帮助信息"></a>#ansible中拥有非常多的模块，通过这些模块能够帮助我们完成及减少工作当中一些繁琐重复的内容<br>#例举ansible常用模块：篇幅有限这里仅做例举而不进行详细说明<br>Command 模块；Shell 模块；Script 模块；Copy 模块；Fetch 模块；File 模；<br>unarchive 模块；Archive 模块；Hostname 模块；Cron 模块；Yum 模块；<br>Service 模块；User 模块；Group 模块；Setup 模块；<br>#倘若你对这些如此多的模块感到非常迷茫，那么使用ansible-doc是个办法<br>#其作用是ansible-doc +指定模块 查看该模块的帮助信息<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#例如yum模块</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-doc yum</span><br>&gt; YUM    (/usr/lib/python2.7/site-packages/ansible/modules/packaging/os/yum.py)<br><br>        Installs, upgrade, downgrades, removes, and lists packages and <span class="hljs-built_in">groups</span> with the `yum‘ package<br>        manager. This module only works on Python 2. If you require Python 3 support see the [dnf]<br>        module.<br><br>  * This module is maintained by The Ansible Core Team<br>  * note: This module has a corresponding action plugin.<br>………<br><br><span class="hljs-comment">#若后面跟 --list 或 -l 则可以查看所有支持的ansible模块</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-doc --list</span><br>fortios_router_community_list                                 Configure community lists <span class="hljs-keyword">in</span> Fortinet<span class="hljs-string">&#x27;s FortiOS and FortiGate    </span><br><span class="hljs-string">azure_rm_devtestlab_info                                      Get Azure DevTest Lab facts  </span><br><span class="hljs-string">……….</span><br></code></pre></td></tr></table></figure></h2><h1 id="剧本"><a href="#剧本" class="headerlink" title="剧本"></a>剧本</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#ansible中有一个非常重要的组成部分，那就是Playbook（剧本）</span><br><span class="hljs-comment">#通过剧本我们可以实现一次同时部署多台主机</span><br><span class="hljs-comment">#playbook由YAML语法构成，文件首行固定为 ---，且对缩进有严格要求，敏感大小写</span><br><span class="hljs-comment">#一个完整的代码块最少包括name和task，且一个name只能包含一个task</span><br><span class="hljs-comment">#YAML文件扩展名通常为yml或yaml</span><br><br><span class="hljs-comment">#尝试编写一个简单的剧本</span><br>[root@C7 ~]<span class="hljs-comment"># mkdir /etc/ansible/roles/playbook</span><br>[root@C7 ~]<span class="hljs-comment"># vim !$/hi.yml</span><br>---<br>- hosts: srvs<br>  tasks:<br>    - name: <span class="hljs-built_in">test</span><br>      shell: /bin/echo <span class="hljs-string">&quot;Hi,I&#x27;m `who am i`&quot;</span> &gt; /data/hi.txt<br><br><span class="hljs-comment">#编辑结束应进行运行测试，是否有语法错误</span><br><span class="hljs-comment">#俗称干跑，而不进行实际操作</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook --check -C /etc/ansible/roles/playbook/hi.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [<span class="hljs-built_in">test</span>] ************************************************************************************************************************<br>skipping: [192.168.124.13]<br>skipping: [192.168.124.14]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=1    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   <br>192.168.124.14             : ok=1    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   <br><br><span class="hljs-comment">#现在进行真正执行操作</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook /etc/ansible/roles/playbook/hi.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [<span class="hljs-built_in">test</span>] ************************************************************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#执行完，我们是否可以在本机查看远程被控主机的文件内容呢？</span><br>[root@C7 ~]<span class="hljs-comment"># ansible all -a &quot;cat /data/hi.txt&quot;</span><br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>Hi,I<span class="hljs-string">&#x27;m root     pts/3        2020-06-03 09:23 (192.168.124.5)</span><br><span class="hljs-string">192.168.124.13 | CHANGED | rc=0 &gt;&gt;</span><br><span class="hljs-string">Hi,I&#x27;</span>m root     pts/3        2020-06-03 09:23 (192.168.124.5)<br><br><span class="hljs-comment">#很明显可以直接看到内容，那么如果我只想在某一台主机上执行刚才的yml文件呢？</span><br><span class="hljs-comment">#略微修改一下之前的yml文件内容以作区分</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/hi.yml</span><br>---<br>- hosts: srvs<br>  tasks:<br>    - name: <span class="hljs-built_in">test</span><br>      shell: /bin/echo <span class="hljs-string">&quot;You can see !&quot;</span> &gt; /data/see.txt<br><br><br><span class="hljs-comment">#这次我就不干跑测试了，直接运行</span><br><span class="hljs-comment">#这次我们只对C7-3主机执行操作</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook --limit 192.168.124.13 /etc/ansible/roles/playbook/hi.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br><br>TASK [<span class="hljs-built_in">test</span>] ************************************************************************************************************************<br>changed: [192.168.124.13]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><span class="hljs-comment">#查看执行后，远程主机C7-3上的文件内容</span><br><span class="hljs-comment">#注意，命令参数有顺序要求</span><br>[root@C7 ~]<span class="hljs-comment"># ansible -a 192.168.124.13 &quot;cat /data/see.txt&quot;</span><br>[WARNING]: Could not match supplied host pattern, ignoring: <span class="hljs-built_in">cat</span><br>[WARNING]: Could not match supplied host pattern, ignoring: /data/see.txt<br>[WARNING]: No hosts matched, nothing to <span class="hljs-keyword">do</span><br><br>[root@C7 ~]<span class="hljs-comment"># ansible 192.168.124.13 -a &quot;cat /data/see.txt&quot;</span><br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>You can see !<br><br><span class="hljs-comment">#很显然我只是把 -a参数写在了前面，但这样会导致命令执行失败</span><br></code></pre></td></tr></table></figure><hr><h1 id="部署httpd"><a href="#部署httpd" class="headerlink" title="部署httpd"></a>部署httpd</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#让我们更近一步，尝试使用ansible-playbook 来完成远程主机的httpd服务的部署</span><br><span class="hljs-comment">#在部署远程主机httpd服务之前，首先我们要在主控端安装httpd</span><br><br>[root@C7 ~]<span class="hljs-comment"># yum -y install httpd</span><br>[root@C7 ~]<span class="hljs-comment"># cp /etc/httpd/conf/httpd.conf /etc/ansible/roles/playbook/</span><br><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/index.html</span><br>If you can see,that‘s good!<br><br><br><span class="hljs-comment">#编写httpd_install.yml  playbook脚本</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/httpd_install.yml</span><br>---<br>- hosts: srvs<br>  remote_user: root<br>  tasks:<br>    - name: install httpd<br>      yum: name=httpd<br>    - name: config httpd service<br>      copy: src=/etc/ansible/roles/playbook/httpd.conf dest=/etc/httpd/conf/httpd.conf<br>    - name: copy default index.html<br>      copy: src=/etc/ansible/roles/playbook/index.html dest=/usr/share/httpd/noindex/index.html<br>    - name: manage httpd service<br>      service: name=httpd state=started enabled=<span class="hljs-built_in">yes</span><br><br><span class="hljs-comment">#在C7-3主机上进行干跑测试</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook --check --limit 192.168.124.13 -C /etc/ansible/roles/playbook/httpd_install.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br><br>TASK [install httpd] ***************************************************************************************************************<br>ok: [192.168.124.13]<br><br>TASK [config httpd service] ********************************************************************************************************<br>ok: [192.168.124.13]<br><br>TASK [copy default index.html] *****************************************************************************************************<br>changed: [192.168.124.13]<br><br>TASK [manage httpd service] ********************************************************************************************************<br>changed: [192.168.124.13]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=5    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br><br><span class="hljs-comment">#显示无报错，在C7-3被控主机真正运行操作</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook --limit 192.168.124.13 /etc/ansible/roles/playbook/httpd_install.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br><br>TASK [install httpd] ***************************************************************************************************************<br>ok: [192.168.124.13]<br><br>TASK [config httpd service] ********************************************************************************************************<br>ok: [192.168.124.13]<br><br>TASK [copy default index.html] *****************************************************************************************************<br>changed: [192.168.124.13]<br><br>TASK [manage httpd service] ********************************************************************************************************<br>changed: [192.168.124.13]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=5    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br><span class="hljs-comment">#访问C7-3 httpd页面</span><br>[root@C7 ~]<span class="hljs-comment"># curl 192.168.124.13:80</span><br>If you can see,that<span class="hljs-string">&#x27;s good!</span><br><span class="hljs-string"></span><br><span class="hljs-string">#查看C7-3 httpd监听端口</span><br><span class="hljs-string">[root@C7 ~]# ansible 192.168.124.13 -a &quot;ss -ntul&quot;</span><br><span class="hljs-string">192.168.124.13 | CHANGED | rc=0 &gt;&gt;</span><br><span class="hljs-string">Netid  State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              </span><br><span class="hljs-string">udp    UNCONN     0      0      127.0.0.1:323                   *:*                  </span><br><span class="hljs-string">udp    UNCONN     0      0         [::1]:323                [::]:*                  </span><br><span class="hljs-string">tcp    LISTEN     0      100    127.0.0.1:25                    *:*                  </span><br><span class="hljs-string">tcp    LISTEN     0      128       *:80                    *:*                  </span><br><span class="hljs-string">tcp    LISTEN     0      128       *:22                    *:*                  </span><br><span class="hljs-string">tcp    LISTEN     0      100       [::1]:25                 [::]:*                  </span><br><span class="hljs-string">tcp    LISTEN     0      128    [::]:22                 [::]:*                  </span><br><span class="hljs-string"></span><br><span class="hljs-string">#查看所有主机 httpd监听端口使用 ansible all -a &quot;ss -ntul&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#编写notify 和handlers 实现修改配置文件后触发httpd 服务重启</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/httpd_install.yml</span><br>---<br>- hosts: srvs<br>  remote_user: root<br>  tasks:<br>    - name: install httpd<br>      yum: name=httpd<br>    - name: config httpd service<br>      copy: src=/etc/ansible/roles/playbook/httpd.conf dest=/etc/httpd/conf/httpd.conf<br>      notify: restart httpd service        <span class="hljs-comment">#新行</span><br>    - name: copy default index.html<br>      copy: src=/etc/ansible/roles/playbook/index.html dest=/usr/share/httpd/noindex/index.html<br>    - name: manage httpd service<br>      service: name=httpd state=started enabled=<span class="hljs-built_in">yes</span><br>  handlers:                                <span class="hljs-comment">#新行</span><br>    - name: restart httpd service          <span class="hljs-comment">#新行</span><br>      service: name=httpd state=restarted  <span class="hljs-comment">#新行</span><br><br><span class="hljs-comment">#顺便把httpd 服务端口改了</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/httpd.conf</span><br><span class="hljs-comment">#Listen 80</span><br>Listen 88<br><br><span class="hljs-comment">#任何时候都不要忘记测试</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook --check -C /etc/ansible/roles/playbook/httpd_install.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [install httpd] ***************************************************************************************************************<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [config httpd service] ********************************************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>TASK [copy default index.html] *****************************************************************************************************<br>changed: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [manage httpd service] ********************************************************************************************************<br>changed: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>RUNNING HANDLER [restart httpd service] ********************************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=6    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=6    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br><span class="hljs-comment">#测试无误后，在所有被控主机上执行操作</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook /etc/ansible/roles/playbook/httpd_install.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [install httpd] ***************************************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [config httpd service] ********************************************************************************************************<br>changed: [192.168.124.14]<br>changed: [192.168.124.13]<br><br>TASK [copy default index.html] *****************************************************************************************************<br>changed: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [manage httpd service] ********************************************************************************************************<br>ok: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>RUNNING HANDLER [restart httpd service] ********************************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=6    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=6    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><span class="hljs-comment">#访问两台被控主机httpd 页面</span><br>[root@C7 ~]<span class="hljs-comment"># curl C7-3:88</span><br>If you can see,that<span class="hljs-string">&#x27;s good!</span><br><span class="hljs-string">[root@C7 ~]# curl C7-4:88</span><br><span class="hljs-string">If you can see,that&#x27;</span>s good!<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment">#除了可以这样执行之外，我们还可以利用ansible-playbook仅执行指定的tags任务</span><br><span class="hljs-comment">#给指定的tasks打标签，以供调用</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/httpd_install.yml </span><br>---<br>- hosts: srvs<br>  remote_user: root<br>  tasks:<br>    - name: install httpd<br>      yum: name=httpd<br>    - name: config httpd service<br>      copy: src=/etc/ansible/roles/playbook/httpd.conf dest=/etc/httpd/conf/httpd.conf<br>      notify: restart httpd service        <br>      tags: config                         <span class="hljs-comment">#新行</span><br>    - name: copy default index.html<br>      copy: src=/etc/ansible/roles/playbook/index.html dest=/usr/share/httpd/noindex/index.html<br>    - name: manage httpd service<br>      service: name=httpd state=started enabled=<span class="hljs-built_in">yes</span><br>  handlers:                                <br>    - name: restart httpd service          <br>      service: name=httpd state=restarted  <br><br><span class="hljs-comment">#修改httpd 端口</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/httpd.conf</span><br><span class="hljs-comment">#Listen 80</span><br>Listen 8888<br><br><span class="hljs-comment">#列出playbook中所有的tags</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook --list-tags /etc/ansible/roles/playbook/httpd_install.yml </span><br><br>playbook: /etc/ansible/roles/playbook/httpd_install.yml<br><br>  play <span class="hljs-comment">#1 (srvs): srvsTAGS: []</span><br>      TASK TAGS: [config]<br><br><span class="hljs-comment">#用ansible-playbook 仅执行指定的tags 任务</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook -t config /etc/ansible/roles/playbook/httpd_install.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [config httpd service] ********************************************************************************************************<br>changed: [192.168.124.14]<br>changed: [192.168.124.13]<br><br>RUNNING HANDLER [restart httpd service] ********************************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br><span class="hljs-comment">#查看远程被控主机httpd 监听端口</span><br>[root@C7 ~]<span class="hljs-comment"># ansible all -a &quot;ss -ntul&quot;</span><br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>Netid  State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              <br>udp    UNCONN     0      0      127.0.0.1:323                   *:*                  <br>udp    UNCONN     0      0         [::1]:323                [::]:*                  <br>tcp    LISTEN     0      100    127.0.0.1:25                    *:*                  <br>tcp    LISTEN     0      128       *:22                    *:*                  <br>tcp    LISTEN     0      128    [::]:8888               [::]:*                  <br>tcp    LISTEN     0      100       [::1]:25                 [::]:*                  <br>tcp    LISTEN     0      128    [::]:22                 [::]:*                  <br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>Netid  State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              <br>udp    UNCONN     0      0      127.0.0.1:323                   *:*                  <br>udp    UNCONN     0      0         [::1]:323                [::]:*                  <br>tcp    LISTEN     0      128       *:8888                  *:*                  <br>tcp    LISTEN     0      100    127.0.0.1:25                    *:*                  <br>tcp    LISTEN     0      128       *:22                    *:*                  <br>tcp    LISTEN     0      100       [::1]:25                 [::]:*                  <br>tcp    LISTEN     0      128    [::]:22                 [::]:*                  <br><br><span class="hljs-comment">#访问</span><br>[root@C7 ~]<span class="hljs-comment"># curl C7-3:8888</span><br>If you can see,that<span class="hljs-string">&#x27;s good!</span><br><span class="hljs-string">[root@C7 ~]# curl C7-4:8888</span><br><span class="hljs-string">If you can see,that&#x27;</span>s good!<br></code></pre></td></tr></table></figure><hr><h1 id="变量使用"><a href="#变量使用" class="headerlink" title="变量使用"></a>变量使用</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#接下来，让我们初步了解ansible-playbook的变量如何使用</span><br><span class="hljs-comment">#变量仅由字母、数字和下划线组成，且只能以数字开头</span><br><span class="hljs-comment">#变量可在/etc/ansible/hosts 中定义，或者在独立的变量YAML文件中定义</span><br><span class="hljs-comment">#变量调用方式：通过 &#123;&#123; variable_name &#125;&#125; 调用变量，且变量名前后必须有空格</span><br><span class="hljs-comment">#有时用 &quot;&#123;&#123; variable_name &#125;&#125;&quot; 才会生效</span><br><br><span class="hljs-comment">#实际应用一下，编写一个简单的yml文件测试</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/vartest.yml</span><br>---<br>- hosts: srvs<br>  tasks:<br>    - name: playbook var <span class="hljs-built_in">test</span><br>      shell: /bin/echo <span class="hljs-string">&quot;laowang is pig &#123;&#123; ansible_distribution_major_version &#125;&#125;&quot;</span> &gt; /data/vartest.txt<br><br><span class="hljs-comment">#日常测试干跑</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook -C /etc/ansible/roles/playbook/vartest.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [playbook var <span class="hljs-built_in">test</span>] ***********************************************************************************************************<br>skipping: [192.168.124.13]<br>skipping: [192.168.124.14]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=1    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   <br>192.168.124.14             : ok=1    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   <br><br><br><span class="hljs-comment">#测试无误，进行执行</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook /etc/ansible/roles/playbook/vartest.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [playbook var <span class="hljs-built_in">test</span>] ***********************************************************************************************************<br>changed: [192.168.124.14]<br>changed: [192.168.124.13]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br><span class="hljs-comment">#查看远程被控主机文件内容</span><br>[root@C7 ~]<span class="hljs-comment"># ansible all -a &quot;cat /data/vartest.txt&quot;</span><br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>laowang is pig 7<br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>laowang is pig 7<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment">#除了使用setup 模块提供的远程主机变量还可以在ansible 的hosts 文件中自定义变量</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/hosts </span><br>[srvs]    <span class="hljs-comment"># []中的英文尽量写的好记一点</span><br>192.168.124.13    name=zhangsan course=linux <span class="hljs-comment">#被控主机IP</span><br>192.168.124.14    name=lisi course=centos <span class="hljs-comment">#被控主机IP</span><br><br><span class="hljs-comment">#修改之前的yml文件</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/vartest.yml</span><br>---<br>- hosts: srvs<br>  tasks:<br>    - name: playbook var <span class="hljs-built_in">test</span><br>      shell: /bin/echo <span class="hljs-string">&quot;Hi,my name is &#123;&#123; name &#125;&#125;,and I like study &#123;&#123; course &#125;&#125;.&quot;</span> &gt; /data/vartest.txt<br><br><span class="hljs-comment">#日常测试干跑</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook -C /etc/ansible/roles/playbook/vartest.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [playbook var <span class="hljs-built_in">test</span>] ***********************************************************************************************************<br>skipping: [192.168.124.14]<br>skipping: [192.168.124.13]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=1    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   <br>192.168.124.14             : ok=1    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   <br><br><span class="hljs-comment">#运行</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook /etc/ansible/roles/playbook/vartest.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [playbook var <span class="hljs-built_in">test</span>] ***********************************************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=2    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><span class="hljs-comment">#查看</span><br>[root@C7 ~]<span class="hljs-comment"># ansible all -a &quot;cat /data/vartest.txt&quot;</span><br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>Hi,my name is lisi,and I like study centos.<br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>Hi,my name is zhangsan,and I like study linux.<br><br><br><span class="hljs-comment">#尝试在playbook文件中直接定义变量使用</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/useradd.yml </span><br>---<br>- hosts: srvs<br>  vars:<br>    - username: zhangsan<br>    - usergroup: studylinux<br>  tasks:<br>    - name: create group<br>      group: name=&#123;&#123; usergroup &#125;&#125; state=present<br>    - name: create user<br>      user: name=&#123;&#123; username &#125;&#125; group=&#123;&#123; usergroup &#125;&#125; state=present<br><br><span class="hljs-comment">#测试干跑</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook -C /etc/ansible/roles/playbook/useradd.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [create group] ****************************************************************************************************************<br>changed: [192.168.124.14]<br>changed: [192.168.124.13]<br><br>TASK [create user] *****************************************************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br><span class="hljs-comment">#运行</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook /etc/ansible/roles/playbook/useradd.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [create group] ****************************************************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>TASK [create user] *****************************************************************************************************************<br>changed: [192.168.124.14]<br>changed: [192.168.124.13]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><span class="hljs-comment">#查看远程被控主机中 zhangsan 的用户信息</span><br>[root@C7 ~]<span class="hljs-comment"># ansible all -a &quot;id zhangsan&quot;</span><br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>uid=1001(zhangsan) gid=1001(studylinux) <span class="hljs-built_in">groups</span>=1001(studylinux)<br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>uid=1001(zhangsan) gid=1001(studylinux) <span class="hljs-built_in">groups</span>=1001(studylinux)<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment">#当我们不断的定义变量，随着时间累积其数量将会变得愈来愈多，编辑和管理也随着变得繁琐</span><br><span class="hljs-comment">#因此，我们可以单独创建定义变量的yml文件，再在playbook中引用即可</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/vars.yml</span><br>usergroup: teachers<br>username: lisi<br><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/useradd.yml </span><br>---<br>- hosts: srvs<br>  vars_files:    <span class="hljs-comment">#新行</span><br>    - vars.yml   <span class="hljs-comment">#新行</span><br><span class="hljs-comment">#  vars:</span><br><span class="hljs-comment">#    - username: zhangsan</span><br><span class="hljs-comment">#    - usergroup: studylinux</span><br>  tasks:<br>    - name: create group<br>      group: name=&#123;&#123; usergroup &#125;&#125; state=present<br>    - name: create user<br>      user: name=&#123;&#123; username &#125;&#125; group=&#123;&#123; usergroup &#125;&#125; state=present<br><br><br><span class="hljs-comment">#测试干跑</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook -C /etc/ansible/roles/playbook/useradd.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [create group] ****************************************************************************************************************<br>changed: [192.168.124.14]<br>changed: [192.168.124.13]<br><br>TASK [create user] *****************************************************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br><span class="hljs-comment">#运行</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook /etc/ansible/roles/playbook/useradd.yml </span><br><br>PLAY [srvs] *************************************************************************************************************************<br><br>TASK [Gathering Facts] *************************************************************************************************************<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [create group] ****************************************************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>TASK [create user] *****************************************************************************************************************<br>changed: [192.168.124.14]<br>changed: [192.168.124.13]<br><br>PLAY RECAP *************************************************************************************************************************<br>192.168.124.13             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br>查看远程被控主机中 lisi 的用户信息<br>[root@C7 ~]<span class="hljs-comment"># ansible all -a &quot;id lisi&quot;</span><br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>uid=1002(lisi) gid=1002(teachers) <span class="hljs-built_in">groups</span>=1002(teachers)<br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>uid=1002(lisi) gid=1002(teachers) <span class="hljs-built_in">groups</span>=1002(teachers)<br></code></pre></td></tr></table></figure><hr><h1 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h1><h2 id="除此之外，我们还可以在ansible-playbook中使用条件判断when-为了展示实验效果，我们临时添加一台虚拟机主机版本-主-x2F-被-主机IP-主机名-——-——-——-——-CentOS-6-被控端-192-168-124-20-C6"><a href="#除此之外，我们还可以在ansible-playbook中使用条件判断when-为了展示实验效果，我们临时添加一台虚拟机主机版本-主-x2F-被-主机IP-主机名-——-——-——-——-CentOS-6-被控端-192-168-124-20-C6" class="headerlink" title="#除此之外，我们还可以在ansible-playbook中使用条件判断when#为了展示实验效果，我们临时添加一台虚拟机主机版本 | 主&#x2F;被  | 主机IP  |  主机名  |——- | ——  | ——- | ——- ||CentOS 6|被控端|192.168.124.20|C6|"></a>#除此之外，我们还可以在ansible-playbook中使用条件判断when<br>#为了展示实验效果，我们临时添加一台虚拟机<br>主机版本 | 主&#x2F;被  | 主机IP  |  主机名  |<br>——- | ——  | ——- | ——- |<br>|CentOS 6|被控端|192.168.124.20|C6|<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#将免密验证执行完成</span><br>[root@C7 ~]<span class="hljs-comment"># scp /root/.ssh/authorized_keys 192.168.124.20:/root/.ssh/</span><br>root@192.168.124.20‘s password: <br>authorized_keys                                           100%  395   229.9KB/s   00:00    <br>[root@C7 ~]<span class="hljs-comment"># ssh 192.168.124.20</span><br>Last login: Mon Mar 30 08:49:10 2020 from 192.168.124.1<br>[root@C6 ~]<span class="hljs-comment"># exit</span><br><span class="hljs-built_in">logout</span><br>Connection to 192.168.124.20 closed.<br><br><span class="hljs-comment">#添加hosts被控主机清单</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/hosts</span><br>[srvs]<br>192.168.124.13    <br>192.168.124.14    <br>192.168.124.20    <span class="hljs-comment">#新行</span><br><br><span class="hljs-comment">#查看一下，确实已被添加进去</span><br>[root@C7 ~]<span class="hljs-comment"># ansible all --list</span><br>  hosts (3):<br>    192.168.124.13<br>    192.168.124.14<br>    192.168.124.20<br><br><span class="hljs-comment">#编写yml文件</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/dbserver.yml</span><br>---<br>- hosts: srvs<br>  remote_user: root<br>  tasks:<br>    - name: Install DBserver software <span class="hljs-keyword">in</span> CentOS6<br>      yum: name=mysql-server<br>      when: ansible_distribution_major_version==<span class="hljs-string">&quot;6&quot;</span><br>    - name: Install DBserver software <span class="hljs-keyword">in</span> CentOS7<br>      yum: name=mariadb-server<br>      when: ansible_distribution_major_version==<span class="hljs-string">&quot;7&quot;</span><br><br><span class="hljs-comment">#测试</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook -C /etc/ansible/roles/playbook/dbserver.yml </span><br><br>PLAY [srvs] ********************************************************************************<br><br>TASK [Gathering Facts] *********************************************************************<br>ok: [192.168.124.20]<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [Install DBserver software <span class="hljs-keyword">in</span> CentOS6] ************************************************<br>skipping: [192.168.124.14]<br>skipping: [192.168.124.13]<br>changed: [192.168.124.20]<br><br>TASK [Install DBserver software <span class="hljs-keyword">in</span> CentOS7] ************************************************<br>skipping: [192.168.124.20]<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>PLAY RECAP *********************************************************************************<br>192.168.124.13             : ok=2    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   <br>192.168.124.14             : ok=2    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   <br>192.168.124.20             : ok=2    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   <br><br><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook /etc/ansible/roles/playbook/dbserver.yml </span><br><br>PLAY [srvs] ********************************************************************************<br><br>TASK [Gathering Facts] *********************************************************************<br>ok: [192.168.124.20]<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [Install DBserver software <span class="hljs-keyword">in</span> CentOS6] ************************************************<br>skipping: [192.168.124.13]<br>skipping: [192.168.124.14]<br>fatal: [192.168.124.20]: FAILED! =&gt; &#123;<span class="hljs-string">&quot;changed&quot;</span>: <span class="hljs-literal">false</span>, <span class="hljs-string">&quot;changes&quot;</span>: &#123;<span class="hljs-string">&quot;installed&quot;</span>: [<span class="hljs-string">&quot;mysql-server&quot;</span>]&#125;, <br>……………………..<span class="hljs-comment">#报错</span><br>\nInstall       4 Package(s)\n\nTotal download size: 10 M\nInstalled size: 29 M\nDownloading Packages:\n<span class="hljs-string">&quot;]&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">TASK [Install DBserver software in CentOS7] ************************************************</span><br><span class="hljs-string">changed: [192.168.124.13]</span><br><span class="hljs-string">changed: [192.168.124.14]</span><br><span class="hljs-string"></span><br><span class="hljs-string">PLAY RECAP *********************************************************************************</span><br><span class="hljs-string">192.168.124.13             : ok=2    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   </span><br><span class="hljs-string">192.168.124.14             : ok=2    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   </span><br><span class="hljs-string">192.168.124.20             : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   </span><br></code></pre></td></tr></table></figure><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#CentOS6主机出现报错，经过我检查排错确认是由于该主机网关不通导致无法进行软件包安装</span><br><span class="hljs-comment">#解决方法：在CentOS6主机上添加网管并ping测试</span><br>[root@C6 ~]<span class="hljs-comment"># vim /etc/resolv.conf </span><br><span class="hljs-comment">#添加一条或多条</span><br>nameserver 192.168.124.10    <span class="hljs-comment">#此IP是我个人虚拟机的网关</span><br>nameserver 114.114.114.114    <span class="hljs-comment">#通用网关</span><br><br>[root@C6 ~]<span class="hljs-comment"># ping www.baidu.com</span><br>PING www.a.shifen.com (61.135.169.125) 56(84) bytes of data.<br>64 bytes from 61.135.169.125: icmp_seq=1 ttl=128 time=7.43 ms<br>64 bytes from 61.135.169.125: icmp_seq=2 ttl=128 time=6.12 ms<br>^C<br>--- www.a.shifen.com ping statistics ---<br>3 packets transmitted, 3 received, 0% packet loss, time 2715ms<br>rtt min/avg/max/mdev = 6.129/7.320/8.395/0.934 ms<br><br><br><span class="hljs-comment">#在主控端重新执行</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook /etc/ansible/roles/playbook/dbserver.yml </span><br><br>PLAY [srvs] ********************************************************************************<br><br>TASK [Gathering Facts] *********************************************************************<br>ok: [192.168.124.20]<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [Install DBserver software <span class="hljs-keyword">in</span> CentOS6] ************************************************<br>skipping: [192.168.124.13]<br>skipping: [192.168.124.14]<br>changed: [192.168.124.20]<br><br>TASK [Install DBserver software <span class="hljs-keyword">in</span> CentOS7] ************************************************<br>skipping: [192.168.124.20]<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>PLAY RECAP *********************************************************************************<br>192.168.124.13             : ok=2    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   <br>192.168.124.14             : ok=2    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   <br>192.168.124.20             : ok=2    changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   <br><br><br><span class="hljs-comment">#查看远程被控主机安装包信息，忽略WARNING警告信息</span><br>[root@C7 ~]<span class="hljs-comment"># ansible all -a &quot;rpm -q mariadb&quot;</span><br>[WARNING]: Consider using the yum, dnf or zypper module rather than running <span class="hljs-string">&#x27;rpm&#x27;</span>.  If you<br>need to use <span class="hljs-built_in">command</span> because yum, dnf or zypper is insufficient you can add <span class="hljs-string">&#x27;warn: false&#x27;</span> to<br>this <span class="hljs-built_in">command</span> task or <span class="hljs-built_in">set</span> <span class="hljs-string">&#x27;command_warnings=False&#x27;</span> <span class="hljs-keyword">in</span> ansible.cfg to get rid of this<br>message.<br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>mariadb-5.5.65-1.el7.x86_64<br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>mariadb-5.5.65-1.el7.x86_64<br>192.168.124.20 | FAILED | rc=1 &gt;&gt;<br>package mariadb is not installednon-zero <span class="hljs-built_in">return</span> code<br><br>[root@C7 ~]<span class="hljs-comment"># ansible all -a &quot;rpm -q mysql&quot;</span><br>[WARNING]: Consider using the yum, dnf or zypper module rather than running <span class="hljs-string">&#x27;rpm&#x27;</span>.  If you<br>need to use <span class="hljs-built_in">command</span> because yum, dnf or zypper is insufficient you can add <span class="hljs-string">&#x27;warn: false&#x27;</span> to<br>this <span class="hljs-built_in">command</span> task or <span class="hljs-built_in">set</span> <span class="hljs-string">&#x27;command_warnings=False&#x27;</span> <span class="hljs-keyword">in</span> ansible.cfg to get rid of this<br>message.<br>192.168.124.20 | CHANGED | rc=0 &gt;&gt;<br>mysql-5.1.73-8.el6_8.x86_64<br>192.168.124.13 | FAILED | rc=1 &gt;&gt;<br>package mysql is not installednon-zero <span class="hljs-built_in">return</span> code<br>192.168.124.14 | FAILED | rc=1 &gt;&gt;<br>package mysql is not installednon-zero <span class="hljs-built_in">return</span> code<br><br><span class="hljs-comment">#CentOS6的使命暂时结束，从hosts文件中移除</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/hosts</span><br>[srvs] <br>192.168.124.13<br>192.168.124.14 <br><span class="hljs-comment">#192.168.124.20    #注释</span><br></code></pre></td></tr></table></figure><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#ansible-playbook 使用循环 with_items</span><br><span class="hljs-comment">#使用循环结构多次执行同一个task任务</span><br><br><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/addusers.yml</span><br>---<br>- hosts: srvs<br>  remote_user: root<br>  tasks:<br>    - name: add more group<br>      group: name=&#123;&#123; item &#125;&#125; state=present<br>      with_items:<br>      - group1<br>      - group2<br>      - group3<br>    - name: add more user<br>      user: name=&#123;&#123; item.username &#125;&#125; group=&#123;&#123; item.usergroup &#125;&#125; state=present<br>      with_items:<br>        - &#123; username: <span class="hljs-string">&#x27;user1&#x27;</span>, usergroup: <span class="hljs-string">&#x27;group1&#x27;</span> &#125;<br>        - &#123; username: <span class="hljs-string">&#x27;user2&#x27;</span>, usergroup: <span class="hljs-string">&#x27;group2&#x27;</span> &#125;<br>        - &#123; username: <span class="hljs-string">&#x27;user3&#x27;</span>, usergroup: <span class="hljs-string">&#x27;group3&#x27;</span> &#125;<br><br><br><span class="hljs-comment">#测试</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook -C /etc/ansible/roles/playbook/addusers.yml </span><br><br>PLAY [srvs] *******************************************************************************************************<br><br>TASK [Gathering Facts] ********************************************************************************************<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [add more group] *********************************************************************************************<br>changed: [192.168.124.14] =&gt; (item=group1)<br>changed: [192.168.124.13] =&gt; (item=group1)<br>changed: [192.168.124.14] =&gt; (item=group2)<br>changed: [192.168.124.13] =&gt; (item=group2)<br>changed: [192.168.124.14] =&gt; (item=group3)<br>changed: [192.168.124.13] =&gt; (item=group3)<br><br>TASK [add more user] **********************************************************************************************<br>changed: [192.168.124.14] =&gt; (item=&#123;u<span class="hljs-string">&#x27;username&#x27;</span>: u<span class="hljs-string">&#x27;user1&#x27;</span>, u<span class="hljs-string">&#x27;usergroup&#x27;</span>: u<span class="hljs-string">&#x27;group1&#x27;</span>&#125;)<br>changed: [192.168.124.13] =&gt; (item=&#123;u<span class="hljs-string">&#x27;username&#x27;</span>: u<span class="hljs-string">&#x27;user1&#x27;</span>, u<span class="hljs-string">&#x27;usergroup&#x27;</span>: u<span class="hljs-string">&#x27;group1&#x27;</span>&#125;)<br>changed: [192.168.124.14] =&gt; (item=&#123;u<span class="hljs-string">&#x27;username&#x27;</span>: u<span class="hljs-string">&#x27;user2&#x27;</span>, u<span class="hljs-string">&#x27;usergroup&#x27;</span>: u<span class="hljs-string">&#x27;group2&#x27;</span>&#125;)<br>changed: [192.168.124.13] =&gt; (item=&#123;u<span class="hljs-string">&#x27;username&#x27;</span>: u<span class="hljs-string">&#x27;user2&#x27;</span>, u<span class="hljs-string">&#x27;usergroup&#x27;</span>: u<span class="hljs-string">&#x27;group2&#x27;</span>&#125;)<br>changed: [192.168.124.14] =&gt; (item=&#123;u<span class="hljs-string">&#x27;username&#x27;</span>: u<span class="hljs-string">&#x27;user3&#x27;</span>, u<span class="hljs-string">&#x27;usergroup&#x27;</span>: u<span class="hljs-string">&#x27;group3&#x27;</span>&#125;)<br>changed: [192.168.124.13] =&gt; (item=&#123;u<span class="hljs-string">&#x27;username&#x27;</span>: u<span class="hljs-string">&#x27;user3&#x27;</span>, u<span class="hljs-string">&#x27;usergroup&#x27;</span>: u<span class="hljs-string">&#x27;group3&#x27;</span>&#125;)<br><br>PLAY RECAP ********************************************************************************************************<br>192.168.124.13             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br><span class="hljs-comment">#运行</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook /etc/ansible/roles/playbook/addusers.yml </span><br><br>PLAY [srvs] *******************************************************************************************************<br><br>TASK [Gathering Facts] ********************************************************************************************<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [add more group] *********************************************************************************************<br>changed: [192.168.124.14] =&gt; (item=group1)<br>changed: [192.168.124.13] =&gt; (item=group1)<br>changed: [192.168.124.14] =&gt; (item=group2)<br>changed: [192.168.124.13] =&gt; (item=group2)<br>changed: [192.168.124.14] =&gt; (item=group3)<br>changed: [192.168.124.13] =&gt; (item=group3)<br><br>TASK [add more user] **********************************************************************************************<br>changed: [192.168.124.14] =&gt; (item=&#123;u<span class="hljs-string">&#x27;username&#x27;</span>: u<span class="hljs-string">&#x27;user1&#x27;</span>, u<span class="hljs-string">&#x27;usergroup&#x27;</span>: u<span class="hljs-string">&#x27;group1&#x27;</span>&#125;)<br>changed: [192.168.124.13] =&gt; (item=&#123;u<span class="hljs-string">&#x27;username&#x27;</span>: u<span class="hljs-string">&#x27;user1&#x27;</span>, u<span class="hljs-string">&#x27;usergroup&#x27;</span>: u<span class="hljs-string">&#x27;group1&#x27;</span>&#125;)<br>changed: [192.168.124.14] =&gt; (item=&#123;u<span class="hljs-string">&#x27;username&#x27;</span>: u<span class="hljs-string">&#x27;user2&#x27;</span>, u<span class="hljs-string">&#x27;usergroup&#x27;</span>: u<span class="hljs-string">&#x27;group2&#x27;</span>&#125;)<br>changed: [192.168.124.13] =&gt; (item=&#123;u<span class="hljs-string">&#x27;username&#x27;</span>: u<span class="hljs-string">&#x27;user2&#x27;</span>, u<span class="hljs-string">&#x27;usergroup&#x27;</span>: u<span class="hljs-string">&#x27;group2&#x27;</span>&#125;)<br>changed: [192.168.124.14] =&gt; (item=&#123;u<span class="hljs-string">&#x27;username&#x27;</span>: u<span class="hljs-string">&#x27;user3&#x27;</span>, u<span class="hljs-string">&#x27;usergroup&#x27;</span>: u<span class="hljs-string">&#x27;group3&#x27;</span>&#125;)<br>changed: [192.168.124.13] =&gt; (item=&#123;u<span class="hljs-string">&#x27;username&#x27;</span>: u<span class="hljs-string">&#x27;user3&#x27;</span>, u<span class="hljs-string">&#x27;usergroup&#x27;</span>: u<span class="hljs-string">&#x27;group3&#x27;</span>&#125;)<br><br>PLAY RECAP ********************************************************************************************************<br>192.168.124.13             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><span class="hljs-comment">#查看用户信息</span><br>[root@C7 ~]<span class="hljs-comment"># ansible all -m shell -a &quot;cat /etc/passwd|grep user&quot;</span><br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>user1:x:1003:1003::/home/user1:/bin/bash<br>user2:x:1004:1004::/home/user2:/bin/bash<br>user3:x:1005:1005::/home/user3:/bin/bash<br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>user1:x:1003:1003::/home/user1:/bin/bash<br>user2:x:1004:1004::/home/user2:/bin/bash<br>user3:x:1005:1005::/home/user3:/bin/bash<br></code></pre></td></tr></table></figure><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment">#ansible-playbook 使用模板</span><br><span class="hljs-comment">#templates 可以使用ansible-playbook 中定义的变量用以生成指定的文件</span><br><span class="hljs-comment">#下面我以httpd_install.yml 文件进行演示</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/httpd_install.yml </span><br>---<br>- hosts: srvs<br>  remote_user: root<br>  tasks:<br>    - name: install httpd<br>      yum: name=httpd<br>    - name: config httpd service<br><span class="hljs-comment">#      copy: src=/etc/ansible/roles/playbook/httpd.conf dest=/etc/httpd/conf/httpd.conf</span><br>      template: src=httpd.conf.j2 dest=/etc/httpd/conf/httpd.conf  <span class="hljs-comment">#新行</span><br>      notify: restart httpd service<br>      tags: config<br>    - name: copy default index.html<br>      copy: src=/etc/ansible/roles/playbook/index.html dest=/usr/share/httpd/noindex/index.html<br>    - name: manage httpd service<br>      service: name=httpd state=started enabled=<span class="hljs-built_in">yes</span><br>  handlers:<br>    - name: restart httpd service<br>      service: name=httpd state=restarted<br><br>[root@C7 ~]<span class="hljs-comment"># mkdir /etc/ansible/roles/playbook/templates</span><br>[root@C7 ~]<span class="hljs-comment"># cp /etc/ansible/roles/playbook/httpd.conf /etc/ansible/roles/playbook/templates/httpd.conf.j2</span><br><br>[root@C7 ~]<span class="hljs-comment"># vim !$</span><br><span class="hljs-comment">#Listen 8888</span><br>Listen &#123;&#123;httpd_port&#125;&#125;<br><br><span class="hljs-comment">#也许有人看不明白 vim !$ 是什么意思，!$表示的是调用上一次执行的命令行中最后一个参数</span><br><span class="hljs-comment">#对于这里而言，执行 vim !$ 等同于 vim /etc/ansible/roles/playbook/templates/httpd.conf.j2</span><br><span class="hljs-comment">#掌握技巧能够使我们工作效率大大增加</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook -e httpd_port=10086 /etc/ansible/roles/playbook/httpd_install.yml </span><br><br>PLAY [srvs] *******************************************************************************************************<br><br>TASK [Gathering Facts] ********************************************************************************************<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [install httpd] **********************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [config httpd service] ***************************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>TASK [copy default index.html] ************************************************************************************<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [manage httpd service] ***************************************************************************************<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>RUNNING HANDLER [restart httpd service] ***************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>PLAY RECAP ********************************************************************************************************<br>192.168.124.13             : ok=6    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=6    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><span class="hljs-comment">#查看端口</span><br>[root@C7 ~]<span class="hljs-comment"># ansible all -a &quot;ss -ntul&quot;</span><br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>Netid  State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              <br>udp    UNCONN     0      0      127.0.0.1:323                   *:*                  <br>udp    UNCONN     0      0         [::1]:323                [::]:*                  <br>tcp    LISTEN     0      100    127.0.0.1:25                    *:*                  <br>tcp    LISTEN     0      128       *:22                    *:*                  <br>tcp    LISTEN     0      100       [::1]:25                 [::]:*                  <br>tcp    LISTEN     0      128    [::]:10086              [::]:*                  <br>tcp    LISTEN     0      128    [::]:22                 [::]:*                  <br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>Netid  State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              <br>udp    UNCONN     0      0      127.0.0.1:323                   *:*                  <br>udp    UNCONN     0      0         [::1]:323                [::]:*                  <br>tcp    LISTEN     0      100    127.0.0.1:25                    *:*                  <br>tcp    LISTEN     0      128       *:22                    *:*                  <br>tcp    LISTEN     0      100       [::1]:25                 [::]:*                  <br>tcp    LISTEN     0      128    [::]:10086              [::]:*                  <br>tcp    LISTEN     0      128    [::]:22                 [::]:*                  <br><br><br>[root@C7 ~]<span class="hljs-comment"># ansible all -m shell -a &quot;cat /etc/httpd/conf/httpd.conf|grep ^Listen&quot;</span><br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>Listen 10086<br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>Listen 10086<br></code></pre></td></tr></table></figure><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment">#变量除了可以直接引用之外，还可以进行变量运算</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/hosts </span><br>[srvs] <br>192.168.124.13 httpd_port=110 <br>192.168.124.14 httpd_port=150 <br><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/templates/httpd.conf.j2</span><br><span class="hljs-comment">#Listen &#123;&#123;httpd_port&#125;&#125;</span><br>Listen &#123;&#123;httpd_port*2&#125;&#125;<br><br><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook /etc/ansible/roles/playbook/httpd_install.yml </span><br><br>PLAY [srvs] *******************************************************************************************************<br><br>TASK [Gathering Facts] ********************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [install httpd] **********************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [config httpd service] ***************************************************************************************<br>changed: [192.168.124.14]<br>changed: [192.168.124.13]<br><br>TASK [copy default index.html] ************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [manage httpd service] ***************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>RUNNING HANDLER [restart httpd service] ***************************************************************************<br>changed: [192.168.124.14]<br>changed: [192.168.124.13]<br><br>PLAY RECAP ********************************************************************************************************<br>192.168.124.13             : ok=6    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=6    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br>[root@C7 ~]<span class="hljs-comment"># ansible all -a &quot;ss -ntul&quot;</span><br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>Netid  State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              <br>udp    UNCONN     0      0      127.0.0.1:323                   *:*                  <br>udp    UNCONN     0      0         [::1]:323                [::]:*                  <br>tcp    LISTEN     0      100    127.0.0.1:25                    *:*                  <br>tcp    LISTEN     0      128       *:22                    *:*                  <br>tcp    LISTEN     0      100       [::1]:25                 [::]:*                  <br>tcp    LISTEN     0      128    [::]:300                [::]:*                  <br>tcp    LISTEN     0      128    [::]:22                 [::]:*                  <br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>Netid  State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              <br>udp    UNCONN     0      0      127.0.0.1:323                   *:*                  <br>udp    UNCONN     0      0         [::1]:323                [::]:*                  <br>tcp    LISTEN     0      100    127.0.0.1:25                    *:*                  <br>tcp    LISTEN     0      128       *:22                    *:*                  <br>tcp    LISTEN     0      100       [::1]:25                 [::]:*                  <br>tcp    LISTEN     0      128    [::]:220                [::]:*                  <br>tcp    LISTEN     0      128    [::]:22                 [::]:*                  <br><br><br>[root@C7 ~]<span class="hljs-comment"># ansible all -m shell -a &quot;cat /etc/httpd/conf/httpd.conf|grep ^Listen&quot;</span><br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>Listen 300<br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>Listen 220<br><br><br><span class="hljs-comment">#模板中还可以使用循环结构动态生成内容</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/hosts </span><br>[srvs] <br>192.168.124.13<br>192.168.124.14<br><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/httpd_install.yml</span><br>---<br>- hosts: srvs<br>  remote_user: root<br>  vars:<br>    httpd_vhosts:<br>      - web01:<br>        listen: 8001<br>        documentroot: <span class="hljs-string">&#x27;/data/web01&#x27;</span><br><br>      - web02:<br>        listen: 8002<br>        documentroot: <span class="hljs-string">&#x27;/data/web02&#x27;</span><br><br>  tasks:<br>    - name: install httpd<br>      yum: name=httpd<br><br>    - name: config httpd service<br><span class="hljs-comment">#      copy: src=/etc/ansible/roles/playbook/httpd.conf dest=/etc/httpd/conf/httpd.conf</span><br>      template: src=vhostport.conf.j2 dest=/etc/httpd/conf.d/vhostport.conf<br>      notify: restart httpd service<br>      tags: config<br><br>    - name: copy default index.html<br>      copy: src=/etc/ansible/roles/playbook/index.html dest=/usr/share/httpd/noindex/index.html<br><br>    - name: manage httpd service<br>      service: name=httpd state=started enabled=<span class="hljs-built_in">yes</span><br><br>  handlers:<br>    - name: restart httpd service<br>      service: name=httpd state=restarted<br><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/vhostport.conf.j2</span><br>&#123;% <span class="hljs-keyword">for</span> vhost <span class="hljs-keyword">in</span> httpd_vhosts %&#125;<br>listen &#123;&#123;vhost.listen&#125;&#125;<br>&#123;% endfor %&#125;<br><br>&#123;% <span class="hljs-keyword">for</span> vhost <span class="hljs-keyword">in</span> httpd_vhosts %&#125;<br>&lt;virtualhost *.&#123;&#123;vhost.listen&#125;&#125;&gt;<br>        documentroot &#123;&#123;vhost.documentroot&#125;&#125;<br>        &lt;directory &#123;vhost.documentroot&#125;&gt;<br>                require all granted<br>        &lt;/directory&gt;<br>&lt;/virtualhost&gt;<br>&#123;% endfor %&#125;<br><br><span class="hljs-comment">#测试干跑</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook -C /etc/ansible/roles/playbook/httpd_install.yml </span><br><br>PLAY [srvs] *******************************************************************************************************<br><br>TASK [Gathering Facts] ********************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [install httpd] **********************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [config httpd service] ***************************************************************************************<br>changed: [192.168.124.14]<br>changed: [192.168.124.13]<br><br>TASK [copy default index.html] ************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [manage httpd service] ***************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>RUNNING HANDLER [restart httpd service] ***************************************************************************<br>changed: [192.168.124.14]<br>changed: [192.168.124.13]<br><br>PLAY RECAP ********************************************************************************************************<br>192.168.124.13             : ok=6    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=6    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br><span class="hljs-comment">#运行</span><br>[root@C7 ~]<span class="hljs-comment"># ansible-playbook /etc/ansible/roles/playbook/httpd_install.yml </span><br><br>PLAY [srvs] *******************************************************************************************************<br><br>TASK [Gathering Facts] ********************************************************************************************<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>TASK [install httpd] **********************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [config httpd service] ***************************************************************************************<br>changed: [192.168.124.13]<br>changed: [192.168.124.14]<br><br>TASK [copy default index.html] ************************************************************************************<br>ok: [192.168.124.13]<br>ok: [192.168.124.14]<br><br>TASK [manage httpd service] ***************************************************************************************<br>ok: [192.168.124.14]<br>ok: [192.168.124.13]<br><br>RUNNING HANDLER [restart httpd service] ***************************************************************************<br>changed: [192.168.124.14]<br>changed: [192.168.124.13]<br><br>PLAY RECAP ********************************************************************************************************<br>192.168.124.13             : ok=6    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br>192.168.124.14             : ok=6    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br>[root@C7 ~]<span class="hljs-comment"># ansible all -a &quot;ss -ntul&quot;</span><br>192.168.124.14 | CHANGED | rc=0 &gt;&gt;<br>Netid  State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              <br>udp    UNCONN     0      0      127.0.0.1:323                   *:*                  <br>udp    UNCONN     0      0         [::1]:323                [::]:*                  <br>tcp    LISTEN     0      100    127.0.0.1:25                    *:*                  <br>tcp    LISTEN     0      128       *:22                    *:*                  <br>tcp    LISTEN     0      100       [::1]:25                 [::]:*                  <br>tcp    LISTEN     0      128    [::]:8001               [::]:*                  <br>tcp    LISTEN     0      128    [::]:8002               [::]:*                  <br>tcp    LISTEN     0      128    [::]:300                [::]:*                  <br>tcp    LISTEN     0      128    [::]:22                 [::]:*                  <br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>Netid  State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              <br>udp    UNCONN     0      0      127.0.0.1:323                   *:*                  <br>udp    UNCONN     0      0         [::1]:323                [::]:*                  <br>tcp    LISTEN     0      100    127.0.0.1:25                    *:*                  <br>tcp    LISTEN     0      128       *:22                    *:*                  <br>tcp    LISTEN     0      100       [::1]:25                 [::]:*                  <br>tcp    LISTEN     0      128    [::]:220                [::]:*                  <br>tcp    LISTEN     0      128    [::]:8001               [::]:*                  <br>tcp    LISTEN     0      128    [::]:8002               [::]:*                  <br>tcp    LISTEN     0      128    [::]:22                 [::]:*                  <br><br><br>[root@C7 ~]<span class="hljs-comment"># curl C7-3:8001</span><br>If you can see,that<span class="hljs-string">&#x27;s good!</span><br><span class="hljs-string">[root@C7 ~]# curl C7-3:8002</span><br><span class="hljs-string">If you can see,that&#x27;</span>s good!<br>[root@C7 ~]<span class="hljs-comment"># curl C7-4:8002</span><br>If you can see,that<span class="hljs-string">&#x27;s good!</span><br><span class="hljs-string">[root@C7 ~]# curl C7-4:8001</span><br><span class="hljs-string">If you can see,that&#x27;</span>s good!<br></code></pre></td></tr></table></figure></h2><h1 id="模块化安装httpd"><a href="#模块化安装httpd" class="headerlink" title="模块化安装httpd"></a>模块化安装httpd</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#让我们稍微升级一下，以模块化的方式安装httpd服务</span><br><span class="hljs-comment">#将所有主机还原到刚刚配置完成免密钥登录远程被控主机的状态，并且只保留C7 与C7-3 两台虚拟机</span><br><span class="hljs-comment">#使用时间管理技能：时光回溯……….完成</span><br><br><span class="hljs-comment">#配置远程被控主机清单</span><br>[root@C7 ~]<span class="hljs-comment"># vim /etc/ansible/hosts</span><br>[srvs]<br>192.168.124.13<br><br><span class="hljs-comment">#测试能否ping通</span><br>[root@C7 ~]<span class="hljs-comment"># ansible all -m ping</span><br>192.168.124.13 | SUCCESS =&gt; &#123;<br>    <span class="hljs-string">&quot;ansible_facts&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;discovered_interpreter_python&quot;</span>: <span class="hljs-string">&quot;/usr/bin/python&quot;</span><br>    &#125;, <br>    <span class="hljs-string">&quot;changed&quot;</span>: <span class="hljs-literal">false</span>, <br>    <span class="hljs-string">&quot;ping&quot;</span>: <span class="hljs-string">&quot;pong&quot;</span><br>&#125;<br><br><br>[root@C7 ~]<span class="hljs-comment"># mkdir -p /etc/ansible/roles/playbook/httpd/&#123;tasks,handlers,files,templates,vars&#125;</span><br>[root@C7 ~]<span class="hljs-comment"># tree /etc/ansible/ -d</span><br>/etc/ansible/<br>└── roles<br>    └── playbook<br>        └── httpd<br>            ├── files<br>            ├── handlers<br>            ├── tasks<br>            ├── templates<br>            └── vars<br><br>[root@C7 ~]<span class="hljs-comment"># cd /etc/ansible/roles/playbook/httpd/tasks/</span><br>[root@C7 tasks]<span class="hljs-comment"># vim main.yml</span><br>- include: install.yml<br>- include: config.yml<br>- include: index.yml<br>- include: service.yml<br><br><br>[root@C7 tasks]<span class="hljs-comment"># vim install.yml</span><br>- name: Install httpd package<br>  yum: name=httpd<br><br><br>[root@C7 tasks]<span class="hljs-comment"># vim index.yml</span><br>- name: index.html<br>  copy: src=index.html dest=/var/www/html/<br><br><br>[root@C7 tasks]<span class="hljs-comment"># vim config.yml</span><br>- name: config file<br>  copy: src=httpd.conf dest=/etc/httpd/conf/ backup=<span class="hljs-built_in">yes</span><br>  notify: restart<br><br><br>[root@C7 tasks]<span class="hljs-comment"># vim service.yml</span><br>- name: start service<br>  service: name=httpd state=started enabled=<span class="hljs-built_in">yes</span><br><br><br>[root@C7 tasks]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/httpd/handlers/main.yml</span><br>- name: restart<br>  service: name=httpd state=restarted<br><br>[root@C7 tasks]<span class="hljs-comment"># yum install httpd -y</span><br><br>[root@C7 tasks]<span class="hljs-comment"># cp /etc/httpd/conf/httpd.conf /etc/ansible/roles/playbook/httpd/files/</span><br>[root@C7 tasks]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/httpd/files/index.html</span><br>&lt;html&gt;<br>&lt;<span class="hljs-built_in">head</span>&gt;<br>&lt;meta http-equiv=Content-Type content=<span class="hljs-string">&quot;text/html;charset=utf-8&quot;</span>&gt;<br>&lt;title&gt;HTML语言&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;a href=https://blog.csdn.net/dushansao&gt;<br>&lt;img src=<span class="hljs-string">&quot;https://profile.csdnimg.cn/7/0/B/1_dushansao&quot;</span> /img&gt;&lt;/a&gt;<br>&lt;a href=https://blog.csdn.net/dushansao&gt;<br>&lt;h1 style=<span class="hljs-string">&quot;color:red&quot;</span>&gt;欢迎来到我的博客&lt;/h1&gt;&lt;/a&gt;<br>&lt;p&gt;&lt;a href=https://blog.csdn.net/dushansao&gt;点我，让你好看！&lt;/a&gt; 不点必将后悔！&lt;/p&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>[root@C7 tasks]<span class="hljs-comment"># vim /etc/ansible/roles/playbook/role_httpd.yml</span><br>---<br>- hosts: srvs<br>  remote_user: root<br>  roles:<br>    - role: /etc/ansible/roles/playbook/httpd<br><br><br>[root@C7 tasks]<span class="hljs-comment"># tree /etc/ansible/</span><br>/etc/ansible/<br>├── ansible.cfg<br>├── hosts<br>└── roles<br>    └── playbook<br>        ├── httpd<br>        │   ├── files<br>        │   │   ├── httpd.conf<br>        │   │   └── index.html<br>        │   ├── handlers<br>        │   │   └── main.yml<br>        │   ├── tasks<br>        │   │   ├── config.yml<br>        │   │   ├── index.yml<br>        │   │   ├── install.yml<br>        │   │   ├── main.yml<br>        │   │   └── service.yml<br>        │   ├── templates<br>        │   └── vars<br>        └── role_httpd.yml<br><br><br><span class="hljs-comment">#测试</span><br>[root@C7 tasks]<span class="hljs-comment"># ansible-playbook -C /etc/ansible/roles/playbook/role_httpd.yml</span><br><br>PLAY [srvs] *******************************************************************************************************<br><br>TASK [Gathering Facts] ********************************************************************************************<br>ok: [192.168.124.13]<br><br>TASK [/etc/ansible/roles/playbook/httpd : Install httpd package] **************************************************<br>ok: [192.168.124.13]<br><br>TASK [/etc/ansible/roles/playbook/httpd : config file] ************************************************************<br>ok: [192.168.124.13]<br><br>TASK [/etc/ansible/roles/playbook/httpd : index.html] *************************************************************<br>changed: [192.168.124.13]<br><br>TASK [/etc/ansible/roles/playbook/httpd : start service] **********************************************************<br>changed: [192.168.124.13]<br><br>PLAY RECAP ********************************************************************************************************<br>192.168.124.13             : ok=5    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br><span class="hljs-comment">#运行</span><br>[root@C7 tasks]<span class="hljs-comment"># ansible-playbook /etc/ansible/roles/playbook/role_httpd.yml </span><br><br>PLAY [srvs] *******************************************************************************************************<br><br>TASK [Gathering Facts] ********************************************************************************************<br>ok: [192.168.124.13]<br><br>TASK [/etc/ansible/roles/playbook/httpd : Install httpd package] **************************************************<br>ok: [192.168.124.13]<br><br>TASK [/etc/ansible/roles/playbook/httpd : config file] ************************************************************<br>ok: [192.168.124.13]<br><br>TASK [/etc/ansible/roles/playbook/httpd : index.html] *************************************************************<br>changed: [192.168.124.13]<br><br>TASK [/etc/ansible/roles/playbook/httpd : start service] **********************************************************<br>changed: [192.168.124.13]<br><br>PLAY RECAP ********************************************************************************************************<br>192.168.124.13             : ok=5    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   <br><br><br><span class="hljs-comment">#查看远程被控主机端口</span><br>[root@C7 tasks]<span class="hljs-comment"># ansible all -a &quot;ss -ntul&quot;</span><br>192.168.124.13 | CHANGED | rc=0 &gt;&gt;<br>Netid  State      Recv-Q Send-Q Local Address:Port               Peer Address:Port              <br>udp    UNCONN     0      0      127.0.0.1:323                   *:*                  <br>udp    UNCONN     0      0         [::1]:323                [::]:*                  <br>tcp    LISTEN     0      100    127.0.0.1:25                    *:*                  <br>tcp    LISTEN     0      128       *:22                    *:*                  <br>tcp    LISTEN     0      100       [::1]:25                 [::]:*                  <br>tcp    LISTEN     0      128    [::]:80                 [::]:*                  <br>tcp    LISTEN     0      128    [::]:22                 [::]:*                  <br><br><br><span class="hljs-comment">#网页打开</span><br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200603205440604.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><h1 id="点击跳至文章末尾"><a href="#点击跳至文章末尾" class="headerlink" title="点击跳至文章末尾"></a>点击跳至文章末尾</h1><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
      <category>ansible</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ansible</tag>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux基础命令</title>
    <link href="/p/command.html"/>
    <url>/p/command.html</url>
    
    <content type="html"><![CDATA[<h1 id="基础命令"><a href="#基础命令" class="headerlink" title="基础命令"></a>基础命令</h1><p id="hitokoto">获取中...</p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><p><strong>grep : 分析一行信息，如果其中有我们需要的信息，就将该行拿出来.</strong></p><p><strong>常用参数:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">-i : 忽略大小写的不同<br>-n : 输出行号<br>-v : 反向选择，显示没有查找内容的行<br>-o : 与-v相反，只输出文件中匹配到的部分。<br>-A : &lt;显示列数&gt; 除了显示符合范本样式的那一行之外，并显示该行之后的内容。<br>-B : 在显示符合范本样式的那一行之外，并显示该行之前的内容。<br>-C : &lt;显示列数&gt;或-&lt;显示列数&gt;  除了显示符合范本样式的那一列之外，并显示该列之前后的内容。<br>-E : 将范本样式为延伸的普通表示法来使用，意味着使用能使用扩展正则表达式。<br></code></pre></td></tr></table></figure><hr><h3 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h3><p><strong>sed是一种流编辑器，它是文本处理中非常中的工具，能够配合正则表达式使用.处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有 改变，除非你使用重定向存储输出。Sed主要用来自动编辑一个或多个文件；简化对文件的反复操作；编写转换程序等。</strong></p><p><strong>常用選項</strong> :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">-n <span class="hljs-comment">#不輸出模式空間内容到屏幕，即不自動打印(但sed自帶默認打印)</span><br>-e <span class="hljs-comment">#多點編輯</span><br>-f /PATH/SCRIPT_FILE <span class="hljs-comment">#從指定文件中讀取編輯脚本</span><br>-r <span class="hljs-comment">#支持使用擴展正則表達式</span><br>-i <span class="hljs-comment">#備份文件並原處編輯</span><br></code></pre></td></tr></table></figure><p><strong>地址定界</strong> :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">1&gt; 不給地址:對全文進行處理<br>    <br>2&gt; 單地址:<br>  <span class="hljs-comment">#:指定的行，$:最後一行</span><br>  /pattern/:被此處模式所能夠匹配到的每一行<br><br>3&gt; 地址範圍:<br>  <span class="hljs-comment">#,#</span><br>  <span class="hljs-comment">#,+#</span><br>  /part1/,/part2/<br>  <span class="hljs-comment">#,/part1/</span><br><br>4&gt; ~:步進<br>  1~2奇數行<br>  2~2偶數行<br></code></pre></td></tr></table></figure><p><strong>編輯命令</strong> :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">a [\]text <span class="hljs-comment">#在指定行後面追加文本，支持使用\n實現多行追加。</span><br>i [\]text <span class="hljs-comment">#在当前行上面插入文本。</span><br>c\ <span class="hljs-comment">#把选定的行改为新的文本。</span><br>d <span class="hljs-comment">#删除，删除选择的行。</span><br>D <span class="hljs-comment">#删除模板块的第一行。</span><br>s <span class="hljs-comment">#替换指定字符</span><br>h <span class="hljs-comment">#拷贝模板块的内容到内存中的缓冲区。</span><br>H <span class="hljs-comment">#追加模板块的内容到内存中的缓冲区。</span><br>g <span class="hljs-comment">#获得内存缓冲区的内容，并替代当前模板块中的文本。</span><br>G <span class="hljs-comment">#获得内存缓冲区的内容，并追加到当前模板块文本的后面。</span><br>l <span class="hljs-comment">#列表不能打印字符的清单。</span><br>n <span class="hljs-comment">#读取下一个输入行，用下一个命令处理新的行而不是用第一个命令。</span><br>N <span class="hljs-comment">#追加下一个输入行到模板块后面并在二者间嵌入一个新行，改变当前行号码。</span><br>p <span class="hljs-comment">#打印當前模式空間内容，追加到默認輸出之後。</span><br>P(大写) <span class="hljs-comment">#打印模板块的第一行。</span><br>q <span class="hljs-comment">#退出Sed。</span><br>b lable <span class="hljs-comment">#分支到脚本中带有标记的地方，如果分支不存在则分支到脚本的末尾。</span><br>r file <span class="hljs-comment">#从file中读行。</span><br>t label <span class="hljs-comment">#if分支，从最后一行开始，条件一旦满足或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾。</span><br>T label <span class="hljs-comment">#错误分支，从最后一行开始，一旦发生错误或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾。</span><br>w /path/file <span class="hljs-comment">#保存模式匹配的行至指定文件。  </span><br>W /path/file <span class="hljs-comment">#保存模式匹配的第一行至指定文件。    </span><br>! <span class="hljs-comment">#模式空間中匹配行取反處理。  </span><br>= <span class="hljs-comment">#為模式空間中的行打印行號。  </span><br>    <span class="hljs-comment"># #把注释扩展到下一个换行符以前。</span><br></code></pre></td></tr></table></figure><p><strong>sed替換標記</strong> :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">s/// 查找替換，支持使用其他分割符，s@@@,s%%%,s<span class="hljs-comment">###等</span><br></code></pre></td></tr></table></figure><p><strong>替換標記</strong> :</p><table><thead><tr><th>字  符</th><th>表 达 含 义</th></tr></thead><tbody><tr><td>g</td><td>行内全局替换</td></tr><tr><td>p</td><td>顯示替換成功的行</td></tr><tr><td>w &#x2F;PATH&#x2F;FILE</td><td>將替換成功的行保存至文件中</td></tr><tr><td>x</td><td>互换模式空間中的文本和缓冲区中的文本</td></tr><tr><td>y</td><td>把一个字符翻译为另外的字符（但是不用于正则表达式）</td></tr><tr><td>\1</td><td>子串匹配标记</td></tr><tr><td>&amp;</td><td>已匹配字符串标记</td></tr></tbody></table><p><strong>示例 :</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">sed ‘2p’  /etc/passwd <br>sed  -n ‘2p’ /etc/passwd <br>sed  -n ‘1,4p’ /etc/passwd <br>sed  -n ‘/root/p’  /etc/passwd <br>sed  -n ‘2,/root/p’  /etc/passwd 从2行开始 <br>sed  -n ‘/^$/=’  file 显示空行行号 <br>sed  -n  -e ‘/^$/p’ -e ‘/^$/=’  file <br>sed ‘/root/a\superman’  /etc/passwd行后 <br>sed ‘/root/i\superman’ /etc/passwd 行前 <br>sed ‘/root/c\superman’ /etc/passwd 代替行<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">sed ‘/^$/d’ file <br>sed ‘1,10d’   file <br><span class="hljs-built_in">nl</span>   /etc/passwd | sed ‘2,5d’ <br><span class="hljs-built_in">nl</span>   /etc/passwd | sed ‘2a tea’ <br>sed <span class="hljs-string">&#x27;s/test/mytest/g&#x27;</span> example <br>sed –n ‘s/root/&amp;superman/p’ /etc/passwd 单词后 <br>sed –n ‘s/root/superman&amp;/p’ /etc/passwd 单词前 <br>sed -e ‘s/dog/cat/’ -e ‘s/hi/lo/’ pets   <br>sed –i.bak  ‘s/dog/cat/g’ pets<br></code></pre></td></tr></table></figure><p><strong>sed元字符集</strong> :</p><table><thead><tr><th>字  符</th><th>表 达 含 义</th><th>示 例</th></tr></thead><tbody><tr><td>^</td><td>匹配行开始</td><td>如：&#x2F;^sed&#x2F;匹配所有以sed开头的行</td></tr><tr><td>$</td><td>匹配行结束</td><td>如：&#x2F;sed$&#x2F;匹配所有以sed结尾的行</td></tr><tr><td>.</td><td>匹配一个非换行符的任意字符</td><td>如：&#x2F;s.d&#x2F;匹配s后接一个任意字符，最后是d</td></tr><tr><td>*</td><td>匹配0个或多个字符</td><td>如：&#x2F;*sed&#x2F;匹配所有模板是一个或多个空格后紧跟sed的行</td></tr><tr><td>[]</td><td>匹配一个指定范围内的字符</td><td>如&#x2F;[ss]ed&#x2F;匹配sed和Sed</td></tr><tr><td>[^]</td><td>匹配一个不在指定范围内的字符</td><td>如：&#x2F;[^A-RT-Z]ed&#x2F;匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行</td></tr><tr><td>\(..\)</td><td>匹配子串，保存匹配的字符</td><td>如s&#x2F;(love)able&#x2F;\1rs，loveable被替换成lovers</td></tr><tr><td>&amp;</td><td>保存搜索字符用来替换其他字符</td><td>如s&#x2F;love&#x2F;<strong>&amp;</strong>&#x2F;，love这成<strong>love</strong></td></tr><tr><td>\&lt;</td><td>匹配单词的开始</td><td>如:&#x2F;&lt;love&#x2F;匹配包含以love开头的单词的行</td></tr><tr><td>\&gt;</td><td>配单词的结束</td><td>如&#x2F;love&gt;&#x2F;匹配包含以love结尾的单词的行</td></tr><tr><td>x\{m\}</td><td>重复字符x，m次</td><td>如：&#x2F;0{5}&#x2F;匹配包含5个0的行</td></tr><tr><td>x\{m,\}</td><td>重复字符x，至少m次</td><td>如：&#x2F;0{5,}&#x2F;匹配至少有5个0的行</td></tr><tr><td>x\{m,n\}</td><td>重复字符x，至少m次，不多于n次</td><td>如：&#x2F;0{5,10}&#x2F;匹配5~10个0的行</td></tr></tbody></table><p><strong>高级编辑命令</strong> :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">P： <span class="hljs-comment">#打印模式空间开端至\n内容，并追加到默认输出之前 </span><br>h:  <span class="hljs-comment">#把模式空间中的内容覆盖至保持空间中 </span><br>H：<span class="hljs-comment">#把模式空间中的内容追加至保持空间中 </span><br>g:  <span class="hljs-comment">#从保持空间取出数据覆盖至模式空间</span><br>G：<span class="hljs-comment">#从保持空间取出内容追加至模式空间</span><br>x:  <span class="hljs-comment">#把模式空间中的内容与保持空间中的内容进行互换</span><br>n:  <span class="hljs-comment">#读取匹配到的行的下一行覆盖至模式空间 </span><br>N：<span class="hljs-comment">#读取匹配到的行的下一行追加至模式空间</span><br>d:  <span class="hljs-comment">#删除模式空间中的行 </span><br>D：<span class="hljs-comment">#如果模式空间包含换行符，则删除直到第一个换行符的模式空间中的文本， 并不会读取新的输入行，而使用合成的模式空间重新启动循环。如果模式空间 不包含换行符，则会像发出d命令那样启动正常的新循环</span><br></code></pre></td></tr></table></figure><p><strong>示例</strong> :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">sed -n <span class="hljs-string">&#x27;n;p&#x27;</span> FILE <br>sed <span class="hljs-string">&#x27;1!G;h;$!d&#x27;</span> FILE <br>sed‘N;D’FILE <br>sed <span class="hljs-string">&#x27;$!N;$!D&#x27;</span> FILE <br>sed <span class="hljs-string">&#x27;$!d&#x27;</span> FILE <br>sed ‘G’ FILE <br>sed ‘g’ FILE <br>sed ‘/^$/d;G’ FILE <br>sed <span class="hljs-string">&#x27;n;d&#x27;</span> FILE  <br>sed -n <span class="hljs-string">&#x27;1!G;h;$p&#x27;</span> FILE<br></code></pre></td></tr></table></figure><hr><h3 id="tr"><a href="#tr" class="headerlink" title="tr :"></a>tr :</h3><p><strong>tr</strong> <code>命令可以对来自标准输入的字符进行替换、压缩和删除。它可以将一组字符变成另一组字符，经常用来编写优美的单行命令，作用很强大。</code></p><p><strong>主要参数</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">-c 或——complerment：取代所有不属于第一字符集的字符；<br>-d 或——delete：删除所有属于第一字符集的字符；<br>-s 或--squeeze-repeats：把连续重复的字符以单独一个字符表示；<br>-t 或--truncate-set1：先删除第一字符集较第二字符集多出的字符。<br></code></pre></td></tr></table></figure><p><strong>示例</strong> ：<br><strong>将输入字符由大写转换为小写</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;HELLO WORLD&quot;</span> | <span class="hljs-built_in">tr</span> <span class="hljs-string">&#x27;A-Z&#x27;</span> <span class="hljs-string">&#x27;a-z&#x27;</span><br>hello world<br></code></pre></td></tr></table></figure><p><strong>用tr压缩字符，可以压缩输入中重复的字符</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;thissss is      a text linnnnnnne.&quot;</span> | <span class="hljs-built_in">tr</span> -s <span class="hljs-string">&#x27; sn&#x27;</span><br>this is a text line.<br></code></pre></td></tr></table></figure><p><strong>tr可以使用的字符类</strong> ：</p><table><thead><tr><th>字符</th><th>表达含义</th></tr></thead><tbody><tr><td>[:alnum:]</td><td>字母和数字</td></tr><tr><td>[:alpha:]</td><td>字母</td></tr><tr><td>[:cntrl:]</td><td>控制（非打印）字符</td></tr><tr><td>[:digit:]</td><td>数字</td></tr><tr><td>[:graph:]</td><td>图形字符</td></tr><tr><td>[:lower:]</td><td>小写字母</td></tr><tr><td>[:print:]</td><td>可打印字符</td></tr><tr><td>[:punct:]</td><td>标点符号</td></tr><tr><td>[:space:]</td><td>空白字符</td></tr><tr><td>[:upper:]</td><td>大写字母</td></tr><tr><td>[:xdigit:]</td><td>十六进制字符</td></tr></tbody></table><hr><p><strong>使用tr打印1加至100</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@CentOS8 data]<span class="hljs-comment"># echo &#123;1..100&#125; &gt; filethree.txt</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># cat filethree.txt </span><br>1 2 3 4 5 6 7 8 9 10<br>[root@CentOS8 data]<span class="hljs-comment"># tr &#x27; &#x27; &#x27;+&#x27; &lt; filethree.txt &gt; filefour.txt</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># cat filefour.txt </span><br>1+2+3+4+5+6+7+8+9+10<br></code></pre></td></tr></table></figure><p><strong>打印1至100的奇偶数集</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@CentOS8 data]<span class="hljs-comment"># echo &#123;0..50..2&#125; （打印1到50的偶数集）</span><br>0 2 4 6 8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44 46 48 50<br><br>[root@CentOS8 data]<span class="hljs-comment"># echo &#123;1..50..2&#125;  （打印1到50的奇数集）               </span><br>1 3 5 7 9 11 13 15 17 19 21 23 25 27 29 31 33 35 37 39 41 43 45 47 49<br></code></pre></td></tr></table></figure><hr><h3 id="tail："><a href="#tail：" class="headerlink" title="tail："></a>tail：</h3><p><strong>tail</strong> <code>命令用于输入文件中的尾部内容。tail命令默认在屏幕上显示指定文件的末尾10行。</code></p><p><strong>常用选项</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">-f ： <span class="hljs-comment">#显示文件最新追加的内容。</span><br>-s&lt;秒数&gt;或——sleep-interal=&lt;秒数&gt; ： <span class="hljs-comment">#与“-f”选项连用，指定监视文件变化时间隔的秒数；</span><br>-v ： <span class="hljs-comment">#当有多个文件参数时，总是输出各个文件名；</span><br></code></pre></td></tr></table></figure><p><strong>示例</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">tail</span> file <span class="hljs-comment">#（显示文件file的最后10行）</span><br><span class="hljs-built_in">tail</span> +20 file <span class="hljs-comment">#（显示文件file的内容，从第20行至文件末尾）</span><br><span class="hljs-built_in">tail</span> -f file <span class="hljs-comment">#（时时监听文件file内容）</span><br></code></pre></td></tr></table></figure><hr><h3 id="head"><a href="#head" class="headerlink" title="head"></a>head</h3><ul><li>head命令用于显示文件的开头的内容。在默认情况下，head命令显示文件的头10行内容。</li></ul><p><strong>常用选项</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">-n&lt;数字&gt;：指定显示头部内容的行数；<br>-c&lt;字符数&gt;：指定显示头部内容的字符数；<br>-v：总是显示文件名的头信息；<br>-q：不显示文件名的头信息。<br><br>示例：<br>[root@CentOS1908 ~]<span class="hljs-comment"># cat /etc/passwd |head -n1</span><br>root:x:0:0:root:/root:/bin/bash<br>[root@CentOS1908 ~]<span class="hljs-comment"># cat /etc/passwd |head -c10</span><br>root:x:0:0<br>[root@CentOS1908 ~]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><p><strong>利用 head 和 tail 命令组合我们可以将文件的指定前x行 和后x行打印出来</strong></p><hr><h3 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h3><p><strong>cut : 从某一行信息中取出某部分我们想要的信息</strong><br><code>常用：cut -d &#39;分隔字符&#39; -f field // 用于分隔字符</code><br><code>cut -c 字符范围</code></p><p><strong>常用选项</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">-d : 后面接分隔字符,通常与 -f 一起使用<br>-f : 根据-d 将信息分隔成数段，-f 后接数字 表示取出第几段<br>-c : 以字符为单位取出固定字符区间的信息<br>-n：与“-b”选项连用，不分割多字节字符；<br>-b：仅显示行中指定直接范围的内容；<br></code></pre></td></tr></table></figure><ul><li>示例：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 打印/etc/passwd文件中以 : 为分隔符的第1个字段和第6个字段分别表示用户名和家目录</span><br>[root@izuf6i29flb2df231kt91hz /]<span class="hljs-comment"># cat etc/passwd | cut -d &#x27;:&#x27; -f 1,6</span><br><br><span class="hljs-comment"># 打印/etc/passwd文件中每一行的前10个字符：</span><br>[root@izuf6i29flb2df231kt91hz /]<span class="hljs-comment"># cat /etc/passwd | cut -c 1-10</span><br></code></pre></td></tr></table></figure><p><strong>实际使用中，比cut更加方便的命令有awk和sed，但这并不妨碍我们学习多一种命令</strong></p><hr><h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><p><strong>文件进行排序，并将排序结果标准输出。sort命令既可以从特定的文件，也可以从stdin中获取输入。</strong></p><p><strong>常用选项</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">-f ：忽略大小写的差异，例如A 与a 视为编码相同<br>-b ：忽略最前面的空格部分<br>-M ：以月份的名字来排序，例如JAN, DEC 等等的排序方法<br>-n ：使用『纯数字』进行排序默认是以文字型态来排序的)<br>-r ：反向排序<br>-u ：就是<span class="hljs-built_in">uniq</span> ，相同的资料中，仅出现一行代表<br>-t ：分隔符号，预设是用[tab] 键来分隔<br>-k ：以那个区间(field) 来进行排序的意思<br></code></pre></td></tr></table></figure><ul><li>示例：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 对/etc/passwd的账号进行排序</span><br><span class="hljs-built_in">cat</span> /etc/passwd | <span class="hljs-built_in">sort</span><br>adm:x:3:4:adm:/var/adm:/sbin/nologin<br>bin:x:1:1:bin:/bin:/sbin/nologin<br>chrony:x:998:996::/var/lib/chrony:/sbin/nologin<br>        <br><span class="hljs-comment">#取出/etc/passwd中用户及UID并输出指定分隔符，再以数字区间排序</span><br>awk -F:   <span class="hljs-string">&#x27;&#123;printf &quot;Username: %-24sUID:%d\n&quot;,$1,$3&#125;&#x27;</span>  /etc/passwd |<span class="hljs-built_in">sort</span> -t<span class="hljs-string">&quot;:&quot;</span> -k 3 -n<br>Username: root                    UID:0<br>Username: bin                     UID:1<br>Username: daemon                  UID:2<br>Username: adm                     UID:3<br>Username: lp                      UID:4<br>Username: <span class="hljs-built_in">sync</span>                    UID:5<br><br><span class="hljs-comment">#以行长度从小到大排序</span><br>awk <span class="hljs-string">&#x27;&#123;print length(), $0 | &quot;sort -n&quot; &#125;&#x27;</span> filename.txt<br><br><br><span class="hljs-comment">#打印文件中的最长行和最短行</span><br>最短行：awk <span class="hljs-string">&#x27;(NR==1||length(min)&gt;length())&#123;min=$0&#125;END&#123;print min&#125;&#x27;</span>  filename.txt<br><br>最长行：awk <span class="hljs-string">&#x27;&#123;if (length(max)&lt;length()) max=$0&#125;END&#123;print max&#125;&#x27;</span>  filename.txt<br><br><span class="hljs-comment">#处理文件，按照第二列数字倒序排列打印</span><br>Filename.csv内容：<br>ky100-074,35%,ky100-087,7%<br>ky100-073,35%,ky100-085,7%<br>ky100-025,35%,ky100-084,7%<br>ky100-024,35%,ky100-083,7%<br>ky100-022,35%,ky100-082,7%<br>ky100-021,35%,ky100-081,7%<br><br>awk -F, -v OFS=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-string">&#x27;&#123;print $1,&quot;,&quot;,$2|&quot;sort -rt\&quot;,\&quot; -k2&quot;&#125;&#x27;</span> filename.csv<br></code></pre></td></tr></table></figure><hr><h3 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h3><p><strong>统计文件行内容</strong></p><p><strong>常用选项</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">-c或——count：在每列旁边显示该行重复出现的次数；<br>-d或--repeated：仅显示重复出现的行列；<br>-f&lt;栏位&gt;或--skip-fields=&lt;栏位&gt;：忽略比较指定的栏位；<br>-s&lt;字符位置&gt;或--skip-chars=&lt;字符位置&gt;：忽略比较指定的字符；<br>-u或——unique：仅显示出一次的行列；<br>-w&lt;字符位置&gt;或--check-chars=&lt;字符位置&gt;：指定要比较的字符。<br></code></pre></td></tr></table></figure><ul><li>示例：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 统计各行在文件中出现的次数：</span><br><span class="hljs-built_in">sort</span> file.txt | <span class="hljs-built_in">uniq</span> -c<br><br><span class="hljs-comment">#在文件中找出重复的行：</span><br><span class="hljs-built_in">sort</span> file.txt | <span class="hljs-built_in">uniq</span> -d<br></code></pre></td></tr></table></figure><hr><h3 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h3><p><strong>wc：用来计算数字。</strong></p><p><strong>常用选项</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">-l或——lines：只显示列数；<br>-w或——words：只显示字数。<br></code></pre></td></tr></table></figure><ul><li>示例：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 查看etc/passwd中有多少账号</span><br><span class="hljs-built_in">cat</span> /etc/passwd | <span class="hljs-built_in">wc</span> -l<br></code></pre></td></tr></table></figure><hr><h3 id="split"><a href="#split" class="headerlink" title="split"></a>split</h3><p><strong>split：顾名思义，讲一个大文件依据文件大小或行数切割成为小文件</strong></p><p><strong>常用选项</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">-b : 后面可接欲切割文件的大小，可加单位，例如b,k,m等<br>-l : 以行数来进行切割<br>-C：每一输出档中，单行的最大 byte 数。<br>-d：使用数字作为后缀。<br></code></pre></td></tr></table></figure><ul><li>示例：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#生成一个大小为100KB的测试文件：</span><br>[root@localhost <span class="hljs-built_in">split</span>]<span class="hljs-comment"># dd if=/dev/zero bs=100k count=1 of=date.file</span><br>1+0 records <span class="hljs-keyword">in</span><br>1+0 records out<br>102400 bytes (102 kB) copied, 0.00043 seconds, 238 MB/s<br><br><span class="hljs-comment">#使用split命令将上面创建的date.file文件分割成大小为10KB的小文件：</span><br>[root@localhost <span class="hljs-built_in">split</span>]<span class="hljs-comment"># split -b 10k date.file </span><br>[root@localhost <span class="hljs-built_in">split</span>]<span class="hljs-comment"># ls</span><br>date.file  xaa  xab  xac  xad  xae  xaf  xag  xah  xai  xaj<br><br><span class="hljs-comment">#分割大的tar文件為多份小文件</span><br><span class="hljs-built_in">split</span> -b Size -d tar-file-name prefix-name<br><span class="hljs-built_in">split</span> -b 1M -d mybackup.tgz mybackup-parts<br><span class="hljs-built_in">split</span> -b 1M mybackup.tgz mybackup-parts<br><span class="hljs-comment">#合并切割的文件:</span><br><span class="hljs-built_in">cat</span> mybackup-parts* &gt; mybackup-tar.gz<br><br><span class="hljs-comment"># 若你有一个超大的压缩包在服务器中，无法通过常规操作导出</span><br><span class="hljs-comment"># 你可以将其切割，导出后无需合并直接进行解压</span><br><span class="hljs-built_in">split</span> -b 2G -d tomcat.tar.gz tomcat.tar.gz.<br><span class="hljs-built_in">cat</span> tomcat.tar.gz.* | tar xzvf -<br></code></pre></td></tr></table></figure><hr><h3 id="I-x2F-O重定向："><a href="#I-x2F-O重定向：" class="headerlink" title="I&#x2F;O重定向："></a>I&#x2F;O重定向：</h3><p><strong>将输出和错误重新定向到文件</strong><br><img src="https://img-blog.csdnimg.cn/20190928132109982.png"><br><strong>STDOUT和STDERR可以被重定向到文件</strong></p><p><strong>支持的操作符号包括</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">1&gt; 把STDOUT重新定向到文件<br>2&gt; 把STDERR重新定向到文件<br>&amp;&gt; 把所有输出重新定向到文件<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">&gt;  <span class="hljs-comment">#文件内容将会被覆盖</span><br><span class="hljs-built_in">set</span> -C  <span class="hljs-comment">#禁止将内容覆盖已有文件，但可以追加</span><br>1&gt; | file  <span class="hljs-comment">#强制覆盖</span><br><span class="hljs-built_in">set</span> +C  <span class="hljs-comment">#允许覆盖</span><br>&gt;&gt;  <span class="hljs-comment">#在原有内容基础上，追加内容</span><br>2&gt;  <span class="hljs-comment">#覆盖重定向错误输出数据流</span><br>2&gt;&gt;  <span class="hljs-comment">#追加重定向错误输出数据流</span><br></code></pre></td></tr></table></figure><p><strong>标准输出和标准错误输出各自定向至不同位置：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">COMMAND &gt; /path/to/file.out 2&gt; /path/to/error.out<br></code></pre></td></tr></table></figure><p><strong>合并标准输出和错误输出为同一个数据流进行重定向</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">     &amp;&gt;  <span class="hljs-comment">#覆盖重定向</span><br><br>    &amp;&gt;&gt;  <span class="hljs-comment">#追加重定向</span><br><br>COMMAND &gt; /path/to/file.out 2&gt;&amp;1<br><br>        (顺序很重要)<br><br>COMMAND &gt;&gt; /path/to/file.out 2&gt;&amp;1<br><br> <span class="hljs-comment">#合并多个程序的STDOUT</span><br><br>  （cal 2007；cal 2008） &gt; all.txt<br></code></pre></td></tr></table></figure><h3 id="命令执行过程视图："><a href="#命令执行过程视图：" class="headerlink" title="命令执行过程视图："></a>命令执行过程视图：</h3><p><img src="https://img-blog.csdnimg.cn/2019092813215113.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"></p><p><strong>示例：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@Redhat7 data]<span class="hljs-comment"># ls /home/ &gt; file </span><br>[root@Redhat7 data]<span class="hljs-comment"># cat file </span><br>td<br>[root@Redhat7 data]<span class="hljs-comment"># ls /home/xsifuew 2&gt; file </span><br>[root@Redhat7 data]<span class="hljs-comment"># cat file </span><br><span class="hljs-built_in">ls</span>: cannot access /home/xsifuew: No such file or directory<br>[root@Redhat7 data]<span class="hljs-comment"># ls /home/xsifuew 1&gt; file 2&gt;&amp;1</span><br>[root@Redhat7 data]<span class="hljs-comment"># cat file </span><br><span class="hljs-built_in">ls</span>: cannot access /home/xsifuew: No such file or directory<br></code></pre></td></tr></table></figure><p><strong>单行重定向：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@CentOS8 data]<span class="hljs-comment"># cat &gt; ./file.txt</span><br>       abc<br>       def<br>       xyz<br></code></pre></td></tr></table></figure><p><strong>多行重定向：</strong></p><ul><li>开始符与结束符为相同字符</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@CentOS8 data]<span class="hljs-comment"># cat &gt; ./filetwo.txt &lt;&lt;开始符</span><br>      &gt; abc<br>      &gt; def<br>      &gt; 结束符<br></code></pre></td></tr></table></figure><hr><h3 id="管道命令："><a href="#管道命令：" class="headerlink" title="管道命令："></a>管道命令：</h3><p><strong>命令执行顺序控制</strong></p><ul><li>通常情况下，我们在终端只能执行一条命令，然后按下回车执行，那么如何执行多条命令呢？</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">顺序执行多条命令：<br>command1;command2;command3;<br>简单的顺序指令可以通过 ;来实现<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">有条件的执行多条命令：<br><span class="hljs-built_in">which</span> command1 &amp;&amp; command2 || command3<br><br>&amp;&amp; :  <span class="hljs-comment">#如果前一条命令执行成功则执行下一条命令，如果command1执行成功（返回0）,则执行command2</span><br>|| :  <span class="hljs-comment">#与&amp;&amp;命令相反，执行不成功时执行这个命令</span><br>$? :  <span class="hljs-comment">#存储上一次命令的返回结果</span><br></code></pre></td></tr></table></figure><hr><h3 id="标准错误导入管道-："><a href="#标准错误导入管道-：" class="headerlink" title="标准错误导入管道 ："></a>标准错误导入管道 ：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@CentOS8 data]<span class="hljs-comment"># xxx | tr &#x27;a-z&#x27; &#x27;A-Z&#x27;   #这样输入是无法将其导入的！     </span><br>bash: xxx: <span class="hljs-built_in">command</span> not found...<br>Failed to search <span class="hljs-keyword">for</span> file: Cannot update read-only repo<br><br><span class="hljs-comment">#正确做法：</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># xxx |&amp; tr &#x27;a-z&#x27; &#x27;A-Z&#x27;</span><br>BASH: XXX: COMMAND NOT FOUND...<br>FAILED TO SEARCH FOR FILE: CANNOT UPDATE READ-ONLY REPO<br><br><span class="hljs-comment">#使用tr将其替换成大写并输出至文件中：</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># xxx |&amp; tr &#x27;a-z&#x27; &#x27;A-Z&#x27; &gt; filefive.txt</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># cat filefive.txt </span><br>BASH: XXX: COMMAND NOT FOUND...<br>FAILED TO SEARCH FOR FILE: CANNOT UPDATE READ-ONLY REPO<br></code></pre></td></tr></table></figure><hr><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>K8S单机部署</title>
    <link href="/p/k8s.html"/>
    <url>/p/k8s.html</url>
    
    <content type="html"><![CDATA[<p id="hitokoto">获取中...</p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><h1 id="K8S单机部署"><a href="#K8S单机部署" class="headerlink" title="K8S单机部署"></a>K8S单机部署</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html">准备工作：创建一/三台CentOS7虚拟机，无需进行任何额外操作<br>确保虚拟机能够ping通外部网络，将k8s镜像文件上传到虚拟机中<br></code></pre></td></tr></table></figure><p>k8s镜像文件下载地址<br><a class="btn" href="https://pan.baidu.com/s/1ax56iA3h4uSmydzZz-BjCA?pwd=pe8a" title="https://pan.baidu.com/s/1ax56iA3h4uSmydzZz-BjCA?pwd=pe8a">点击下载 [提取码: pe8a]</a></p><hr><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@glorious/demo@0.11.12/dist/gdemo.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/prismjs/themes/prism-tomorrow.css"><script src="//cdn.jsdelivr.net/npm/@glorious/demo@0.11.12/dist/gdemo.min.js"></script><div id='demo-teriminal' style='height: 100px'></div><script>new GDemo('#demo-teriminal')  .openApp('terminal', {minHeight: '100px', windowTitle: 'Terminal', promptString: '$'})  .command(`vim master_install<span class="token punctuation">.</span>sh`, {onCompleteDelay: 500})  .command(`#脚本内容如下所示`, {onCompleteDelay: 500})  .respond(``)  .end();</script><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># 提示信息</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;脚本仅适用于X86_64 CentOS7.6&quot;</span><br><br>IP=`ip a | egrep <span class="hljs-string">&quot;ens33&quot;</span> | grep <span class="hljs-string">&quot;inet&quot;</span> | awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span> | awk -F<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-string">&#x27;&#123;print $1&#125;&#x27;</span>`<br><br><span class="hljs-comment"># 关闭SELINUX</span><br>setenforce 0 &amp;&amp; sed -i <span class="hljs-string">&quot;s/SELINUX=enforcing/SELINUX=disabled/g&quot;</span> /etc/selinux/config<br><br><span class="hljs-comment"># 关闭防火墙</span><br>systemctl stop firewalld<br>systemctl <span class="hljs-built_in">disable</span> firewalld<br><br><span class="hljs-comment"># 设置hostname</span><br>hostnamectl --static set-hostname master1<br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;IP&#125;</span> master1&quot;</span> &gt;&gt; /etc/hosts<br><br><span class="hljs-comment"># 修改内核参数和模块</span><br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF &gt; /etc/sysctl.d/k8s.conf</span><br><span class="hljs-string">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="hljs-string">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="hljs-string">EOF</span><br><br><span class="hljs-comment"># 使内核参数配置生效</span><br>sysctl --system<br>modprobe br_netfilter<br>lsmod | grep br_netfilter<br><br><span class="hljs-comment"># 关闭交换内存，如果不关闭，kubelet服务将无法启动</span><br>swapoff -a &amp;&amp; sed -i <span class="hljs-string">&#x27;/ swap / s/^\(.*\)$/#\1/g&#x27;</span> /etc/fstab<br><br><span class="hljs-comment"># 基础命令检测</span><br>rpm -qa|grep unzip &amp;&gt; /dev/null<br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;$?&quot;</span> -ne <span class="hljs-string">&quot;0&quot;</span> ];<span class="hljs-keyword">then</span><br>yum install unzip -y<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># 安装Docker</span><br>yum -y install yum-utils device-mapper-persistent-data lvm2<br><span class="hljs-built_in">sleep</span> 2<br><span class="hljs-comment">#yum-config-manager -y --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br>yum-config-manager --add-repo  http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;$?&quot;</span> -ne <span class="hljs-string">&quot;0&quot;</span> ];<span class="hljs-keyword">then</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;docker repo 导入失败，请重新执行&quot;</span><br><span class="hljs-built_in">exit</span> 233;<br><span class="hljs-keyword">fi</span><br><br>yum install docker-ce -y &amp;&amp; systemctl restart docker &amp;&amp; systemctl <span class="hljs-built_in">enable</span> docker<br><br><span class="hljs-comment"># 设置国内docker仓库</span><br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF &gt; /etc/docker/daemon.json</span><br><span class="hljs-string">&#123;</span><br><span class="hljs-string">  &quot;registry-mirrors&quot;: [</span><br><span class="hljs-string">    &quot;https://3laho3y3.mirror.aliyuncs.com&quot;</span><br><span class="hljs-string">  ],</span><br><span class="hljs-string">  &quot;exec-opts&quot;: [</span><br><span class="hljs-string">    &quot;native.cgroupdriver=systemd&quot;</span><br><span class="hljs-string">  ]</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">EOF</span><br>systemctl restart docker<br><span class="hljs-built_in">sleep</span> 2<br><br><span class="hljs-comment"># 配置kubernetes yum源，用以安装Kubernetes基础服务及工具，此处使用阿里云镜像仓库源</span><br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF &gt; /etc/yum.repos.d/kubernetes.repo</span><br><span class="hljs-string">[kubernetes]</span><br><span class="hljs-string">name=Kubernetes</span><br><span class="hljs-string">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span><br><span class="hljs-string">enabled=1</span><br><span class="hljs-string">gpgcheck=0</span><br><span class="hljs-string">repo_gpgcheck=0</span><br><span class="hljs-string">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br><span class="hljs-string">EOF</span><br><span class="hljs-built_in">sleep</span> 2<br><br><span class="hljs-comment"># 安装Kubernetes基础服务及工具</span><br>yum -y install kubelet-1.23.6 kubeadm-1.23.6 kubectl-1.23.6<br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;$?&quot;</span> -ne <span class="hljs-string">&quot;0&quot;</span> ];<span class="hljs-keyword">then</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;k8s下载失败，请重新执行&quot;</span><br><span class="hljs-built_in">exit</span> 244;<br><span class="hljs-keyword">fi</span><br><br>sed -i <span class="hljs-string">&#x27;s@kubeconfig=/etc/kubernetes/kubelet.conf@kubeconfig=/etc/kubernetes/kubelet.conf --cgroup-driver=systemd@&#x27;</span> /usr/lib/systemd/system/kubelet.service.d/10-kubeadm.conf<br><span class="hljs-comment">#systemctl daemon-reload &amp;&amp; systemctl restart kubelet &amp;&amp; systemctl enable kubelet.service</span><br><br><span class="hljs-comment"># 查看k8s相关镜像</span><br><span class="hljs-comment"># kubeadm config images list</span><br><br><span class="hljs-comment"># 镜像下载脚本</span><br><span class="hljs-comment">#images=(</span><br><span class="hljs-comment">#k8s.gcr.io/kube-apiserver:v1.23.6</span><br><span class="hljs-comment">#k8s.gcr.io/kube-controller-manager:v1.23.6</span><br><span class="hljs-comment">#k8s.gcr.io/kube-scheduler:v1.23.6</span><br><span class="hljs-comment">#k8s.gcr.io/kube-proxy:v1.23.6</span><br><span class="hljs-comment">#k8s.gcr.io/pause:3.6</span><br><span class="hljs-comment">#k8s.gcr.io/etcd:3.5.1</span><br><span class="hljs-comment">#)</span><br><span class="hljs-comment">#for i in $&#123;images[@]&#125;; do </span><br><span class="hljs-comment">#  imageName=$&#123;i#k8s.gcr.io/&#125;</span><br><span class="hljs-comment">#  docker pull registry.aliyuncs.com/google_containers/$imageName</span><br><span class="hljs-comment">#  docker tag registry.aliyuncs.com/google_containers/$imageName k8s.gcr.io/$imageName</span><br><span class="hljs-comment">#  docker rmi registry.aliyuncs.com/google_containers/$imageName</span><br><span class="hljs-comment">#done;</span><br><br><span class="hljs-comment"># 导入离线k8s镜像,若使用离线镜像，需将下列注释取消</span><br><br>unzip k8s_1.23.6.zip <br>docker load -i k8s_1.23.6/coredns_v1.8.6.tar<br>docker load -i k8s_1.23.6/etcd_3.5.3-0.tar<br>docker load -i k8s_1.23.6/kube-apiserver_v1.23.6.tar<br>docker load -i k8s_1.23.6/kube-controller-manager_v1.23.6.tar<br>docker load -i k8s_1.23.6/kube-proxy_v1.23.6.tar<br>docker load -i k8s_1.23.6/kube-scheduler_v1.23.6.tar<br>docker load -i k8s_1.23.6/pause_3.6.tar<br>docker load -i k8s_1.23.6/calico_cni.tar<br>docker load -i k8s_1.23.6/calico_kube.tar<br>docker load -i k8s_1.23.6/calico_node.tar<br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;$?&quot;</span> -ne <span class="hljs-string">&quot;0&quot;</span> ];<span class="hljs-keyword">then</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;未成功解压压缩包，请重新执行&quot;</span><br><span class="hljs-built_in">exit</span> 255;<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># 初始化k8s和网络</span><br><span class="hljs-comment"># kubeadm init --kubernetes-version=v1.23.6 --pod-network-cidr=192.168.0.0/16</span><br>kubeadm init --kubernetes-version=v1.23.6 \<br>--pod-network-cidr=192.168.0.0/16 \<br>--apiserver-advertise-address=<span class="hljs-variable">$&#123;IP&#125;</span> \<br>--service-cidr=172.20.0.0/20 \<br>--ignore-preflight-errors=<span class="hljs-string">&#x27;swap&#x27;</span> \<br>--image-repository=registry.cn-hangzhou.aliyuncs.com/google_containers<br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;$?&quot;</span> -ne <span class="hljs-string">&quot;0&quot;</span> ];<span class="hljs-keyword">then</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;k8s初始化异常退出！&quot;</span><br><span class="hljs-built_in">exit</span> 266;<br><span class="hljs-keyword">else</span><br>systemctl daemon-reload &amp;&amp; systemctl restart kubelet &amp;&amp; systemctl <span class="hljs-built_in">enable</span> kubelet.service<br><br><span class="hljs-comment"># 初始化kubectl配置</span><br><span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/.kube<br>sudo <span class="hljs-built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="hljs-variable">$HOME</span>/.kube/config<br>sudo <span class="hljs-built_in">chown</span> $(<span class="hljs-built_in">id</span> -u):$(<span class="hljs-built_in">id</span> -g) <span class="hljs-variable">$HOME</span>/.kube/config<br><span class="hljs-comment">#kubectl apply -f https://cloud.weave.works/k8s/net?k8s-version=$(kubectl version | base64 | tr -d &#x27;\n&#x27;)</span><br>kubectl apply -f k8s_1.23.6/calico.yaml<br><span class="hljs-comment"># kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml</span><br><br><span class="hljs-comment"># 默认k8s的master节点是不能跑pod的业务，需要执行以下命令解除限制</span><br><span class="hljs-comment"># kubectl taint nodes --all node-role.kubernetes.io/master-</span><br><br><span class="hljs-comment"># 查看主节点运行 Pod 的状态</span><br>kubectl get pods --all-namespaces -o wide<br><span class="hljs-keyword">fi</span><br><br></code></pre></td></tr></table></figure>    </div></div><hr><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@glorious/demo@0.11.12/dist/gdemo.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/prismjs/themes/prism-tomorrow.css"><script src="//cdn.jsdelivr.net/npm/@glorious/demo@0.11.12/dist/gdemo.min.js"></script><div id='demo2-teriminal' style='height: 100px'></div><script>new GDemo('#demo2-teriminal')  .openApp('terminal', {minHeight: '100px', windowTitle: 'Terminal', promptString: '$'})  .command(`vim worker_install<span class="token punctuation">.</span>sh`, {onCompleteDelay: 500})  .command(`#脚本内容如下所示`, {onCompleteDelay: 500})  .respond(``)  .end();</script><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># 提示信息</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;脚本仅适用于X86_64 CentOS7.6&quot;</span><br><br>IP=`ip a | egrep <span class="hljs-string">&quot;ens33&quot;</span> | grep <span class="hljs-string">&quot;inet&quot;</span> | awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span> | awk -F<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-string">&#x27;&#123;print $1&#125;&#x27;</span>`<br><br><span class="hljs-comment"># 关闭SELINUX</span><br>setenforce 0 &amp;&amp; sed -i <span class="hljs-string">&quot;s/SELINUX=enforcing/SELINUX=disabled/g&quot;</span> /etc/selinux/config<br><br><span class="hljs-comment"># 关闭防火墙</span><br>systemctl stop firewalld<br>systemctl <span class="hljs-built_in">disable</span> firewalld<br><br><span class="hljs-comment"># 设置hostname</span><br>hostnamectl --static set-hostname worker1<br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;IP&#125;</span> worker1&quot;</span> &gt;&gt; /etc/hosts<br><br><span class="hljs-comment"># 修改内核参数和模块</span><br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF &gt; /etc/sysctl.d/k8s.conf</span><br><span class="hljs-string">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="hljs-string">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="hljs-string">EOF</span><br><br><span class="hljs-comment"># 使内核参数配置生效</span><br>sysctl --system<br>modprobe br_netfilter<br>lsmod | grep br_netfilter<br><br><span class="hljs-comment"># 关闭交换内存，如果不关闭，kubelet服务将无法启动</span><br>swapoff -a &amp;&amp; sed -i <span class="hljs-string">&#x27;/ swap / s/^\(.*\)$/#\1/g&#x27;</span> /etc/fstab<br><br><span class="hljs-comment"># 基础命令检测</span><br>rpm -qa|grep unzip &amp;&gt; /dev/null<br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;$?&quot;</span> -ne <span class="hljs-string">&quot;0&quot;</span> ];<span class="hljs-keyword">then</span><br>yum install unzip -y<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># 安装Docker</span><br>yum -y install yum-utils device-mapper-persistent-data lvm2<br><span class="hljs-built_in">sleep</span> 2<br><span class="hljs-comment">#yum-config-manager -y --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br>yum-config-manager --add-repo  http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;$?&quot;</span> -ne <span class="hljs-string">&quot;0&quot;</span> ];<span class="hljs-keyword">then</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;docker repo 导入失败，请重新执行&quot;</span><br><span class="hljs-built_in">exit</span> 233;<br><span class="hljs-keyword">fi</span><br><br>yum install docker-ce -y &amp;&amp; systemctl restart docker &amp;&amp; systemctl <span class="hljs-built_in">enable</span> docker<br><br><span class="hljs-comment"># 设置国内docker仓库</span><br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF &gt; /etc/docker/daemon.json</span><br><span class="hljs-string">&#123;</span><br><span class="hljs-string">  &quot;registry-mirrors&quot;: [</span><br><span class="hljs-string">    &quot;https://3laho3y3.mirror.aliyuncs.com&quot;</span><br><span class="hljs-string">  ],</span><br><span class="hljs-string">  &quot;exec-opts&quot;: [</span><br><span class="hljs-string">    &quot;native.cgroupdriver=systemd&quot;</span><br><span class="hljs-string">  ]</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">EOF</span><br>systemctl restart docker<br><span class="hljs-built_in">sleep</span> 2<br><br><span class="hljs-comment"># 配置kubernetes yum源，用以安装Kubernetes基础服务及工具，此处使用阿里云镜像仓库源</span><br><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF &gt; /etc/yum.repos.d/kubernetes.repo</span><br><span class="hljs-string">[kubernetes]</span><br><span class="hljs-string">name=Kubernetes</span><br><span class="hljs-string">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span><br><span class="hljs-string">enabled=1</span><br><span class="hljs-string">gpgcheck=0</span><br><span class="hljs-string">repo_gpgcheck=0</span><br><span class="hljs-string">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br><span class="hljs-string">EOF</span><br><span class="hljs-built_in">sleep</span> 2<br><br><span class="hljs-comment"># 安装Kubernetes基础服务及工具</span><br>yum -y install kubelet-1.23.6 kubeadm-1.23.6 kubectl-1.23.6<br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;$?&quot;</span> -ne <span class="hljs-string">&quot;0&quot;</span> ];<span class="hljs-keyword">then</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;k8s下载失败，请重新执行&quot;</span><br><span class="hljs-built_in">exit</span> 244;<br><span class="hljs-keyword">fi</span><br><br>sed -i <span class="hljs-string">&#x27;s@kubeconfig=/etc/kubernetes/kubelet.conf@kubeconfig=/etc/kubernetes/kubelet.conf --cgroup-driver=systemd@&#x27;</span> /usr/lib/systemd/system/kubelet.service.d/10-kubeadm.conf<br><br><span class="hljs-comment"># 导入离线k8s镜像,若master使用了离线镜像部署，则此处下方需要注释</span><br>unzip k8s_1.23.6.zip <br>docker load -i k8s_1.23.6/coredns_v1.8.6.tar<br>docker load -i k8s_1.23.6/etcd_3.5.3-0.tar<br>docker load -i k8s_1.23.6/kube-apiserver_v1.23.6.tar<br>docker load -i k8s_1.23.6/kube-controller-manager_v1.23.6.tar<br>docker load -i k8s_1.23.6/kube-proxy_v1.23.6.tar<br>docker load -i k8s_1.23.6/kube-scheduler_v1.23.6.tar<br>docker load -i k8s_1.23.6/pause_3.6.tar<br>docker load -i k8s_1.23.6/calico_cni.tar<br>docker load -i k8s_1.23.6/calico_kube.tar<br>docker load -i k8s_1.23.6/calico_node.tar<br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;$?&quot;</span> -ne <span class="hljs-string">&quot;0&quot;</span> ];<span class="hljs-keyword">then</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;未成功解压压缩包，请重新执行&quot;</span><br><span class="hljs-built_in">exit</span> 255;<br><span class="hljs-keyword">fi</span><br><br>systemctl daemon-reload &amp;&amp; systemctl restart kubelet &amp;&amp; systemctl <span class="hljs-built_in">enable</span> kubelet.service<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;请手动输入master token添加节点命令&quot;</span><br></code></pre></td></tr></table></figure>    </div></div><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>k8s</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
      <tag>k8s</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Gitlab容器部署</title>
    <link href="/p/docker-Gitlab.html"/>
    <url>/p/docker-Gitlab.html</url>
    
    <content type="html"><![CDATA[<h1 id="容器部署Gitlab"><a href="#容器部署Gitlab" class="headerlink" title="容器部署Gitlab"></a>容器部署Gitlab</h1><p id="hitokoto">获取中...</p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">准备一台CentOS7虚拟机，可ping通外网，基础环境自配，默认已安装 Docker 服务<br></code></pre></td></tr></table></figure><p><a href="https://mtdia.github.io/2022/10/20/CentOS7.4-Docker1903/">Docker服务部署步骤</a></p><hr><h3 id="部署步骤"><a href="#部署步骤" class="headerlink" title="部署步骤"></a>部署步骤</h3><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 配置docker国内阿里加速</span><br>[root@gitlab gitlab]<span class="hljs-comment"># cat /etc/docker/daemon.json</span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://dl0ygawi.mirror.aliyuncs.com&quot;</span>]<br>&#125;<br><br><span class="hljs-comment"># 不要忘记将docker服务加入开机自启</span><br>[root@gitlab gitlab]<span class="hljs-comment"># systemctl daemon-reload &amp;&amp; sudo systemctl restart docker</span><br>[root@gitlab gitlab]<span class="hljs-comment"># systemctl --now enable docker</span><br><br><span class="hljs-comment"># 查看docker 版本</span><br>[root@gitlab gitlab]<span class="hljs-comment"># docker -v</span><br>Docker version 20.10.18, build b40c2f6<br><br><span class="hljs-comment"># 当前所在目录</span><br>[root@gitlab gitlab]<span class="hljs-comment"># pwd</span><br>/data/gitlab<br><br><span class="hljs-comment"># 有关gitlab的其他镜像可以前往docker.hub官网进行下载</span><br><span class="hljs-comment"># gitlab容器运行脚本</span><br>[root@gitlab gitlab]<span class="hljs-comment"># cat gitlab-run.sh </span><br><span class="hljs-comment">#!/bin/bash</span><br>docker run -d \<br>-p 10008:80 -p 10009:443 -p 10010:22 \<br>--restart always \<br>--name gitlab \<br>-v /data/gitlab/etc/gitlab:/etc/gitlab \<br>-v /data/gitlab/log/gitlab:/var/log/gitlab \<br>-v /data/gitlab/opt/gitlab:/var/opt/gitlab \<br>--privileged=<span class="hljs-literal">true</span> drud/gitlab-ce:v0.29.1<br><br><span class="hljs-comment"># 运行脚本，拉取镜像耗时较长</span><br>[root@gitlab gitlab]<span class="hljs-comment"># bash gitlab-run.sh </span><br>······过程省略<br><br><span class="hljs-comment"># 查看gitlab镜像</span><br>[root@gitlab gitlab]<span class="hljs-comment"># docker images</span><br>REPOSITORY       TAG       IMAGE ID       CREATED       SIZE<br>drud/gitlab-ce   v0.29.1   3e5f92380a64   3 years ago   1.44GB<br><br><span class="hljs-comment"># 查看正在运行的容器</span><br>[root@gitlab gitlab]<span class="hljs-comment"># docker ps -a</span><br>CONTAINER ID   IMAGE                    COMMAND             CREATED        STATUS                  PORTS                                                                                                                         NAMES<br>394451ec2c94   drud/gitlab-ce:v0.29.1   <span class="hljs-string">&quot;/assets/wrapper&quot;</span>   41 hours ago   Up 41 hours (healthy)   0.0.0.0:10010-&gt;22/tcp, :::10010-&gt;22/tcp, 0.0.0.0:10008-&gt;80/tcp, :::10008-&gt;80/tcp, 0.0.0.0:10009-&gt;443/tcp, :::10009-&gt;443/tcp   gitlab<br></code></pre></td></tr></table></figure>    </div></div><p><img src="/img/gitlab_config.png" alt="gitlab_config"></p><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 修改gitlab配置文件，参考上图追加以下内容</span><br>[root@gitlab gitlab]<span class="hljs-comment"># vim etc/gitlab/gitlab.rb</span><br><span class="hljs-comment"># 如果没有域名，则直接使用宿主机的ip; 但若服务使用了 nginx 转发 则此处必须写nginx所在的虚拟机IP</span><br>external_url <span class="hljs-string">&#x27;http://113.x.x.184&#x27;</span><br><span class="hljs-comment"># 如果没有域名，则直接使用宿主机的ip; 但若服务使用了 nginx 转发 则此处必须写nginx所在的虚拟机IP</span><br>gitlab_rails[<span class="hljs-string">&#x27;gitlab_ssh_host&#x27;</span>] = <span class="hljs-string">&#x27;113.x.x.184&#x27;</span><br><span class="hljs-comment"># 端口为启动docker时映射的ssh端口</span><br>gitlab_rails[<span class="hljs-string">&#x27;gitlab_shell_ssh_port&#x27;</span>] =10010<br><span class="hljs-comment"># 设置时区为东八区，即北京时间</span><br>gitlab_rails[<span class="hljs-string">&#x27;time_zone&#x27;</span>] = <span class="hljs-string">&#x27;Asia/Shanghai&#x27;</span><br><br><span class="hljs-comment"># 邮件配置</span><br>gitlab_rails[<span class="hljs-string">&#x27;smtp_enable&#x27;</span>] = <span class="hljs-literal">true</span><br>gitlab_rails[<span class="hljs-string">&#x27;smtp_address&#x27;</span>] = <span class="hljs-string">&quot;smtp.qq.com&quot;</span>   <span class="hljs-comment"># 邮箱服务器</span><br>gitlab_rails[<span class="hljs-string">&#x27;smtp_port&#x27;</span>] = 465    <span class="hljs-comment"># 邮箱服务对应的端口号</span><br>gitlab_rails[<span class="hljs-string">&#x27;smtp_user_name&#x27;</span>] = <span class="hljs-string">&quot;16xxxxxxxx9@qq.com&quot;</span>   <span class="hljs-comment"># 发件箱的邮箱地址</span><br>gitlab_rails[<span class="hljs-string">&#x27;smtp_password&#x27;</span>] = <span class="hljs-string">&quot;ymxxxxxxxxxxxxce&quot;</span>      <span class="hljs-comment"># 发件箱对应的授权码，注意不是登录密码，是授权码</span><br>gitlab_rails[<span class="hljs-string">&#x27;smtp_domain&#x27;</span>] = <span class="hljs-string">&quot;qq.com&quot;</span><br>gitlab_rails[<span class="hljs-string">&#x27;smtp_authentication&#x27;</span>] = <span class="hljs-string">&quot;login&quot;</span><br>gitlab_rails[<span class="hljs-string">&#x27;smtp_enable_starttls_auto&#x27;</span>] = <span class="hljs-literal">true</span><br>gitlab_rails[<span class="hljs-string">&#x27;smtp_tls&#x27;</span>] = <span class="hljs-literal">true</span><br>gitlab_rails[<span class="hljs-string">&#x27;gitlab_email_enabled&#x27;</span>] = <span class="hljs-literal">true</span><br>gitlab_rails[<span class="hljs-string">&#x27;gitlab_email_from&#x27;</span>] = <span class="hljs-string">&#x27;16xxxxxxxxx9@qq.com&#x27;</span>     <span class="hljs-comment"># 发件箱地址</span><br>gitlab_rails[<span class="hljs-string">&#x27;gitlab_email_display_name&#x27;</span>] = <span class="hljs-string">&#x27;fxxxxxy&#x27;</span>    <span class="hljs-comment"># 显示名称</span><br>gitlab_rails[<span class="hljs-string">&#x27;gitlab_email_reply_to&#x27;</span>] = <span class="hljs-string">&#x27;16xxxxxxxx9@qq.com&#x27;</span>     <span class="hljs-comment"># 给指定邮箱发送邮件提示不要回复</span><br></code></pre></td></tr></table></figure>    </div></div><h3 id="配置邮件"><a href="#配置邮件" class="headerlink" title="配置邮件"></a>配置邮件</h3><ul><li>登录QQ邮箱网页端-设置-账户-开启POP3&#x2F;SMTP服务</li></ul><p><img src="/img/mail-1.png" alt="mail-2"></p><p><img src="/img/mail-2.png" alt="mail-1"></p><p><img src="/img/gitlab_config-2.png" alt="gitlab_config-2"></p><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 将gitlab容器删了，重新运行</span><br>[root@gitlab gitlab]<span class="hljs-comment"># docker stop gitlab &amp;&amp; docker rm gitlab</span><br>[root@gitlab gitlab]<span class="hljs-comment"># bash gitlab-run.sh</span><br><br><span class="hljs-comment"># 进入 gitlab容器，参考上图修改配置文件</span><br>[root@gitlab gitlab]<span class="hljs-comment"># docker exec -it gitlab bash</span><br>root@394451ec2c94:/<span class="hljs-comment"># vi /opt/gitlab/embedded/service/gitlab-rails/config/gitlab.yml</span><br><span class="hljs-comment"># 如果没有域名，则直接使用宿主机的ip; 但若服务使用了 nginx 转发 则此处必须写nginx所在的虚拟机IP</span><br>    host: 113.x.x.184<br><span class="hljs-comment"># 若服务使用了 nginx 转发 则此处必须写nginx转发的端口，若未配置 nginx 转发 则写容器外部映射端口 10008</span><br>    port: 10880<br>    https: <span class="hljs-literal">false</span><br><span class="hljs-comment"># 如果没有域名，则直接使用宿主机的ip; 但若服务使用了 nginx 转发 则此处必须写nginx所在的虚拟机IP</span><br>    ssh_host: 113.x.x.184<br><br><span class="hljs-comment"># 在容器中重启gitlab</span><br>root@394451ec2c94:/<span class="hljs-comment"># gitlab-ctl restart</span><br>········过程省略<br></code></pre></td></tr></table></figure>    </div></div><h3 id="浏览器访问"><a href="#浏览器访问" class="headerlink" title="浏览器访问"></a>浏览器访问</h3><ul><li>若服务使用了 nginx 转发 则访问nginx转发的IP:端口，若未配置 nginx 转发 则访问虚拟机本机IP:10008</li><li>首次登录需要重置密码</li></ul><p><img src="/img/gitlab_wab-1.png" alt="gitlab_wab-1"></p><ul><li>默认账户：root</li></ul><p><img src="/img/gitlab_wab-2.png" alt="gitlab_wab-2"></p><ul><li><p>关闭gitlab的注册功能</p><p><img src="/img/gitlab_wab-3.png" alt="gitlab_wab-3"></p></li><li><p>取消勾选</p><p><img src="/img/gitlab_wab-4.png" alt="gitlab_wab-4"></p></li><li><p>退出重新登录，注册选项已去除</p><p><img src="/img/gitlab_wab-5.png" alt="gitlab_wab-5"></p></li><li><p>用户创建及组创建便不再进行操作</p></li></ul><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>docker</category>
      
      <category>gitlab</category>
      
    </categories>
    
    
    <tags>
      
      <tag>gitlab</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker Images</title>
    <link href="/p/docker-Images.html"/>
    <url>/p/docker-Images.html</url>
    
    <content type="html"><![CDATA[<h1 id="Docker-images"><a href="#Docker-images" class="headerlink" title="Docker images"></a>Docker images</h1><p id="hitokoto">获取中...</p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#基于现有的容器制作镜像</span><br>docker commit -a <span class="hljs-string">&quot;提交的镜像作者&quot;</span> -m <span class="hljs-string">&quot;提交时的说明文字&quot;</span> 容器<span class="hljs-built_in">id</span> 镜像名称:自定义版本号<br>示例：<br>docker commit -a <span class="hljs-string">&#x27;Mtdia&#x27;</span> -m <span class="hljs-string">&#x27;web-01&#x27;</span> 0895cb579748 tomcat:v1.0<br><br><br><span class="hljs-comment">#将docker镜像导出</span><br>docker save 镜像ID &gt; 导出后的tar包名称<br>示例：<br>docker save ae513a47849c &gt; nginx-save.tar<br><br><span class="hljs-comment">#另一种写法</span><br>docker save -o 导出后的tar包名称 镜像ID<br>示例：<br>docker save -o nginx-save.tar ae513a47849c<br><br><br><span class="hljs-comment">#导出时保留原镜像ID和tag</span><br>docker save -o test.tar 原镜像ID:tag<br><br><br><span class="hljs-comment">#将docker镜像导入</span><br>docker save -o nginx-save.tar <br><br><br><span class="hljs-comment">#修改现存镜像tag</span><br>docker tag  镜像ID  新镜像名称:tag<br><br><br><span class="hljs-comment">#容器的导出与导入</span><br><span class="hljs-comment">#导出</span><br>docker <span class="hljs-built_in">export</span> -o mysql-`<span class="hljs-built_in">date</span> +%Y%m%d`.tar 220aee82cfea<br><br><br><span class="hljs-comment">#导入</span><br>docker import  my_ubuntu_v3.tar runoob/ubuntu:v4<br></code></pre></td></tr></table></figure>    </div></div><hr><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html">#解释<br>镜像和容器 导出和导入的区别:<br>1.镜像导入 是复制的过程<br>2.容器导入 是将当前容器 变成一个新的镜像<br>save 和 export区别：<br>1）save 保存镜像所有的信息-包含历史<br>2）export 只导出当前的信息<br></code></pre></td></tr></table></figure>    </div></div><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker部署</title>
    <link href="/p/23b0.html"/>
    <url>/p/23b0.html</url>
    
    <content type="html"><![CDATA[<h1 id="CentOS-7-4-Docker-19-03"><a href="#CentOS-7-4-Docker-19-03" class="headerlink" title="CentOS 7.4 - Docker 19.03"></a><strong>CentOS 7.4 - Docker 19.03</strong></h1><p id="hitokoto">获取中...</p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><p>[TOC]</p><p><img src="/img/docker.png"></p><h4 id="docker安装"><a href="#docker安装" class="headerlink" title="docker安装"></a>docker安装</h4><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#卸载原虚拟机中旧版本Docker</span><br>sudo yum remove docker \<br>                  docker-client \<br>                  docker-client-latest \<br>                  docker-common \<br>                  docker-latest \<br>                  docker-latest-logrotate \<br>                  docker-logrotate \<br>                  docker-engine<br>           <br><span class="hljs-comment">#安装yum-utils包（提供yum-config-manager 实用程序）并设置国内稳定存储库。（官网配置为国外地址，速度慢）</span><br>sudo yum install -y yum-utils<br>sudo yum-config-manager \<br>    --add-repo \<br>    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<br>    <br><span class="hljs-comment">#安装指定版本Docker</span><br>sudo yum install docker-ce-19.03.5 docker-ce-cli-19.03.5 containerd.io<br><br><span class="hljs-comment">#列出并排序您的存储库中可用的Docker版本</span><br>yum list docker-ce --showduplicates | <span class="hljs-built_in">sort</span> -r<br><br><span class="hljs-comment">#镜像加速</span><br><span class="hljs-comment">#先执行以下命令，查看是否在 docker.service 文件中配置过镜像地址</span><br>systemctl <span class="hljs-built_in">cat</span> docker | grep <span class="hljs-string">&#x27;\-\-registry\-mirror&#x27;</span><br><br><span class="hljs-comment">#如果该命令有输出，那么执行 systemctl cat docker 查看 ExecStart= 出现的位置，修改对应的文件内容去掉 --registry-mirror 参数及其值，并按接下来的步骤进行配置</span><br><br><span class="hljs-comment">#如果以上命令没有任何输出，那么就可以在 /etc/docker/daemon.json 中写入如下内容</span><br>vim /etc/docker/daemon.json<br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<br>    <span class="hljs-string">&quot;https://hub-mirror.c.163.com&quot;</span>,<br>    <span class="hljs-string">&quot;https://mirror.baidubce.com&quot;</span><br>  ]<br>&#125;<br><br><span class="hljs-comment">#重新启动服务</span><br>sudo systemctl daemon-reload &amp;&amp; sudo systemctl restart docker<br><br><span class="hljs-comment">#启动Docker,并开机自启</span><br>sudo systemctl start docker<br>sudo systemctl <span class="hljs-built_in">enable</span> docker<br><br><span class="hljs-comment">#查看Docker版本</span><br>docker -v<br><br><span class="hljs-comment">#通过运行hello-world 映像验证 Docker Engine 是否已正确安装</span><br>sudo docker run hello-world<br><span class="hljs-comment">#内容输出信息：</span><br>Unable to find image <span class="hljs-string">&#x27;hello-world:latest&#x27;</span> locally<br>latest: Pulling from library/hello-world<br>b8dfde127a29: Pull complete <br>Digest: sha256:0fe98d7debd9049c50b597ef1f85b7c1e8cc81f59c8d623fcb2250e8bec85b38<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> hello-world:latest<br><br>Hello from Docker!<span class="hljs-comment">#输出此信息表示Docker已正常运行</span><br>This message shows that your installation appears to be working correctly.<br><br>To generate this message, Docker took the following steps:<br> 1. The Docker client contacted the Docker daemon.<br> 2. The Docker daemon pulled the <span class="hljs-string">&quot;hello-world&quot;</span> image from the Docker Hub.<br>    (amd64)<br> 3. The Docker daemon created a new container from that image <span class="hljs-built_in">which</span> runs the<br>    executable that produces the output you are currently reading.<br> 4. The Docker daemon streamed that output to the Docker client, <span class="hljs-built_in">which</span> sent it<br>    to your terminal.<br><br>To try something more ambitious, you can run an Ubuntu container with:<br> $ docker run -it ubuntu bash<br><br>Share images, automate workflows, and more with a free Docker ID:<br> https://hub.docker.com/<br><br>For more examples and ideas, visit:<br> https://docs.docker.com/get-started/<br> <br> <span class="hljs-comment">#查看已有镜像</span><br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>hello-world         latest              d1165f221234        5 months ago        13.3kB<br><br></code></pre></td></tr></table></figure>    </div></div><hr><h4 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h4><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#Docker启动镜像</span><br><span class="hljs-comment">#查看可下载的nginx镜像有哪些</span><br>[root@docker ~]<span class="hljs-comment"># docker search nginx</span><br><br><span class="hljs-comment">#下载nginx-1.16版本镜像</span><br>[root@docker ~]<span class="hljs-comment"># docker pull nginx:1.16</span><br><br><span class="hljs-comment">#查看刚下载的nginx镜像</span><br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>hello-world         latest              d1165f221234        5 months ago        13.3kB<br>nginx               1.16                dfcfd8e9a5d3        15 months ago       127MB<br><br><span class="hljs-comment">#运行nginx镜像，运行分为两种方式：</span><br><span class="hljs-comment">#-d ：后台运行   </span><br><span class="hljs-comment">#-it : 交互式运行</span><br><span class="hljs-comment">#--name : 给启动的镜像命名</span><br>[root@docker ~]<span class="hljs-comment"># docker run -d --name nginx-test01 dfcfd8e9a5d3</span><br>891162d04f1244cd618fccdf24d1382dd1e794834ec9ee22f682a2d6aebbe58e<br><br><span class="hljs-comment">#查看正在运行的容器</span><br>[root@docker ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS               NAMES<br>891162d04f12        dfcfd8e9a5d3        <span class="hljs-string">&quot;nginx -g &#x27;daemon of…&quot;</span>   About a minute ago   Up About a minute   80/tcp              nginx-test01<br><br><span class="hljs-comment">#进入后台运行的容器</span><br>[root@docker ~]<span class="hljs-comment"># docker exec -it 891162d04f12 /bin/bash</span><br>root@891162d04f12:/<span class="hljs-comment"># ls</span><br>bin  boot  devetc  home  liblib64  media  mnt  optproc  root  run  sbin  srv  sys  tmp  usr  var<br><br><span class="hljs-comment">#停止容器</span><br>[root@docker ~]<span class="hljs-comment"># docker stop 891162d04f12</span><br>891162d04f12<br>[root@docker ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES<br><br><span class="hljs-comment">#运行容器</span><br>[root@docker ~]<span class="hljs-comment"># docker start 891162d04f12</span><br>891162d04f12<br>[root@docker ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES<br>891162d04f12        dfcfd8e9a5d3        <span class="hljs-string">&quot;nginx -g &#x27;daemon of…&quot;</span>   5 minutes ago       Up 3 seconds        80/tcp              nginx-test01<br><br><span class="hljs-comment">#删除容器</span><br><span class="hljs-comment">#删除运行中的容器/已停止的容器</span><br>[root@docker ~]<span class="hljs-comment"># docker run -d --name nginx-test02 dfcfd8e9a5d3</span><br>15e778a5bb491aa18e6aa2e29783f591489a59be927e4da99cd9809df4871ac3<br>[root@docker ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES<br>15e778a5bb49        dfcfd8e9a5d3        <span class="hljs-string">&quot;nginx -g &#x27;daemon of…&quot;</span>   7 seconds ago       Up 6 seconds        80/tcp              nginx-test02<br>891162d04f12        dfcfd8e9a5d3        <span class="hljs-string">&quot;nginx -g &#x27;daemon of…&quot;</span>   8 minutes ago       Up 4 minutes        80/tcp              nginx-test01<br>[root@docker ~]<span class="hljs-comment"># docker stop 891162d04f12</span><br>891162d04f12<br>[root@docker ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES<br>15e778a5bb49        dfcfd8e9a5d3        <span class="hljs-string">&quot;nginx -g &#x27;daemon of…&quot;</span>   25 seconds ago      Up 24 seconds       80/tcp              nginx-test02<br><br><span class="hljs-comment">#以下信息可知：已停止的容器可以直接删除，而正在运行中的容器不能直接删除</span><br>[root@docker ~]<span class="hljs-comment"># docker rm 891162d04f12</span><br>891162d04f12<br>[root@docker ~]<span class="hljs-comment"># docker rm 15e778a5bb49</span><br>Error response from daemon: You cannot remove a running container 15e778a5bb491aa18e6aa2e29783f591489a59be927e4da99cd9809df4871ac3. Stop the container before attempting removal or force remove<br><br><br><span class="hljs-comment">#强制删除正在运行中的容器</span><br>[root@docker ~]<span class="hljs-comment"># docker rm -f 15e778a5bb49</span><br>15e778a5bb49<br><br><span class="hljs-comment">#列出所有容器ID</span><br><span class="hljs-comment">#-a ：查询本机所有的容器，不管容器是否在运行</span><br><span class="hljs-comment">#-qa ：列出所有的容器ID</span><br>[root@docker ~]<span class="hljs-comment"># docker ps -qa</span><br>0142d564b60a<br>8416fc8c0973<br><br><span class="hljs-comment">#强制删除所有容器</span><br>[root@docker ~]<span class="hljs-comment"># docker rm -f $(docker ps -qa)</span><br>0142d564b60a<br>8416fc8c0973<br>[root@docker ~]<span class="hljs-comment"># docker ps -qa</span><br>[root@docker ~]<span class="hljs-comment"># </span><br><br><span class="hljs-comment">#删除镜像</span><br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>hello-world         latest              d1165f221234        5 months ago        13.3kB<br>nginx               1.16                dfcfd8e9a5d3        15 months ago       127MB<br>[root@docker ~]<span class="hljs-comment"># docker rmi d1165f221234</span><br>Untagged: hello-world:latest<br>Untagged: hello-world@sha256:0fe98d7debd9049c50b597ef1f85b7c1e8cc81f59c8d623fcb2250e8bec85b38<br>Deleted: sha256:d1165f2212346b2bab48cb01c1e39ee8ad1be46b87873d9ca7a4e434980a7726<br>Deleted: sha256:f22b99068db93900abe17f7f5e09ec775c2826ecfe9db961fea68293744144bd<br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>nginx               1.16                dfcfd8e9a5d3        15 months ago       127MB<br><br><span class="hljs-comment">#批量删除镜像</span><br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>hello-world         latest              d1165f221234        5 months ago        13.3kB<br>nginx               1.16                dfcfd8e9a5d3        15 months ago       127MB<br>[root@docker ~]<span class="hljs-comment"># docker images -qa</span><br>d1165f221234<br>dfcfd8e9a5d3<br>[root@docker ~]<span class="hljs-comment"># docker rmi $(docker images -qa)</span><br>Untagged: nginx:1.16<br>Untagged: nginx@sha256:d20aa6d1cae56fd17cd458f4807e0de462caf2336f0b70b5eeb69fcaaf30dd9c<br>Deleted: sha256:dfcfd8e9a5d38fb82bc8f9c299beba2df2232b7712b62875d5238cead7a5831c<br>Deleted: sha256:d02bd10c7ab368ff7c09eae1c0ac63b139cdd909d035c2acf15dbdfec2324c26<br>Deleted: sha256:444aa1698480236e67460ed344a57863965a03bb389d2478a137c97147b50765<br>Deleted: sha256:c2adabaecedbda0af72b153c6499a0555f3a769d52370469d8f6bd6328af9b13<br>Error response from daemon: conflict: unable to delete d1165f221234 (must be forced) - image is being used by stopped container 0ffef7c89201<br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>hello-world         latest              d1165f221234        5 months ago        13.3kB<br><br><span class="hljs-comment">#由此可知，正在被使用的镜像是不能直接删除的，必须先删除以该镜像运行的容器，再删除镜像</span><br>[root@docker ~]<span class="hljs-comment"># docker ps -qa</span><br>0ffef7c89201<br>[root@docker ~]<span class="hljs-comment"># docker rm -f $(docker ps -qa)</span><br>0ffef7c89201<br>[root@docker ~]<span class="hljs-comment"># docker ps -qa</span><br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>hello-world         latest              d1165f221234        5 months ago        13.3kB<br>[root@docker ~]<span class="hljs-comment"># docker rmi $(docker images -qa)</span><br>Untagged: hello-world:latest<br>Untagged: hello-world@sha256:0fe98d7debd9049c50b597ef1f85b7c1e8cc81f59c8d623fcb2250e8bec85b38<br>Deleted: sha256:d1165f2212346b2bab48cb01c1e39ee8ad1be46b87873d9ca7a4e434980a7726<br>Deleted: sha256:f22b99068db93900abe17f7f5e09ec775c2826ecfe9db961fea68293744144bd<br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br><br></code></pre></td></tr></table></figure>    </div></div><hr><h4 id="容器部署nginx"><a href="#容器部署nginx" class="headerlink" title="容器部署nginx"></a>容器部署nginx</h4><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#Docker启动nginx镜像并测试访问</span><br>[root@docker ~]<span class="hljs-comment"># docker pull nginx:1.16</span><br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>nginx               1.16                dfcfd8e9a5d3        15 months ago       127MB<br><br><span class="hljs-comment">#后台运行nginx，并配置端口映射</span><br><span class="hljs-comment">#-p ：端口映射主机端口:容器端口</span><br>[root@docker ~]<span class="hljs-comment"># docker run -d --name nginx-test03 -p 8888:80 dfcfd8e9a5d3</span><br>[root@docker ~]<span class="hljs-comment"># curl localhost:8888</span><br>&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;<span class="hljs-built_in">head</span>&gt;<br>&lt;title&gt;Welcome to nginx!&lt;/title&gt;<br>...........<br><br><span class="hljs-comment">#停止nginx容器，重新测试访问</span><br>[root@docker ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES<br>802cf357ac21        dfcfd8e9a5d3        <span class="hljs-string">&quot;nginx -g &#x27;daemon of…&quot;</span>   10 minutes ago      Up 10 minutes       0.0.0.0:8888-&gt;80/tcp   nginx-test03<br>[root@docker ~]<span class="hljs-comment"># docker stop 802cf357ac21</span><br>802cf357ac21<br>[root@docker ~]<span class="hljs-comment"># curl localhost:8888</span><br>curl: (7) Failed connect to localhost:8888; Connection refused<br><br>             1.16                dfcfd8e9a5d3        15 months ago       127MB<br><br></code></pre></td></tr></table></figure>    </div></div><hr><h4 id="镜像导入导出"><a href="#镜像导入导出" class="headerlink" title="镜像导入导出"></a>镜像导入导出</h4><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#镜像导出与导入</span><br><span class="hljs-comment">#镜像导出</span><br>[root@docker ~]<span class="hljs-comment"># docker images </span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>nginx               1.16                dfcfd8e9a5d3        15 months ago       127MB<br>[root@docker ~]<span class="hljs-comment"># docker save -o /data/nginx.tar nginx:1.16</span><br>[root@docker ~]<span class="hljs-comment"># ll -h /data/</span><br>total 125M<br>-rw------- 1 root root 125M Aug 14 16:25 nginx.tar<br><br><span class="hljs-comment">#镜像导入</span><br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>nginx               1.16                dfcfd8e9a5d3        15 months ago       127MB<br>[root@docker ~]<span class="hljs-comment"># docker ps -qa</span><br>[root@docker ~]<span class="hljs-comment"># docker rmi dfcfd8e9a5d3</span><br>Untagged: nginx:1.16<br>Untagged: nginx@sha256:d20aa6d1cae56fd17cd458f4807e0de462caf2336f0b70b5eeb69fcaaf30dd9c<br>Deleted: sha256:dfcfd8e9a5d38fb82bc8f9c299beba2df2232b7712b62875d5238cead7a5831c<br>Deleted: sha256:d02bd10c7ab368ff7c09eae1c0ac63b139cdd909d035c2acf15dbdfec2324c26<br>Deleted: sha256:444aa1698480236e67460ed344a57863965a03bb389d2478a137c97147b50765<br>Deleted: sha256:c2adabaecedbda0af72b153c6499a0555f3a769d52370469d8f6bd6328af9b13<br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE <br>[root@docker ~]<span class="hljs-comment"># docker load -i /data/nginx.tar </span><br>c2adabaecedb: Loading layer [==================================================&gt;]  72.49MB/72.49MB<br>82068c842707: Loading layer [==================================================&gt;]  58.02MB/58.02MB<br>c23548ea0b99: Loading layer [==================================================&gt;]  3.584kB/3.584kB<br>Loaded image: nginx:1.16<br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>nginx               1.16                dfcfd8e9a5d3        15 months ago       127MB<br>[root@docker ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES<br>[root@docker ~]<span class="hljs-comment"># docker run -it --name nginx-test04 dfcfd8e9a5d3 /bin/bash </span><br>root@6eb86872540d:/<span class="hljs-comment"># ls</span><br>bin  boot  devetc  home  liblib64  media  mnt  optproc  root  run  sbin  srv  sys  tmp  usr  var<br><br><span class="hljs-comment">#交互状态下进入容器，exit退出后容器将随之释放，若想退出容器且容器仍继续运行，可使用 Ctrl + q + p 组合键退出</span><br><span class="hljs-comment">#退出后使用 exec 可重新进入容器</span><br>[root@docker ~]<span class="hljs-comment"># docker exec -it 4669926e89e9 /bin/bash</span><br>root@4669926e89e9:/<span class="hljs-comment"># exit</span><br><span class="hljs-built_in">exit</span><br>[root@docker ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES<br>4669926e89e9        dfcfd8e9a5d3        <span class="hljs-string">&quot;/bin/bash&quot;</span>         3 minutes ago       Up 3 minutes        80/tcp              nginx-test05<br></code></pre></td></tr></table></figure>    </div></div><hr><h3 id="Docker-compose安装"><a href="#Docker-compose安装" class="headerlink" title="Docker-compose安装"></a>Docker-compose安装</h3><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#终端命令下载可能会很慢，因此也可以在网页中下载好上传</span><br>[root@docker ~]<span class="hljs-comment"># sudo curl -L https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-linux-x86_64 &gt;/usr/local/bin/docker-compose</span><br><br><span class="hljs-comment">#添加执行权限</span><br>[root@docker ~]<span class="hljs-comment"># sudo chmod +x /usr/local/bin/docker-compose</span><br><br><span class="hljs-comment">#查看版本</span><br>[root@docker ~]<span class="hljs-comment"># docker-compose -v</span><br>Docker Compose version v2.2.2<br><br><span class="hljs-comment">#事先下载好一个tomcat镜像</span><br>[root@docker ~]<span class="hljs-comment"># docker pull tomcat:8.0</span><br>8.0: Pulling from library/tomcat<br>1aea3d9a32e6: Pull complete <br>Digest: sha256:8ecb10948deb32c34aeadf7bf95d12a93fbd3527911fa629c1a3e7823b89ce6f<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> tomcat:8.0<br>docker.io/library/tomcat:8.0<br>[root@docker ~]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>tomcat              8.0                 ef6a7c98d192        3 years ago         356MB<br><br>[root@docker ~]<span class="hljs-comment"># mkdir -p /data/docker/</span><br>[root@docker ~]<span class="hljs-comment"># cd /data/docker/</span><br><br><span class="hljs-comment">#编辑第一个docker compose文件</span><br>[root@docker docker]<span class="hljs-comment"># vim docker-compose.yml</span><br>version: <span class="hljs-string">&quot;3.6&quot;</span><br>services:<br>        tomcat:<span class="hljs-comment">#名称保持唯一</span><br>                image: tomcat:8.0<span class="hljs-comment">#镜像名称:tag</span><br>                ports:<br>                        - <span class="hljs-string">&quot;8080:8080&quot;</span><span class="hljs-comment">#映射 主机端口:容器端口</span><br>                        <br><span class="hljs-comment">#运行docker compose时要确保当前路径下有docker-compose.yml文件</span><br><span class="hljs-comment">#使用docker-compose up 可启动所有</span><br><span class="hljs-comment">#而使用 -f 选项可选择只运行指定的docker-compose.yml文件</span><br>[root@docker docker]<span class="hljs-comment"># docker-compose -f docker-compose.yml up</span><br>[+] Running 2/2<br> ⠿ Network docker_default     Created                                                                                 0.1s<br> ⠿ Container docker-tomcat-1  Created                                                                                 0.0s<br>Attaching to docker-tomcat-1<br><br><span class="hljs-comment">#另开一个终端，访问页面正常</span><br>[root@docker docker]<span class="hljs-comment"># curl http://192.168.40.30:8080</span><br>&lt;!DOCTYPE html&gt;<br>&lt;html lang=<span class="hljs-string">&quot;en&quot;</span>&gt;<br>    &lt;<span class="hljs-built_in">head</span>&gt;<br>        &lt;meta charset=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;<br>        &lt;title&gt;Apache Tomcat/8.0.53&lt;/title&gt;<br>        &lt;<span class="hljs-built_in">link</span> href=<span class="hljs-string">&quot;favicon.ico&quot;</span> rel=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;image/x-icon&quot;</span> /&gt;<br>        &lt;<span class="hljs-built_in">link</span> href=<span class="hljs-string">&quot;favicon.ico&quot;</span> rel=<span class="hljs-string">&quot;shortcut icon&quot;</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;image/x-icon&quot;</span> /&gt;<br>        &lt;<span class="hljs-built_in">link</span> href=<span class="hljs-string">&quot;tomcat.css&quot;</span> rel=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;text/css&quot;</span> /&gt;<br>    &lt;/head&gt;<br>.......................................<br><br><span class="hljs-comment">#当之前运行docker compose文件的终端被ctrl +c后，访问便会立刻失败</span><br>..............................<br>docker-tomcat-1  | 29-Dec-2021 00:31:55.585 INFO [main] org.apache.catalina.startup.Catalina.start Server startup <span class="hljs-keyword">in</span> 1470 ms<br>^CGracefully stopping... (press Ctrl+C again to force)<br>[+] Running 1/1<br> ⠿ Container docker-tomcat-1  Stopped                                                                                                                                                     0.8s<br>canceled<br><br>[root@docker docker]<span class="hljs-comment"># curl http://192.168.40.30:8080</span><br>curl: (7) Failed connect to 192.168.40.30:8080; Connection refused<br></code></pre></td></tr></table></figure>    </div></div><hr><h3 id="Docker-compose运行多个服务"><a href="#Docker-compose运行多个服务" class="headerlink" title="Docker-compose运行多个服务"></a>Docker-compose运行多个服务</h3><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#运行多个服务</span><br>[root@docker docker]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>tomcat              8.0                 ef6a7c98d192        3 years ago         356MB<br>[root@docker docker]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES<br>[root@docker docker]<span class="hljs-comment"># docker pull nginx:1.18</span><br>1.18: Pulling from library/nginx<br>f7ec5a41d630: Pull complete  <br>Digest: sha256:e90ac5331fe095cea01b121a3627174b2e33e06e83720e9a934c7b8ccc9c55a0<br>Status: Downloaded newer image <span class="hljs-keyword">for</span> nginx:1.18<br>docker.io/library/nginx:1.18<br><br>[root@docker docker]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>nginx               1.18                c2c45d506085        8 months ago        133MB<br>tomcat              8.0                 ef6a7c98d192        3 years ago         356MB<br><br>[root@docker docker]<span class="hljs-comment"># vim docker-compose.yml</span><br>version: <span class="hljs-string">&quot;3.6&quot;</span><br>services:<br>        tomcat:<br>                image: tomcat:8.0<br>                ports:<br>                        - <span class="hljs-string">&quot;8080:8080&quot;</span><br>        nginx:<br>                image: nginx:1.18<br>                ports:<br>                        - <span class="hljs-string">&quot;80:80&quot;</span><br>                        <br>[root@docker docker]<span class="hljs-comment"># docker-compose up</span><br>[+] Running 2/0<br> ⠿ Container docker-nginx-1   Created                                                                                                                                                     0.0s<br> ⠿ Container docker-tomcat-1  Created                                                                                                                                                     0.0s<br>Attaching to docker-nginx-1, docker-tomcat-1<br>...............................<br><br><br><span class="hljs-comment">#在另外一个终端查看正在运行的容器信息</span><br>[root@docker docker]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES<br>e37bba3b9afb        nginx:1.18          <span class="hljs-string">&quot;/docker-entrypoint.…&quot;</span>   28 seconds ago      Up 25 seconds       0.0.0.0:80-&gt;80/tcp       docker-nginx-1<br>2baa4522c182        tomcat:8.0          <span class="hljs-string">&quot;catalina.sh run&quot;</span>        18 minutes ago      Up 25 seconds       0.0.0.0:8080-&gt;8080/tcp   docker-tomcat-1<br><br><span class="hljs-comment">#访问测试正常</span><br>[root@docker docker]<span class="hljs-comment"># curl http://192.168.40.30:8080</span><br>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current<br>                                 Dload  Upload   Total   Spent    Left  Speed<br>100 11266    0 11266    0     0  76423      0 --:--:-- --:--:-- --:--:-- 76121<br>.................................<br>[root@docker docker]<span class="hljs-comment"># curl http://192.168.40.30:80</span><br>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current<br>                                 Dload  Upload   Total   Spent    Left  Speed<br>100   612  100   612    0     0   492k      0 --:--:-- --:--:-- --:--:--  597k<br>........................................<br><br></code></pre></td></tr></table></figure>    </div></div><hr><h3 id="compose映射路径启动服务"><a href="#compose映射路径启动服务" class="headerlink" title="compose映射路径启动服务"></a>compose映射路径启动服务</h3><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#绝对路径映射</span><br>[root@docker docker]<span class="hljs-comment"># vim docker-compose02.yml</span><br>version: <span class="hljs-string">&quot;3.6&quot;</span><br>services:<br>        tomcat:<br>                image: tomcat:8.0<br>                ports:<br>                        - <span class="hljs-string">&quot;8080:8080&quot;</span><br>                volumes:<br>                        - /data/docker/file:/data<br>                        <br><span class="hljs-comment">#运行</span><br>[root@docker docker]<span class="hljs-comment"># docker-compose -f docker-compose02.yml up</span><br>WARN[0000] Found orphan containers ([docker-nginx-1]) <span class="hljs-keyword">for</span> this project. If you removed or renamed this service <span class="hljs-keyword">in</span> your compose file, you can run this <span class="hljs-built_in">command</span> with the --remove-orphans flag to clean it up. <br>[+] Running 1/1<br> ⠿ Container docker-tomcat-1  Recreated                                                                                                                                                   0.1s<br>Attaching to docker-tomcat-1<br><br><span class="hljs-comment">#在另一个终端查看</span><br>[root@docker docker]<span class="hljs-comment"># echo &quot;123&quot; &gt;&gt; /data/docker/file/1.txt</span><br>[root@docker docker]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                    NAMES<br>4c4424faccc6        tomcat:8.0          <span class="hljs-string">&quot;catalina.sh run&quot;</span>   2 minutes ago       Up 2 minutes        0.0.0.0:8080-&gt;8080/tcp   docker-tomcat-1<br>[root@docker docker]<span class="hljs-comment"># docker exec -it 4c bash</span><br>root@4c4424faccc6:/usr/local/tomcat<span class="hljs-comment"># cat /data/1.txt </span><br>123<br><br><span class="hljs-comment">#自定义路径映射</span><br>[root@docker docker]<span class="hljs-comment"># vim docker-compose02.yml</span><br>version: <span class="hljs-string">&quot;3.6&quot;</span><br>services:<br>        tomcat:<br>                image: tomcat:8.0<br>                ports:<br>                        - <span class="hljs-string">&quot;8080:8080&quot;</span><br>                volumes:<br>                        - testfile:/data<span class="hljs-comment">#自定义路径映射</span><br>volumes:<span class="hljs-comment">#声明上面服务使用的自定义卷名</span><br>        testfile:<span class="hljs-comment">#所声明的卷名名称，compose在创建此卷名时会在其名称前加上项目名(compose文件父目录名称)</span><br>        <br><span class="hljs-comment">#运行</span><br>[root@docker docker]<span class="hljs-comment"># docker-compose -f docker-compose02.yml up</span><br>WARN[0000] Found orphan containers ([docker-nginx-1]) <span class="hljs-keyword">for</span> this project. If you removed or renamed this service <span class="hljs-keyword">in</span> your compose file, you can run this <span class="hljs-built_in">command</span> with the --remove-orphans flag to clean it up. <br>[+] Running 2/2<br> ⠿ Volume <span class="hljs-string">&quot;docker_testfile&quot;</span>   Created                                                                                                                                                     0.0s<br> ⠿ Container docker-tomcat-1  Recreated                                                                                                                                                   0.1s<br>Attaching to docker-tomcat-1<br><br><span class="hljs-comment">#在另外一个终端查看正在运行的容器信息</span><br>[root@docker docker]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                    NAMES<br>5d8a5e39d85a        tomcat:8.0          <span class="hljs-string">&quot;catalina.sh run&quot;</span>   4 minutes ago       Up 4 minutes        0.0.0.0:8080-&gt;8080/tcp   docker-tomcat-1<br>[root@docker docker]<span class="hljs-comment"># docker exec -it 5d bash</span><br>root@5d8a5e39d85a:/usr/local/tomcat<span class="hljs-comment"># cd /data/</span><br>root@5d8a5e39d85a:/data<span class="hljs-comment"># ls</span><br>root@5d8a5e39d85a:/data<span class="hljs-comment"># echo &quot;123&quot; &gt;&gt; 2.txt</span><br>root@5d8a5e39d85a:/data<span class="hljs-comment"># exit</span><br><span class="hljs-built_in">exit</span><br>[root@docker docker]<span class="hljs-comment"># find / -name &quot;2.txt&quot;</span><br>/var/lib/docker/volumes/docker_testfile/_data/2.txt<br></code></pre></td></tr></table></figure>    </div></div><hr><h3 id="name"><a href="#name" class="headerlink" title="name"></a>name</h3><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@docker docker]<span class="hljs-comment"># vim docker-compose02.yml</span><br>version: <span class="hljs-string">&quot;3.6&quot;</span><br>services:<br>        tomcat:<br>                image: tomcat:8.0<br>                ports:<br>                        - <span class="hljs-string">&quot;8080:8080&quot;</span><br>                volumes:<br>                        - tomcatfile:/data<br>                container_name: tomcat1229<br>        nginx:<br>                image: nginx:1.18<br>                ports:<br>                        - <span class="hljs-string">&quot;80:80&quot;</span><br>                volumes:<br>                        - nginxfile:/data<br>                container_name: nginx1229<br>volumes:<br>        tomcatfile:<br>        nginxfile:<br>       <br><span class="hljs-comment">#启动</span><br>[root@docker docker]<span class="hljs-comment"># docker-compose -f docker-compose02.yml up</span><br>[+] Running 4/4<br> ⠿ Volume <span class="hljs-string">&quot;docker_tomcatfile&quot;</span>  Created                                                                                0.0s<br> ⠿ Volume <span class="hljs-string">&quot;docker_nginxfile&quot;</span>   Created                                                                                0.0s<br> ⠿ Container docker-nginx-1    Recreated                                                                              0.1s<br> ⠿ Container docker-tomcat-1   Recreated                                                                              0.1s<br>Attaching to nginx1229, tomcat1229<br><br><span class="hljs-comment">#在另外一个终端查看正在运行的容器信息</span><br>[root@docker ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES<br>033ebdb662a1        nginx:1.18          <span class="hljs-string">&quot;/docker-entrypoint.…&quot;</span>   17 seconds ago      Up 15 seconds       0.0.0.0:80-&gt;80/tcp       nginx1229<br>20152b550379        tomcat:8.0          <span class="hljs-string">&quot;catalina.sh run&quot;</span>        17 seconds ago      Up 15 seconds       0.0.0.0:8080-&gt;8080/tcp   tomcat1229<br><br>[root@docker ~]<span class="hljs-comment"># docker exec -it 033ebdb662a1 bash</span><br>root@033ebdb662a1:/<span class="hljs-comment"># curl http://tomcat1229:8080</span><br>&lt;!DOCTYPE html&gt;<br>&lt;html lang=<span class="hljs-string">&quot;en&quot;</span>&gt;<br>    &lt;<span class="hljs-built_in">head</span>&gt;<br>        &lt;meta charset=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;<br>...................<br><br><span class="hljs-comment">#网络</span><br>[root@docker docker]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>nginx               1.18                c2c45d506085        8 months ago        133MB<br>tomcat              8.0                 ef6a7c98d192        3 years ago         356MB<br><br>[root@docker docker]<span class="hljs-comment"># vim docker-compose02.yml </span><br>version: <span class="hljs-string">&quot;3.6&quot;</span><br>services:<br>        tomcat:<br>                image: tomcat:8.0<br>                ports:<br>                        - <span class="hljs-string">&quot;28080:8080&quot;</span><br>                volumes:<br>                        - tomcatfile:/usr/local/tomcat<br>                container_name: tomcat1229<br>                networks:<br>                        - docker_test<br>        nginx:<br>                image: nginx:1.18<br>                ports:<br>                        - <span class="hljs-string">&quot;280:80&quot;</span><br>                volumes:<br>                        - nginxfile:/usr/local/nginx<br>                container_name: nginx1229<br>                networks:<br>                        - docker_test<br>        mysql:<br>                image: mysql:5.7<br>                ports:<br>                        - <span class="hljs-string">&quot;23306:3306&quot;</span><br>                volumes:<br>                        - mysqlfile:/usr/local/mysql<br>                container_name: mysql1229<br>                networks:<br>                        - docker_test<br>volumes:<br>        tomcatfile:<br>        nginxfile:<br>        mysqlfile:<br>networks:<br>        docker_test:<br>        <br><span class="hljs-comment">#启动，mysql的镜像会在启动compose时自动帮我们下载        </span><br>[root@docker docker]<span class="hljs-comment"># docker-compose -f docker-compose02.yml up</span><br>[+] Running 12/12<br> ⠿ mysql Pulled                                                                       115.3s<br>   ⠿ 72a69066d2fe Pull complete                                                        19.1s<br>   ⠿ 70deed891d42 Pull complete                                                       110.9s<br>[+] Running 5/5<br> ⠿ Network docker_docker_test  Created                                                  0.1s<br> ⠿ Volume <span class="hljs-string">&quot;docker_mysqlfile&quot;</span>   Created                                                  0.0s<br> ⠿ Container mysql1229         Created                                                  0.4s<br> ⠿ Container tomcat1229        Recreated                                                0.6s<br> ⠿ Container nginx1229         Recreated                                                0.4s<br>Attaching to mysql1229, nginx1229, tomcat1229<br><span class="hljs-comment">#数据库并未成功启动，因为未设置密码</span><br>mysql1229   | 2021-12-29 02:26:38+00:00 [ERROR] [Entrypoint]: Database is uninitialized and password option is not specified<br>mysql1229   |     You need to specify one of the following:<br>mysql1229   |     - MYSQL_ROOT_PASSWORD<br>mysql1229   |     - MYSQL_ALLOW_EMPTY_PASSWORD<br>mysql1229   |     - MYSQL_RANDOM_ROOT_PASSWORD<br>mysql1229 exited with code 1<br><br><span class="hljs-comment">#在另外一个终端查看正在运行的容器信息</span><br>[root@docker docker]<span class="hljs-comment"># docker images</span><br>REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE<br>mysql               5.7                 c20987f18b13        8 days ago          448MB<br>nginx               1.18                c2c45d506085        8 months ago        133MB<br>tomcat              8.0                 ef6a7c98d192        3 years ago         356MB<br>[root@docker docker]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                     NAMES<br>5f2f958be986        nginx:1.18          <span class="hljs-string">&quot;/docker-entrypoint.…&quot;</span>   5 minutes ago       Up 5 minutes        0.0.0.0:280-&gt;80/tcp       nginx1229<br>3122d3ed7bce        tomcat:8.0          <span class="hljs-string">&quot;catalina.sh run&quot;</span>        5 minutes ago       Up 5 minutes        0.0.0.0:28080-&gt;8080/tcp   tomcat1229<br><br><span class="hljs-comment">#根据报错提示，修改mysql的配置</span><br>[root@docker docker]<span class="hljs-comment"># vim docker-compose02.yml </span><br><br>version: <span class="hljs-string">&quot;3.6&quot;</span><br>services:<br>        tomcat:<br>                image: tomcat:8.0<br>                ports:<br>                        - <span class="hljs-string">&quot;28080:8080&quot;</span><br>                volumes:<br>                        - tomcatfile:/usr/local/tomcat<br>                container_name: tomcat1229<br>                networks:<br>                        - docker_test<br>        nginx:<br>                image: nginx:1.18<br>                ports:<br>                        - <span class="hljs-string">&quot;280:80&quot;</span><br>                volumes:<br>                        - nginxfile:/usr/local/nginx<br>                container_name: nginx1229<br>                networks:<br>                        - docker_test<br>        mysql:<br>                image: mysql:5.7<br>                ports:<br>                        - <span class="hljs-string">&quot;23306:3306&quot;</span><br>                volumes:<br>                        - mysqlfile:/usr/local/mysql<br>                container_name: mysql1229<br>                networks:<br>                        - docker_test<br>                environment:<span class="hljs-comment">#添加两行</span><br>                        - MYSQL_ROOT_PASSWORD=123456<br>volumes:<br>        tomcatfile:<br>        nginxfile:<br>        mysqlfile:<br>networks:<br>        docker_test:<br>        <br>        <br><span class="hljs-comment">#重新启动</span><br>[root@docker docker]<span class="hljs-comment">#  docker-compose -f docker-compose02.yml up</span><br>[+] Running 3/3<br> ⠿ Container nginx1229   Running                                                                                                                                                          0.0s<br> ⠿ Container mysql1229   Recreated                                                                                                                                                        0.2s<br> ⠿ Container tomcat1229  Running                                                                                                                                                          0.0s<br>Attaching to mysql1229, nginx1229, tomcat1229<br><br><span class="hljs-comment">#在另外一个终端查看正在运行的容器信息</span><br>[root@docker docker]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS                                NAMES<br>1d67e25b7c2d        mysql:5.7           <span class="hljs-string">&quot;docker-entrypoint.s…&quot;</span>   About a minute ago   Up 11 seconds       33060/tcp, 0.0.0.0:23306-&gt;3306/tcp   mysql1229<br>5f2f958be986        nginx:1.18          <span class="hljs-string">&quot;/docker-entrypoint.…&quot;</span>   13 minutes ago       Up 11 seconds       0.0.0.0:280-&gt;80/tcp                  nginx1229<br>3122d3ed7bce        tomcat:8.0          <span class="hljs-string">&quot;catalina.sh run&quot;</span>        13 minutes ago       Up 11 seconds       0.0.0.0:28080-&gt;8080/tcp              tomcat1229<br><br>[root@docker docker]<span class="hljs-comment"># docker exec -it 1d bash</span><br>root@1d67e25b7c2d:/<span class="hljs-comment"># mysql -uroot -p123456</span><br>mysql: [Warning] Using a password on the <span class="hljs-built_in">command</span> line interface can be insecure.<br>Welcome to the MySQL monitor.  Commands end with ; or \g.<br>Your MySQL connection <span class="hljs-built_in">id</span> is 2<br>mysql&gt; <span class="hljs-built_in">exit</span><br><br><br>[root@docker docker]<span class="hljs-comment"># docker volume ls</span><br>DRIVER              VOLUME NAME<br><span class="hljs-built_in">local</span>               7d8a5c7ba17941d823509bb5485d300a751926847da6ecf48c18e8e47929901f<br><span class="hljs-built_in">local</span>               docker_mysqlfile<br><span class="hljs-built_in">local</span>               docker_nginxfile<br><span class="hljs-built_in">local</span>               docker_tomcatfile<br><br>[root@docker docker]<span class="hljs-comment"># docker inspect docker_mysqlfile</span><br>[<br>    &#123;<br>        <span class="hljs-string">&quot;CreatedAt&quot;</span>: <span class="hljs-string">&quot;2021-12-29T10:26:36+08:00&quot;</span>,<br>        <span class="hljs-string">&quot;Driver&quot;</span>: <span class="hljs-string">&quot;local&quot;</span>,<br>        <span class="hljs-string">&quot;Labels&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;com.docker.compose.project&quot;</span>: <span class="hljs-string">&quot;docker&quot;</span>,<br>            <span class="hljs-string">&quot;com.docker.compose.version&quot;</span>: <span class="hljs-string">&quot;2.2.2&quot;</span>,<br>            <span class="hljs-string">&quot;com.docker.compose.volume&quot;</span>: <span class="hljs-string">&quot;mysqlfile&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Mountpoint&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/volumes/docker_mysqlfile/_data&quot;</span>,<br>        <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;docker_mysqlfile&quot;</span>,<br>        <span class="hljs-string">&quot;Options&quot;</span>: null,<br>        <span class="hljs-string">&quot;Scope&quot;</span>: <span class="hljs-string">&quot;local&quot;</span><br>    &#125;<br>]<br><br></code></pre></td></tr></table></figure>    </div></div><hr><h3 id="env-file"><a href="#env-file" class="headerlink" title="env_file"></a>env_file</h3><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#之前配置mysql虽然成功启动服务，但存在一个安全隐患（配置文件中的内容暴露了mysql的登录密码）</span><br><span class="hljs-comment">#因此可将 environment 改为另一种写法，使其将密码隐藏在文件中</span><br>[root@docker docker]<span class="hljs-comment"># cat docker-compose02.yml </span><br>version: <span class="hljs-string">&quot;3.6&quot;</span><br>services:<br>.........<span class="hljs-comment">#其他服务配置省略不写，以下为原mysql配置内容</span><br>        mysql:<br>                image: mysql:5.7<br>                ports:<br>                        - <span class="hljs-string">&quot;23306:3306&quot;</span><br>                volumes:<br>                        - mysqlfile:/usr/local/mysql<br>                container_name: mysql1229<br>                networks:<br>                        - docker_test<br>                environment:<br>                        - MYSQL_ROOT_PASSWORD=123456<br>volumes:<br>        tomcatfile:<br>        nginxfile:<br>        mysqlfile:<br>networks:<br>        docker_test:<br>        <br>        <br>[root@docker docker]<span class="hljs-comment"># vim mysql.env</span><br>MYSQL_ROOT_PASSWORD=123456<br><br>[root@docker docker]<span class="hljs-comment"># vim docker-compose02.yml </span><br><br>version: <span class="hljs-string">&quot;3.6&quot;</span><br>services:<br>.........<span class="hljs-comment">#其他服务配置省略不写，以下为mysql修改后的配置内容</span><br>        mysql:<br>                image: mysql:5.7<br>                ports:<br>                        - <span class="hljs-string">&quot;23306:3306&quot;</span><br>                volumes:<br>                        - mysqlfile:/usr/local/mysql<br>                container_name: mysql1229<br>                networks:<br>                        - docker_test<br>                <span class="hljs-comment">#environment:</span><br>                <span class="hljs-comment">#        - MYSQL_ROOT_PASSWORD=123456</span><br>                env_file:<br>                        - mysql.env<br>volumes:<br>        tomcatfile:<br>        nginxfile:<br>        mysqlfile:<br>networks:<br>        docker_test:<br>        <br>        <br>[root@docker docker]<span class="hljs-comment"># docker-compose -f docker-compose02.yml up</span><br>[+] Running 3/3<br> ⠿ Container tomcat1229  Created                                                                                      0.0s<br> ⠿ Container nginx1229   Created                                                                                      0.0s<br> ⠿ Container mysql1229   Recreated                                                                                    0.2s<br>Attaching to mysql1229, nginx1229, tomcat1229<br><br><br><span class="hljs-comment">#在另外一个终端查看正在运行的容器信息</span><br>[root@docker ~]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                NAMES<br>acb4983f2d6c        mysql:5.7           <span class="hljs-string">&quot;docker-entrypoint.s…&quot;</span>   2 minutes ago       Up 2 minutes        33060/tcp, 0.0.0.0:23306-&gt;3306/tcp   mysql1229<br>86d379e203f6        tomcat:8.0          <span class="hljs-string">&quot;catalina.sh run&quot;</span>        5 days ago          Up 2 minutes        0.0.0.0:28080-&gt;8080/tcp              tomcat1229<br>5f2f958be986        nginx:1.18          <span class="hljs-string">&quot;/docker-entrypoint.…&quot;</span>   5 days ago          Up 2 minutes        0.0.0.0:280-&gt;80/tcp                  nginx1229<br>[root@docker ~]<span class="hljs-comment"># docker exec -it acb bash</span><br>root@acb4983f2d6c:/<span class="hljs-comment"># mysql -uroot -p123456</span><br>mysql&gt; <span class="hljs-built_in">exit</span><br></code></pre></td></tr></table></figure>    </div></div><hr><h3 id="容器编排"><a href="#容器编排" class="headerlink" title="容器编排"></a>容器编排</h3><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#编排容器启动顺序</span><br>[root@docker docker]<span class="hljs-comment"># docker rm -f $(docker ps -qa)</span><br><br>[root@docker docker]<span class="hljs-comment"># vim docker-compose03.yml </span><br>version: <span class="hljs-string">&quot;3.6&quot;</span><br>services:<br>        tomcat1:<br>                image: tomcat:8.0<br>                ports:<br>                        - <span class="hljs-string">&quot;28080:8080&quot;</span><br>                volumes:<br>                        - tomcatfile1:/usr/local/tomcat<br>                container_name: tomcat1229<br>                networks:<br>                        - docker_test<br>                depends_on:<span class="hljs-comment">#下面写服务名称而非容器名称,意思是让2和3先启动</span><br>                        - tomcat2<br>                        - tomcat3<br>        tomcat2:<br>                image: tomcat:8.0<br>                ports:<br>                        - <span class="hljs-string">&quot;38080:8080&quot;</span><br>                volumes:<br>                        - tomcatfile2:/usr/local/tomcat<br>                container_name: tomcat1230<br>                networks:<br>                        - docker_test<br>        tomcat3:<br>                image: tomcat:8.0<br>                ports:<br>                        - <span class="hljs-string">&quot;48080:8080&quot;</span><br>                volumes:<br>                        - tomcatfile3:/usr/local/tomcat<br>                container_name: tomcat1231<br>                networks:<br>                        - docker_test<br>volumes:<br>        tomcatfile1:<br>        tomcatfile2:<br>        tomcatfile3:<br>networks:<br>        docker_test:<br>        <br> <br><span class="hljs-comment">#启动容器，并从其输出的日志信息中可以观察到，tomcat1 会让 tomcat2 和 tomcat3 先启动，2和3启动一段时间但还未完全启动服务时，tomcat1才开始启动</span><br>[root@docker docker]<span class="hljs-comment"># docker-compose -f docker-compose03.yml up</span><br>[+] Running 3/3<br> ⠿ Container tomcat1231  Created                                                                                      0.1s<br> ⠿ Container tomcat1230  Created                                                                                      0.1s<br> ⠿ Container tomcat1229  Created                                                                                      0.1s<br>Attaching to tomcat1229, tomcat1230, tomcat1231<br>..................................<br></code></pre></td></tr></table></figure>    </div></div><hr><h3 id="docker-离线依赖包下载"><a href="#docker-离线依赖包下载" class="headerlink" title="docker 离线依赖包下载"></a>docker 离线依赖包下载</h3><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker 离线依赖包下载方法（全）附Docker的依赖包<br>yum -y install --downloadonly --downloaddir=/root/docker docker-ce<br><br>--downloadonly 只下载不安装   --downloaddir 下载后路径  docker-ce  服务名<br></code></pre></td></tr></table></figure>    </div></div><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Awk 示例</title>
    <link href="/p/awk-Example.html"/>
    <url>/p/awk-Example.html</url>
    
    <content type="html"><![CDATA[<h1 id="awk-范例"><a href="#awk-范例" class="headerlink" title="awk 范例"></a><strong>awk 范例</strong></h1><p id="hitokoto">获取中...</p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#原文件内容：</span><br>[root@CentOS8 data]<span class="hljs-comment"># cat emp.txt </span><br>Beth:4.00:0<br>Dan:3.75:0<br>kathy:4.00:10<br>Mark:5.00:20<br>Mary:5.50:22<br>Susie:4.25:18<br><br><span class="hljs-comment">#以 ：为分隔符搜索 emp.txt 文件中每行的 1,3字段，且打印至终端时在其中间以 tab键为字段分隔符来显示</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># awk -F&quot;:&quot; &#x27;&#123;print $1&quot;\t&quot;$3&#125;&#x27; emp.txt </span><br>Beth0<br>Dan0<br>kathy10<br>Mark20<br>Mary22<br>Susie18<br><br><span class="hljs-comment">#与-F作用相同的写法 -v FS=</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># awk -v FS=&quot;:&quot; &#x27;&#123;print $1&quot;\t&quot;$3&#125;&#x27; emp.txt </span><br>Beth0<br>Dan0<br>kathy10<br>Mark20<br>Mary22<br>Susie18<br><br><span class="hljs-comment">#指定 tab键 为字段分隔符显示 emp.txt 文件的1,3字段 OFS</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># awk -v OFS=&quot;\t&quot; -F&quot;:&quot; &#x27;&#123;print $1,$3&#125;&#x27; emp.txt </span><br>Beth0<br>Dan0<br>kathy10<br>Mark20<br>Mary22<br>Susie18<br><br><span class="hljs-comment">#同样也可以这样写：应注意有两个 -v</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># awk -v FS=&#x27;:&#x27; -v OFS=&#x27;\t&#x27; &#x27;&#123;print $1,$3&#125;&#x27; emp.txt </span><br>Beth0<br>Dan0<br>kathy10<br>Mark20<br>Mary22<br>Susie18<br><br><span class="hljs-comment">#另外，还可以输入记录分隔符，指定输入时的换行符</span><br><br><span class="hljs-comment">#例如：以 ；为记录分隔符，只要遇到 ；就将 ；换成\n换行</span><br><br><span class="hljs-comment">#应注意原文件每行结尾都有一个隐藏的\n换行符,输出结果仍将\n换行符视为某行的一部分</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># cat file.txt</span><br>student;liming<br>tech;wang;ma<br><br>[root@CentOS8 data]<span class="hljs-comment"># awk -v RS=&#x27;;&#x27; &#x27;&#123;print&#125;&#x27; file.txt </span><br>student<br>liming<br>tech<br>wang<br>ma<br><br><span class="hljs-comment">#那么如何证明这一点呢？</span><br><br><span class="hljs-comment">#输出行号一共为4行</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># awk -v RS=&#x27;;&#x27; &#x27;&#123;print NR&#125;&#x27; file.txt </span><br>1<br>2<br>3<br>4<br><br><span class="hljs-comment">#而之前的输出字符似乎是五行 ：</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># awk -v RS=&#x27;;&#x27; &#x27;&#123;print&#125;&#x27; file.txt </span><br>student<br>liming<br>tech<br>wang<br>ma<br><br><span class="hljs-comment">#结论证明：NR为显示行号，$0是显示每一行；意思是输出每一行并为其添加行号</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># awk -v RS=&#x27;;&#x27; &#x27;&#123;print $0,NR&#125;&#x27;le.txt </span><br>student 1<br>liming<br>tech 2<br>wang 3<br>ma<br> 4<br><br><span class="hljs-comment">#所以第一行的liming \n tech三者被视为同一新行，此外，ma后面依旧有一个隐藏的\n换行符</span><br><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#使用ORS输出记录分隔符，输出时用指定符号代替换行符  只要遇到 ；就将其替换成@@@输出</span><br><br><span class="hljs-comment">#若RS不指定，默认将行尾隐藏的\n换行符替换</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># awk -v RS=&#x27;;&#x27; -v ORS=&#x27;@@@&#x27;  &#x27;&#123;print $0&#125;&#x27; file.txt</span><br>student@@@liming<br>tech@@@wang@@@ma<br>@@@<br><br><br><span class="hljs-comment">#还可以使用NF来显示每一行的字段个数</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># awk -v RS=&#x27;;&#x27; &#x27;&#123;print NF&#125;&#x27; file.txt </span><br>1<br>2<br>1<br>1<br><br><span class="hljs-comment">#当然，如果不添加额外的选项，仅显示原文件的话，此时只有两行，如果该行中没有空格分隔字段，那么该行会被视为一个整体 即：一个字段</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># awk &#x27;&#123;print NF&#125;&#x27; file.txt </span><br>1<br>1<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#取出磁盘最大使用率</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># df -h|grep &#x27;dev/sd&#x27;|awk -F% &#x27;&#123;print $1&#125;&#x27;|awk &#x27;&#123;print $5&#125;&#x27;|sort -n|tail -1</span><br>13<br><br><span class="hljs-comment">#另一种写法</span><br><br>[root@CentOS8 data]<span class="hljs-comment"># df -h|awk -F&quot; +|%&quot; &#x27;$0 ~ /^\/dev\/sd/&#123;print $5&#125;&#x27;|sort -n|tail -1</span><br>13<br><br></code></pre></td></tr></table></figure><ul><li><p><strong>awk常用参数</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">-F<span class="hljs-comment">#指明输入时选定的字段分隔符</span><br>-v Var=v <span class="hljs-comment">#变量赋值</span><br>FS<span class="hljs-comment">#输入字段分隔符，默认为空格</span><br>OFS<span class="hljs-comment">#输出字段分隔符，默认为空格</span><br>RS<span class="hljs-comment">#输入记录分隔符，指定输入时的换行符</span><br>ORS<span class="hljs-comment">#输出记录分隔符，输出时用指定符号代替换行符 </span><br>NF<span class="hljs-comment">#显示字段数量</span><br>NR<span class="hljs-comment">#记录每行行号</span><br></code></pre></td></tr></table></figure></li><li><pre><code class="hljs">  awk除了处理一个文件，是不是可以处理多个文件呢？  同时分别显示两个文件的行号  [root@CentOS8 data]# cat file.txt   student;liming  tech;wang;ma    [root@CentOS8 data]# cat emp.txt   Beth:90:one  Dan:110:two  [root@CentOS8 data]# awk &#39;&#123;print FNR&#125;&#39; file.txt emp.txt   1  2  1  2    [root@CentOS8 data]# awk &#39;&#123;print $0,FNR&#125;&#39; file.txt emp.txt   student;liming 1  tech;wang;ma 2  Beth:90:one 1  Dan:110:two 2</code></pre></li><li><pre><code class="hljs">  另外还有其他有意思的选项  有关NR、NF变量的使用  在以前我们曾尝试用各种基础命令来取出IP地址、磁盘利用率、软件版本类型等等如此之类的需求；而awk可以非常便捷的做到 ：  取出磁盘利用率最大的分区  [root@CentOS8 data]# df -h|awk -F&quot; +|%&quot; &#39;$0~&quot;/dev/sda&quot;&#123;print $5&#125;&#39;|sort -n|tail -1  13</code></pre></li><li><pre><code class="hljs">  取出用户的家目录  [root@CentOS8 data]# awk -F: &#39;&#123;print $(NF-1)&#125;&#39; /etc/passwd  /root  /bin  ………….  /home/td  /home/mage</code></pre></li><li><pre><code class="hljs">  取出主机ip  [root@CentOS8 data]# ifconfig ens33|awk NR==2&#39;&#123;print $NR&#125;&#39;  192.168.124.3</code></pre></li><li><pre><code class="hljs">  有关FILENAME的使用  文件内容全部替换成文件名，即输出文件个数=文件行数  [root@CentOS8 data]# awk &#39;&#123;print FILENAME&#125;&#39;  file.txt   file.txt   file.txt    [root@CentOS8 data]# awk &#39;&#123;print FILENAME&#125;&#39;  emp.txt   emp.txt  emp.txt  [root@CentOS8 data]# awk &#39;&#123;print FNR,FILENAME&#125;&#39;  emp.txt file.txt   1 emp.txt  2 emp.txt  1 file.txt  2 file.txt</code></pre></li><li><pre><code class="hljs">  ？awk还可以加减乘除？  [root@CentOS8 data]# awk &#39;BEGIN&#123;print 3*5&#125;&#39;  15    [root@CentOS8 data]# awk &#39;BEGIN&#123;print (2*5-6)/2^2&#125;&#39;  1</code></pre></li><li><pre><code class="hljs">  显示命令行参数的个数  [root@CentOS8 data]# awk &#39;BEGIN&#123;print ARGC&#125;&#39;   1    [root@CentOS8 data]# awk &#39;BEGIN&#123;print ARGC&#125;&#39; emp.txt   2    [root@CentOS8 data]# awk &#39;BEGIN&#123;print ARGC&#125;&#39; emp.txt file.txt   3    [root@CentOS8 data]# awk &#39;BEGIN&#123;print ARGC&#125;&#39; emp.txt file.txt pig.txt   4</code></pre></li><li><pre><code class="hljs">  ARGV：数组  [root@CentOS8 data]# awk &#39;BEGIN&#123;print ARGV[0]&#125;&#39; emp.txt file.txt pig.txt   awk    [root@CentOS8 data]# awk &#39;BEGIN&#123;print ARGV[1]&#125;&#39; emp.txt file.txt pig.txt   emp.txt    [root@CentOS8 data]# awk &#39;BEGIN&#123;print ARGV[2]&#125;&#39; emp.txt file.txt pig.txt   file.txt    [root@CentOS8 data]# awk &#39;BEGIN&#123;print ARGV[3]&#125;&#39; emp.txt file.txt pig.txt   pig.txt</code></pre></li><li><pre><code class="hljs">  FNR分别记录多个文件行号  FILENAME当前文件名  ARGC终端输入时命令行参数的个数         BEGIN加减乘除等运算  ARGV数组，命令行的各个参数</code></pre></li><li><pre><code class="hljs">  除了可以使用awk的内置变量，还可以自定义变量  [root@CentOS8 data]# awk -F: -v user=&quot;username : &quot; &#39;&#123;print user$1&#125;&#39; /etc/passwd  username : root  username : bin  username : daemon  username : adm  ……………………………</code></pre></li><li><pre><code class="hljs">  自定义多个变量  [root@CentOS8 data]# awk -F: -v user=&quot;username : &quot; -v usid=&quot;useruid : &quot; -v ugid= ：&quot; usergid  &quot; &#39;&#123;print user$1&quot;\t&quot;usid$3&quot;\t&quot;ugid$4&#125;&#39; /etc/passwd  username : rootuseruid : 0 usergid ：0  username : binuseruid : 1 usergid  ：1  username : daemonuseruid : 2 usergid  ：2  username : admuseruid : 3 usergid  ：4  ……………………………………</code></pre></li><li><pre><code class="hljs">  也可以将变量定义在program中  [root@CentOS8 data]# awk -F: &#39;&#123;user=&quot;username : &quot;;usid=&quot;useruid : &quot;;ugid=&quot; usergid ：&quot;;print user$1&quot;\t&quot;usid$3&quot;\t&quot;ugid$4&#125;&#39; /etc/passwd  username : rootuseruid : 0 usergid ：0  username : binuseruid : 1 usergid ：1  username : daemonuseruid : 2 usergid ：2  username : admuseruid : 3 usergid ：4  ………………………………………………</code></pre></li><li><pre><code class="hljs">  倘若你已经在shell中定义过要使用的变量，同样在awk中你也可以调用它  [root@CentOS8 data]# user=&quot;username:&quot; uuid=&quot;useruid:&quot; ugid=&quot;usergid:&quot;;awk -F: -v i=$user -v u=$uuid -v g=$ugid &#39;&#123;print i$1&quot;\t&quot;u$3&quot;\t&quot;g$4&#125;&#39; /etc/passwd  username:rootuseruid:0usergid:0  username:binuseruid:1usergid:1  username:daemonuseruid:2usergid:2  username:admuseruid:3usergid:4  …………………………………………</code></pre></li><li><pre><code class="hljs">  将执行的命令放在一个文件中，使用awk调用该文件一样OK  [root@CentOS8 data]# vim awk.txt    [root@CentOS8 data]# cat awk.txt   &#123;user=&quot;username : &quot;;usid=&quot;useruid : &quot;;ugid=&quot; usergid  &quot;;print user$1&quot;\t&quot;usid$3&quot;\t&quot;ugid$4&#125;  [root@CentOS8 data]# awk -F: -f awk.txt /etc/passwd  username : rootuseruid : 0 usergid  0  username : binuseruid : 1 usergid  1  username : daemonuseruid : 2 usergid  2  username : admuseruid : 3 usergid  4  ………………………………</code></pre></li><li><p>   printf命令</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mel">格式化输出：printf “FORMAT”，item1，item2，….<br>必须指定FORMAT<br>不主动换行，需手动给出\n换行符<br>FORMAT中需要分别为后面每个item指定格式符<br>格式符：与item相呼应<br>%c：显示字符的ASCII码（不常用）<br>%d，%i：显示十进制整数（常用）<br>%e，%E：显示科学计数法数值<br>%f：显示为浮点数（小数位）<br>%g，%G：以科学计数法或浮点形式显示数值（也许你需要将小数精确至<span class="hljs-number">0.001</span>什么的）%s：显示字符串%u：无符号整数%%：显示%自身<br>修饰符：<br>#[.#]第一个数字控制显示的宽度；第二个#表示小数点后精度 %3<span class="hljs-number">.1</span>f<br>    -左对齐（默认为右对齐）%-<span class="hljs-number">15</span>s<br>   +显示数值的正负号 %+d<br></code></pre></td></tr></table></figure></li><li><pre><code class="hljs">  默认向右对其显示  [root@CentOS8 data]# cat emp.txt   Beth:-90:233:-12:seur:out  Dan:110:-7:66:root    [root@CentOS8 data]# awk -F: &#39;&#123;printf &quot;%4s %10d %5d\n&quot;,$1,$3,$4&#125;&#39; emp.txt  Beth        233   -12   Dan        -7    66</code></pre></li><li><pre><code class="hljs">  加-左对齐  [root@CentOS8 data]# awk -F: &#39;&#123;printf &quot;%-4s     %-10d %d\n&quot;,$1,$3,$4&#125;&#39; emp.txt  Beth     233        -12  Dan     -7        66</code></pre></li><li><pre><code class="hljs">  显示’数值‘的正负  [root@CentOS8 data]# awk -F: &#39;&#123;printf &quot;%-5s  %5+d %5+d\n&quot;,$1,$3,$4&#125;&#39; emp.txt   Beth    +233   -12  Dan       -7   +66</code></pre></li><li><pre><code class="hljs">  之前操作的示例中有计算加减乘除的展示  那么，awk中的算术操作符以及其他的操作符有哪些：</code></pre></li></ul><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">x+y加法<br>x-y减法<br>x*y乘法<br>x/y除法<br>x^y幂运算（指数）<br>x%y取模（除余）<br>-x转换成负数<br>+x将字符串转换为数值<br><br>赋值操作符：<br><br><span class="hljs-section">=右边赋值给左边</span><br>+=先加，再赋值<br>-=先减，再赋值<br>*=先乘，再赋值<br>/=先除，再赋值<br>%=先取模，再赋值<br>^=先幂运算，再赋值<br>++递增操作<br><span class="hljs-bullet">--</span>递减操作<br><br>比较操作符：<br><br><span class="hljs-section">==判断相等</span><br>！=判断不等<br>\&gt;判断大于<br>\&gt;=判断大于等于<br>&lt;判断小于<br>&lt;=判断小于等于<br><br>模式匹配符：<br><br>~左边是否和右边匹配包含<br>！~是否不匹配<br><br>逻辑操作符：<br><br>&amp;&amp;逻辑与<br>||逻辑或<br>！逻辑非<br></code></pre></td></tr></table></figure><ul><li><pre><code class="hljs">  比较下列两个命令语句有何区别  [root@CentOS8 data]# awk &#39;BEGIN&#123;i=0;print ++i,i&#125;&#39;  [root@CentOS8 data]# awk &#39;BEGIN&#123;i=0;print i++,i&#125;&#39;</code></pre></li><li><pre><code class="hljs">  第一个是先加，之后将加得的数和i打印  第二个是先打印i的值，再将i加得的数打印  [root@CentOS8 data]# awk &#39;BEGIN&#123;i=0;print ++i,i&#125;&#39;  1 1  [root@CentOS8 data]# awk &#39;BEGIN&#123;i=0;print i++,i&#125;&#39;  0 1</code></pre></li><li><pre><code class="hljs">  awk中的PATTERN模式</code></pre></li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">PATTERN：根据pattern条件，过滤匹配的行；然后再做处理<br><span class="hljs-number">1</span>：若pattern未指定：视为空模式，匹配所有行<br><span class="hljs-number">2</span>：<span class="hljs-regexp">/relational expression/</span>：仅处理能够被模式匹配到的行，且需要用<span class="hljs-regexp">//</span>扩入<br><span class="hljs-number">3</span>：relational expression：关系表达式，仅结果为真，才会进行处理<br>真：结果为非<span class="hljs-number">0</span>值，非空字符串都为真<br>假：结果为空字符串或<span class="hljs-number">0</span>值都为<br><span class="hljs-number">4</span>：line ranges：行范围<br>startine，endline：<span class="hljs-regexp">/pat1/</span>，<span class="hljs-regexp">/pat2/</span>不支持直接给出数字格式。<br><span class="hljs-number">5</span>：<span class="hljs-keyword">BEGIN</span>/<span class="hljs-keyword">END</span>模式<br><span class="hljs-keyword">BEGIN</span>&#123;&#125;：仅在开始处理文件中的文本之前执行一次<br><span class="hljs-keyword">END</span>&#123;&#125;：仅在文本处理完成之后执行一次。<br></code></pre></td></tr></table></figure><ul><li><pre><code class="hljs">  匹配/etc/passwd 中所有行的第N个字段所在的那行包含root的  [root@CentOS8 data]# awk  -F: &#39;$0 ~ /root/&#123;print $1&#125;&#39;  /etc/passwd  root  operator</code></pre></li><li><pre><code class="hljs">  当然，如果匹配一个不存在的字符串是没有反应的  [root@CentOS8 data]# awk  -F: &#39;$0 ~ /kxxxla/&#123;print $1&#125;&#39;  /etc/passwd  [root@CentOS8 data]# awk  -F: &#39;$0 ~ /root/&#123;print $3&#125;&#39;  /etc/passwd  0  11    [root@CentOS8 data]# awk  -F: &#39;$0 ~ /root/&#123;print $5&#125;&#39;  /etc/passwd  root  operator</code></pre></li><li><pre><code class="hljs">  查看/etc/passwd文件便可清楚了解  [root@CentOS8 data]# cat /etc/passwd  root:x:0:0:root:/root:/bin/bash  ………………………………….  operator:x:11:0:operator:/root:/sbin/nologin</code></pre></li><li><pre><code class="hljs">  匹配/etc/passwd 中所有行的第N个字段所在的那行为0的  [root@CentOS8 data]# awk -F: &#39;$4==0&#39; /etc/passwd  root:x:0:0:root:/root:/bin/bash  sync:x:5:0:sync:/sbin:/bin/sync  shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown  halt:x:7:0:halt:/sbin:/sbin/halt  operator:x:11:0:operator:/root:/sbin/nologin  [root@CentOS8 data]# awk -F: &#39;$3==0&#39; /etc/passwd  root:x:0:0:root:/root:/bin/bash</code></pre></li><li><pre><code class="hljs">  于此之外，使用！~可以匹配相反的效果  [root@CentOS8 data]# awk -F: &#39;!$4==0&#39; /etc/passwd  bin:x:1:1:bin:/bin:/sbin/nologin  daemon:x:2:2:daemon:/sbin:/sbin/nologin  adm:x:3:4:adm:/var/adm:/sbin/nologin  lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</code></pre></li><li><pre><code class="hljs">  匹配/etc/passwd 中所有行的第N个字段所在的那行为非0的  [root@CentOS8 data]# awk -F: &#39;!$4==0&#39; /etc/passwd  bin:x:1:1:bin:/bin:/sbin/nologin  daemon:x:2:2:daemon:/sbin:/sbin/nologin  adm:x:3:4:adm:/var/adm:/sbin/nologin  lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin  …………………………………..过多不做演示</code></pre></li><li><pre><code class="hljs">  匹配/etc/passwd 中所有行的第N个字段所在的那行不包含root的  [root@CentOS8 data]# awkawk  -F: &#39;$0 !~ /root/&#123;print $5&#125;&#39; tc/passwd  bin  daemon  adm  ………..过多不做演示</code></pre></li><li><pre><code class="hljs">  有关逻辑与或非的示例：  匹配/etc/passwd中所有行的第三字段数值在0-5之间的，打印符合条件的行的第一字段  [root@CentOS8 data]# awk -F: &#39;$3&gt;=0 &amp;&amp; $3&lt;=5 &#123;print $1&#125;&#39; /etc/passwd|tr &#39;\n&#39; &#39; &#39;  root bin daemon adm lp sync </code></pre></li><li><pre><code class="hljs">  匹配/etc/passwd中所有行的第三字段的数值在小于等于0或大于等于1000之间的，打印符合条件的行的第一字段  [root@CentOS8 data]# awk -F: &#39;$3&lt;=0 || $3&gt;=1000 &#123;print $1&#125;&#39; /etc/passwd  root  nobody  td</code></pre></li><li><pre><code class="hljs">  匹配/etc/passwd中所有行的第三字段数值在小于1000的，取反变为大于等于1000的，打印符合条件的行的第一字段  [root@CentOS8 data]# awk -F: &#39;!($3&lt;1000) &#123;print $1&#125;&#39; /etc/passwd  nobody  td</code></pre></li><li><pre><code class="hljs">  有关PATTERN模式的示例：  原文件：</code></pre></li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[root@CentOS8 data]</span><span class="hljs-comment"># cat /etc/fstab </span><br><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># /etc/fstab</span><br><span class="hljs-comment"># Created by anaconda on Wed Sep 25 20:03:53 2019</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Accessible filesystems, by reference, are maintained under &#x27;/dev/disk/&#x27;.</span><br><span class="hljs-comment"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># After editing this file, run &#x27;systemctl daemon-reload&#x27; to update systemd</span><br><span class="hljs-comment"># units generated from this file.</span><br><span class="hljs-comment">#</span><br><span class="hljs-attr">UUID</span>=e2e0f44d-<span class="hljs-number">0</span>ae9-<span class="hljs-number">4159</span>-a99f-<span class="hljs-number">6</span>a1c72dcccbe /                       xfs     defaults        <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-attr">UUID</span>=deb9638d-<span class="hljs-number">76</span>ba-<span class="hljs-number">4370</span>-<span class="hljs-number">90</span>f1-<span class="hljs-number">962</span>cd4ab55b5 /boot                   ext4    defaults        <span class="hljs-number">1</span> <span class="hljs-number">2</span><br><span class="hljs-attr">UUID</span>=<span class="hljs-number">40</span>aac826-ee18-<span class="hljs-number">4927</span>-<span class="hljs-number">8574</span>-c8618c4ea1e7 /data                   xfs     defaults        <span class="hljs-number">0</span> <span class="hljs-number">0</span><br><span class="hljs-attr">UUID</span>=d12cdea2-cb68-<span class="hljs-number">4</span>aa7-<span class="hljs-number">97</span>cd-<span class="hljs-number">9002297</span>faf05 swap                    swap    defaults        <span class="hljs-number">0</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><ul><li><pre><code class="hljs">  仅匹显示以UUID开头的行  [root@CentOS8 data]# awk &#39;/^UUID/&#123;print $1&#125;&#39; /etc/fstab   UUID=e2e0f44d-0ae9-4159-a99f-6a1c72dcccbe  UUID=deb9638d-76ba-4370-90f1-962cd4ab55b5  UUID=40aac826-ee18-4927-8574-c8618c4ea1e7  UUID=d12cdea2-cb68-4aa7-97cd-9002297faf05</code></pre></li><li><pre><code class="hljs">  取反</code></pre></li></ul><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">[root@CentOS8 data]<span class="hljs-comment"># awk &#x27;!/^UUID/&#123;print $0&#125;&#x27; /etc/fstab </span><br><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># /etc/fstab</span><br><span class="hljs-comment"># Created by anaconda on Wed Sep 25 20:03:53 2019</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Accessible filesystems, by reference, are maintained under &#x27;/dev/disk/&#x27;.</span><br><span class="hljs-comment"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># After editing this file, run &#x27;systemctl daemon-reload&#x27; to update systemd</span><br><span class="hljs-comment"># units generated from this file.</span><br><span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><ul><li><pre><code class="hljs">  Relational expression:关系表达式  [root@CentOS8 data]# awk -F: &#39;$NF==&quot;/bin/bash&quot;&#123;print $1,$NF&#125;&#39; /etc/passwd  root /bin/bash  td /bin/bash  mage /bin/bash</code></pre></li></ul><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>awk</category>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>awk</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Awk 命令</title>
    <link href="/p/awk.html"/>
    <url>/p/awk.html</url>
    
    <content type="html"><![CDATA[<h1 id="awk介绍"><a href="#awk介绍" class="headerlink" title="awk介绍"></a><strong>awk介绍</strong></h1><p id="hitokoto">获取中...</p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><ul><li><p>awk：Aho, Weinberger, Kernighan，报告生成器，格式化文本输出 </p></li><li><p>有多种版本：New awk（nawk），GNU awk（ gawk） </p></li><li><p>gawk：模式扫描和处理语言 基本用法：  </p><p>  awk [options]   ‘program’  var&#x3D;value   file…  </p><p>  awk [options]   -f programfile    var&#x3D;value  file…  </p><p>  awk [options]  ‘BEGIN{action;… }pattern{action;… }END{action;… }’  file …  </p><p>  awk 程序可由：BEGIN语句块、能够使用模式匹配的通用语句块、END语句 块，共3部分组成  </p><p>  program 通常是被放在单引号中 </p></li><li><p>选项：  </p><pre><code class="hljs">  -F “分隔符” 指明输入时用到的字段分隔符      -v  var=value 变量赋值</code></pre></li></ul><h1 id="awk语言"><a href="#awk语言" class="headerlink" title="awk语言"></a><strong>awk语言</strong></h1><ul><li><p>基本格式：awk [options] ‘program’ file… </p></li><li><p>Program：pattern{action statements;..} </p></li><li><p>pattern和action </p><ul><li><p>pattern部分决定动作语句何时触发及触发事件  </p><p>  BEGIN,END </p></li><li><p>action statements对数据进行处理，放在{}内指明  </p><p>  print, printf</p></li></ul></li><li><p>分割符、域和记录 </p><ul><li><p>awk执行时，由分隔符分隔的字段（域）标记$1,$2…$n称为域标识。$0 为所有域，注意：此时和shell中变量$符含义不同 </p></li><li><p>文件的每一行称为记录 </p><ul><li>省略action，则默认执行 print $0 的操作</li></ul></li></ul></li></ul><h1 id="awk工作原理"><a href="#awk工作原理" class="headerlink" title="awk工作原理"></a><strong>awk工作原理</strong></h1><ul><li><p>第一步：执行BEGIN{action;… }语句块中的语句 </p></li><li><p>第二步：从文件或标准输入(stdin)读取一行，然后执行pattern{ action;… }语句块， 它逐行扫描文件，从第一行到最后一行重复这个过程，直到文件全部被读取完毕。  </p></li><li><p>第三步：当读至输入流末尾时，执行END{action;…}语句块 </p></li><li><p>BEGIN语句块在awk开始从输入流中读取行之前被执行，这是一个可选的语句块， 比如变量初始化、打印输出表格的表头等语句通常可以写在BEGIN语句块中 </p></li><li><p>END语句块在awk从输入流中读取完所有的行之后即被执行，比如打印所有行的 分析结果这类信息汇总都是在END语句块中完成，它也是一个可选语句块  </p></li><li><p>pattern语句块中的通用命令是最重要的部分，也是可选的。如果没有提供 pattern语句块，则默认执行{ print }，即打印每一个读取到的行，awk读取的每 一行都会执行该语句块</p></li></ul><h1 id="awk要点"><a href="#awk要点" class="headerlink" title="awk要点"></a><strong>awk要点</strong></h1><ul><li><p>print格式：print item1, item2, … </p></li><li><p>要点： </p><p>  (1) 逗号分隔符 </p><p>  (2) 输出item可以字符串，也可是数值；当前记录的字段、变量或awk的表达式 </p><p>  (3) 如省略item，相当于print $0</p></li></ul><h1 id="awk变量"><a href="#awk变量" class="headerlink" title="awk变量"></a><strong>awk变量</strong></h1><ul><li><p>变量：内置和自定义变量 </p></li><li><p>FS：输入字段分隔符，默认为空白字符  </p><p>  awk -v FS&#x3D;’:’  ‘{print $1,FS,$3}’ &#x2F;etc&#x2F;passwd  </p><p>  awk  –F:   ‘{print $1,$3,$7}’   &#x2F;etc&#x2F;passwd </p></li><li><p>OFS：输出字段分隔符，默认为空白字符  </p><p>  awk  -v FS&#x3D;’:’  -v OFS&#x3D;’:’  ‘{print $1,$3,$7}’   &#x2F;etc&#x2F;passwd </p></li><li><p>RS：输入记录分隔符，指定输入时的换行符  </p><p>  awk -v RS&#x3D;’ ‘ ‘{print }’ &#x2F;etc&#x2F;passwd </p></li><li><p>ORS：输出记录分隔符，输出时用指定符号代替换行符  </p><p>  awk -v RS&#x3D;’ ‘ -v ORS&#x3D;’###’  ‘{print $0}’ &#x2F;etc&#x2F;passwd </p></li><li><p>NF：字段数量  </p><p>  awk  -F：’{print NF}’  &#x2F;etc&#x2F;fstab 引用变量时，变量前不需加$  </p><p>  awk  -F：’{print $(NF-1)}’  &#x2F;etc&#x2F;passwd </p></li><li><p>NR：记录号       </p><p>  awk ‘{print NR}’  &#x2F;etc&#x2F;fstab ; awk END ‘{print NR}’  &#x2F;etc&#x2F;fstab </p></li><li><p>FNR：各文件分别计数,记录号  </p><p>  awk ‘{print FNR}’  &#x2F;etc&#x2F;fstab &#x2F;etc&#x2F;inittab </p></li><li><p>FILENAME：当前文件名  </p><p>  awk ‘{print FILENAME}’  &#x2F;etc&#x2F;fstab </p></li><li><p>ARGC：命令行参数的个数  </p><p>  awk ‘{print ARGC}’  &#x2F;etc&#x2F;fstab &#x2F;etc&#x2F;inittab  </p><p>  awk ‘BEGIN {print ARGC}’  &#x2F;etc&#x2F;fstab &#x2F;etc&#x2F;inittab </p></li><li><p>ARGV：数组，保存的是命令行所给定的各参数  </p><p>  awk ‘BEGIN {print ARGV[0]}’  &#x2F;etc&#x2F;fstab &#x2F;etc&#x2F;inittab  </p><p>  awk ‘BEGIN {print ARGV[1]}’  &#x2F;etc&#x2F;fstab &#x2F;etc&#x2F;inittab </p></li><li><p>自定义变量(区分字符大小写)  </p><p>  (1) -v var&#x3D;value    </p><p>  (2) 在program中直接定义</p></li></ul><h1 id="printf命令"><a href="#printf命令" class="headerlink" title="printf命令"></a><strong>printf命令</strong></h1><ul><li><p>格式化输出：printf “FORMAT”, item1, item2, …  </p><p>  (1) 必须指定FORMAT  </p><p>  (2) 不会自动换行，需要显式给出换行控制符，\n  </p><p>  (3) FORMAT中需要分别为后面每个item指定格式符 </p></li><li><p>格式符：与item一一对应  </p><p>  %c：显示字符的ASCII码  </p><p>  %d, %i：显示十进制整数  </p><p>  %e, %E：显示科学计数法数值   </p><p>  %f：显示为浮点数  </p><p>  %g, %G：以科学计数法或浮点形式显示数值  </p><p>  %s：显示字符串  </p><p>  %u：无符号整数  </p><p>  %%：显示%自身 </p></li><li><p>修饰符  </p><p>  #[.#] 第一个数字控制显示的宽度；第二个#表示小数点后精度，%3.1f  </p><p>  - 左对齐（默认右对齐） %-15s </p><p>  + 显示数值的正负符号 %+d</p></li></ul><h1 id="操作符"><a href="#操作符" class="headerlink" title="操作符"></a><strong>操作符</strong></h1><ul><li><p>算术操作符：  </p><p>  x+y, x-y, x*y, x&#x2F;y, x^y, x%y  </p><p>  - x：转换为负数  </p><p>  + x：将字符串转换为数值 </p></li><li><p>字符串操作符：没有符号的操作符，字符串连接 </p></li><li><p>赋值操作符：  </p><p>  &#x3D;, +&#x3D;, -&#x3D;, *&#x3D;, &#x2F;&#x3D;, %&#x3D;, ^&#x3D;，++, – </p></li><li><p>比较操作符：   </p><p>  &#x3D;&#x3D;, !&#x3D;, &gt;, &gt;&#x3D;, &lt;, &lt;&#x3D; </p></li><li><p>模式匹配符：        </p><p>  ~：左边是否和右边匹配，包含         </p><p>  !~：是否不匹配 </p></li><li><p>逻辑操作符：与&amp;&amp;，或||，非! </p></li><li><p>条件表达式（三目表达式）     </p><p>  selector?if-true-expression:if-false-expression </p><p>  • 示例：     </p><p>  awk -F: ‘{$3&gt;&#x3D;1000?usertype&#x3D;”Common User”:usertype&#x3D;”SysUser”;<br>  printf “%15s:%-s\n”,$1,usertype}’   &#x2F;etc&#x2F;passwd</p></li></ul><h1 id="awk-PATTERN"><a href="#awk-PATTERN" class="headerlink" title="awk PATTERN"></a><strong>awk PATTERN</strong></h1><ul><li><p>PATTERN:根据pattern条件，过滤匹配的行，再做处理     </p><p>  (1)如果未指定：空模式，匹配每一行     </p><p>  (2) &#x2F;regular expression&#x2F;：仅处理能够模式匹配到的行，需要用&#x2F;  &#x2F;括起来  </p><pre><code class="hljs">  awk   &#39;/^UUID/&#123;print $1&#125;&#39;     /etc/fstab      awk   &#39;!/^UUID/&#123;print $1&#125;&#39;   /etc/fstab       </code></pre><p>  (3) relational expression: 关系表达式，结果为“真”才会被处理  </p><pre><code class="hljs">  真：结果为非0值，非空字符串      假：结果为空字符串或0值  </code></pre><p>  (4) line ranges：行范围  </p><pre><code class="hljs">  startline,endline：/pat1/,/pat2/ 不支持直接给出数字格式      awk -F: ‘/^root\&gt;/,/^nobody\&gt;/&#123;print $1&#125;&#39; /etc/passwd      awk -F: ‘(NR&gt;=10&amp;&amp;NR&lt;=20)&#123;print NR,$1&#125;&#39; /etc/passwd     (5) BEGIN/END模式      BEGIN&#123;&#125;：仅在开始处理文件中的文本之前执行一次      END&#123;&#125;：仅在文本处理完成之后执行一次</code></pre></li></ul><h1 id="awk-action"><a href="#awk-action" class="headerlink" title="awk action"></a><strong>awk action</strong></h1><ul><li><p>常用的action分类 </p><p>   (1) Expressions：算术，比较表达式等 </p><p>   (2) Control statements：if, while等 </p><p>   (3) Compound statements：组合语句 </p><p>   (4) input statements </p><p>   (5) output statements：print等</p></li></ul><h1 id="awk控制语句示例"><a href="#awk控制语句示例" class="headerlink" title="awk控制语句示例"></a><strong>awk控制语句示例</strong></h1><p>{ statements;… } 组合语句 </p><p>if(condition) {statements;…}  </p><p>if(condition) {statements;…} else {statements;…} </p><p>while(conditon) {statments;…} </p><p>do {statements;…} while(condition) </p><p>for(expr1;expr2;expr3) {statements;…} </p><p>break </p><p>continue </p><p>delete array[index] </p><p>delete array </p><p>exit </p><h1 id="awk控制语句if-else"><a href="#awk控制语句if-else" class="headerlink" title="awk控制语句if-else"></a><strong>awk控制语句if-else</strong></h1><ul><li><p>语法：if(condition){statement;…}[else statement]    </p><p>  if(condition1){statement1}else if(condition2){statement2}else{statement3} </p></li><li><p>使用场景：对awk取得的整行或某个字段做条件判断 </p></li><li><p>示例： </p><p>  awk -F: ‘{if($3&gt;&#x3D;1000)print $1,$3}’ &#x2F;etc&#x2F;passwd </p><p>  awk -F: ‘{if($NF&#x3D;&#x3D;”&#x2F;bin&#x2F;bash”) print $1}’ &#x2F;etc&#x2F;passwd </p><p>  awk ‘{if(NF&gt;5) print $0}’ &#x2F;etc&#x2F;fstab </p><p>  awk -F: ‘{if($3&gt;&#x3D;1000) {printf “Common user: %s\n”,$1} else {printf “root or Sysuser: %s\n”,$1}}’ &#x2F;etc&#x2F;passwd </p><p>  awk -F: ‘{if($3&gt;&#x3D;1000) printf “Common user: %s\n”,$1; else printf “root or Sysuser: %s\n”,$1}’ &#x2F;etc&#x2F;passwd </p><p>  df -h|awk -F% ‘&#x2F;^/dev&#x2F;{print $1}’|awk ‘$NF&gt;&#x3D;80{print $1,$5}’ </p><p>  awk ‘BEGIN{ test&#x3D;100;if(test&gt;90){print “very good”}<br>  else if(test&gt;60){ print “good”}else{print “no pass”}}’</p></li></ul><h1 id="awk控制语句while"><a href="#awk控制语句while" class="headerlink" title="awk控制语句while"></a><strong>awk控制语句while</strong></h1><ul><li><p>while循环 </p></li><li><p>语法：while(condition){statement;…} </p></li><li><p>条件“真”，进入循环；条件“假”，退出循环 </p></li><li><p>使用场景：  </p><p>  对一行内的多个字段逐一类似处理时使用  </p><p>  对数组中的各元素逐一处理时使用 </p></li><li><p>示例：  </p><p>  awk ‘&#x2F;^[[:space:]]*linux16&#x2F;{i&#x3D;1;while(i&lt;&#x3D;NF)<br>  {print $i,length($i); i++}}’ &#x2F;etc&#x2F;grub2.cfg<br><br>  awk  ‘&#x2F;^[[:space:]]*linux16&#x2F;{i&#x3D;1;while(i&lt;&#x3D;NF)<br>  {if(length($i)&gt;&#x3D;10){print $i,length($i)}; i++}}’ &#x2F;etc&#x2F;grub2.cfg</p></li></ul><h1 id="awk控制语句do-while"><a href="#awk控制语句do-while" class="headerlink" title="awk控制语句do-while"></a><strong>awk控制语句do-while</strong></h1><ul><li><p>do-while循环 </p></li><li><p>语法：do {statement;…}while(condition) </p></li><li><p>意义：无论真假，至少执行一次循环体 </p></li><li><p>示例：      </p><p>  awk ‘BEGIN{ total&#x3D;0;i&#x3D;0;do{ total+&#x3D;i;i++;}while(i&lt;&#x3D;100);print total}’</p></li></ul><h1 id="awk控制语句for"><a href="#awk控制语句for" class="headerlink" title="awk控制语句for"></a><strong>awk控制语句for</strong></h1><ul><li><p>for循环 </p></li><li><p>语法：for(expr1;expr2;expr3) {statement;…} </p></li><li><p>常见用法：  </p><p>  for(variable assignment;condition;iteration process)    {for-body} </p></li><li><p>特殊用法：能够遍历数组中的元素  </p><p>  语法：for(var in array) {for-body} </p></li><li><p>示例：   </p><p>  awk ‘&#x2F;^[[:space:]]*linux16&#x2F;{for(i&#x3D;1;i&lt;&#x3D;NF;i++) {print $i,length($i)}}’ &#x2F;etc&#x2F;grub2.cfg</p></li></ul><h1 id="awk控制语句switch"><a href="#awk控制语句switch" class="headerlink" title="awk控制语句switch"></a><strong>awk控制语句switch</strong></h1><ul><li><p>switch语句 </p></li><li><p>语法：switch(expression) {case VALUE1 or &#x2F;REGEXP&#x2F;: statement1; case VALUE2 or &#x2F;REGEXP2&#x2F;: statement2; …; default: statementn} </p></li><li><p>break和continue     </p><p>  awk ‘BEGIN{sum&#x3D;0;for(i&#x3D;1;i&lt;&#x3D;100;i++)<br>  {if(i%2&#x3D;&#x3D;0)continue;sum+&#x3D;i}print sum}’<br><br>  awk ‘BEGIN{sum&#x3D;0;for(i&#x3D;1;i&lt;&#x3D;100;i++)<br>  {if(i&#x3D;&#x3D;66)break;sum+&#x3D;i}print sum}’</p></li></ul><h1 id="awk控制语句break-x2F-continue"><a href="#awk控制语句break-x2F-continue" class="headerlink" title="awk控制语句break&#x2F;continue"></a><strong>awk控制语句break&#x2F;continue</strong></h1><ul><li><p>break [n] </p></li><li><p>continue [n] </p></li><li><p>next:      </p><p>  提前结束对本行处理而直接进入下一行处理（awk自身循环）</p></li></ul><p>示例：  </p><pre><code class="hljs">    awk -F: &#39;&#123;if($3%2!=0) next; print $1,$3&#125;&#39; /etc/passwd </code></pre><h1 id="awk数组"><a href="#awk数组" class="headerlink" title="awk数组"></a><strong>awk数组</strong></h1><ul><li><p>关联数组：array[index-expression] </p></li><li><p>index-expression: </p><p>   (1) 可使用任意字符串；字符串要使用双引号括起来 </p><p>   (2) 如果某数组元素事先不存在，在引用时，awk会自动创建此元素，并将其值 初始化为“空串” </p><p>   (3) 若要判断数组中是否存在某元素，要使用“index in array”格式进行遍历 </p></li><li><p>示例： </p><p>  weekdays[“mon”]&#x3D;”Monday”  </p><p>  awk ‘BEGIN{weekdays[“mon”]&#x3D;”Monday”;weekdays[“tue”]&#x3D;”Tuesday”;  print weekdays[“mon”]}‘ </p><p>  awk ‘!line[$0]++’  dupfile </p><p>  awk ‘{!line[$0]++;print $0, line[$0]}’  dupfile </p></li><li><p>若要遍历数组中的每个元素，要使用for循环 \</p></li><li><p>for(var in array) {for-body} </p></li><li><p>注意：var会遍历array的每个索引 </p></li><li><p>示例：      </p><p>  awk ‘BEGIN{weekdays[“mon”]&#x3D;”Monday”;weekdays[“tue”]&#x3D;”Tuesday”;<br>  for(i in weekdays) {print weekdays[i]}}’<br><br>  netstat -tan | awk ‘&#x2F;^tcp&#x2F;{state[$NF]++}<br>      END{for(i in state) { print i,state[i]}}’<br><br>  awk  ‘{ip[$1]++}END{for(i in ip) {print i,ip[i]}}’   &#x2F;var&#x2F;log&#x2F;httpd&#x2F;access_log</p></li></ul><h1 id="awk函数"><a href="#awk函数" class="headerlink" title="awk函数"></a><strong>awk函数</strong></h1><ul><li><p>数值处理：  </p><p>  rand()：返回0和1之间一个随机数    </p><p>  awk  ‘BEGIN{srand(); for (i&#x3D;1;i&lt;&#x3D;10;i++)print int(rand()*100) }’  </p></li><li><p>字符串处理： </p><p>   length([s])：返回指定字符串的长度 </p><p>   sub(r,s,[t])：对t字符串搜索r表示模式匹配的内容，并将第一个匹配内容替换为s  </p><p>  echo “2008:08:08 08:08:08” | awk ‘sub(&#x2F;:&#x2F;,”-“,$1)’  </p><p>  echo “2008:08:08 08:08:08” | awk ‘{sub(&#x2F;:&#x2F;,”-“,$1);print $0}’ </p><p>   gsub(r,s,[t])：对t字符串进行搜索r表示的模式匹配的内容，并全部替换为s所表 示的内容  </p><p>  echo “2008:08:08 08:08:08” | awk ‘gsub(&#x2F;:&#x2F;,”-“,$0)’  </p><p>  echo “2008:08:08 08:08:08” | awk ‘{gsub(&#x2F;:&#x2F;,”-“,$0);print $0}’ </p><p>   split(s,array,[r])：以r为分隔符，切割字符串s，并将切割后的结果保存至array所 表示的数组中，第一个索引值为1,第二个索引值为2,…  </p><pre><code class="hljs">  netstat -tn | awk &#39;/^tcp\&gt;/&#123;split($5,ip,&quot;:&quot;);count[ip[1]]++&#125;         END&#123;for (i in count) &#123;print i,count[i]&#125;&#125;&#39; </code></pre></li><li><p>自定义函数格式：  </p><pre><code class="hljs">  function name ( parameter, parameter,  ... ) &#123;       statements                               return expression    &#125; </code></pre></li><li><p>示例：  </p><p>  cat fun.awk  </p><pre><code class="hljs">  function max(x,y) &#123;           x&gt;y?var=x:var=y               return var              &#125;              BEGIN&#123;a=3;b=2;print max(a,b)&#125;                         awk -f fun.awk</code></pre></li></ul><h1 id="awk中调用shell命令"><a href="#awk中调用shell命令" class="headerlink" title="awk中调用shell命令"></a><strong>awk中调用shell命令</strong></h1><ul><li><p>system命令 </p></li><li><p>空格是awk中的字符串连接符，如果system中需要使用awk中的变量可以使用 空格分隔，或者说除了awk的变量外其他一律用””引用起来</p><p>awk ‘BEGIN{system(“hostname”) }’   </p><p>awk ‘BEGIN{score&#x3D;100; system(“echo  your score is “ score) }’</p></li></ul><h1 id="awk脚本"><a href="#awk脚本" class="headerlink" title="awk脚本"></a><strong>awk脚本</strong></h1><ul><li><p>将awk程序写成脚本，直接调用或执行 </p></li><li><p>示例：       </p><p>  cat f1.awk  </p><pre><code class="hljs">  &#123;if($3&gt;=1000)print $1,$3&#125;            awk -F: -f f1.awk /etc/passwd</code></pre></li></ul><h1 id="向awk脚本传递参数"><a href="#向awk脚本传递参数" class="headerlink" title="向awk脚本传递参数"></a><strong>向awk脚本传递参数</strong></h1><ul><li><p>格式：  </p><p>  awkfile  var&#x3D;value var2&#x3D;value2… Inputfile </p></li><li><p>注意：在BEGIN过程中不可用。直到首行输入完成以后，变量才可用。可以通 过-v 参数，让awk在执行BEGIN之前得到变量的值。命令行中每一个指定的变 量都需要一个-v参数 </p></li><li><p>示例：  </p><p>  cat  test.awk       </p><p>  #!&#x2F;bin&#x2F;awk –f    </p><p>  {if($3 &gt;&#x3D;min &amp;&amp; $3&lt;&#x3D;max)print $1,$3}   </p><p>  chmod +x test.awk  </p><p>  test.awk -F: min&#x3D;100 max&#x3D;200  &#x2F;etc&#x2F;passwd</p></li></ul><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>awk</category>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>awk</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Bash变量</title>
    <link href="/p/bash.html"/>
    <url>/p/bash.html</url>
    
    <content type="html"><![CDATA[<h1 id="bashrc-x2F-vimrc"><a href="#bashrc-x2F-vimrc" class="headerlink" title="bashrc&#x2F;vimrc"></a>bashrc&#x2F;vimrc</h1><p>*d&#x3D;”hitokoto”&gt;获取中…</p></p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><p>vim &#x2F;root&#x2F;.vimrc</p><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs `bash">set ignorecase<br>set cursorline<br>set autoindent<br>autocmd BufNewFile *.sh exec &quot;:call SetTitle()&quot;<br>func SetTitle()<br>if expand(&quot;%:e&quot;) == &#x27;sh&#x27;<br>call setline(1,&quot;#!/bin/bash&quot;)<br>call setline(2,&quot;###########################################&quot;)<br>call setline(3,&quot;#Author: Mxxxxxia                         ##&quot;)<br>call setline(4,&quot;#QQ： 1xxxxxxx59                          #####&quot;)<br>call setline(5,&quot;#Date： &quot;.strftime(&quot;%Y-%m-%d               &quot;))<br>call setline(6,&quot;#Mage Education:   Mxxxxxxxxx             ###############&quot;)<br>call setline(7,&quot;#FileName： &quot;.expand(&quot;%&quot;))<br>call setline(8,&quot;#URL： https://Mtdia.github.io            #####&quot;)<br>call setline(9,&quot;#Description： The test script            ##&quot;)<br>call setline(10,&quot;###########################################&quot;)<br>call setline(11,&quot;&quot;)<br>endif<br>endfunc<br>autocmd BufNewFile * normal G<br><br>set hlsearch                    &quot;文本文件中 vim 搜索关键词高亮显示<br>set clipboard=unnamed           &quot; 设置vim中默认使用选择缓冲区寄存器,y复制,p粘贴<br>set pastetoggle=&lt;F1&gt;        &quot; 斩杀复制粘贴时产生的恶心的缩进<br>set ai                          &quot; 自动缩进，新行与前面的行保持—致的自动空格<br>set cursorline                  &quot; 显示光标行<br>set aw                          &quot; 自动写，转入shell或使用：n编辑其他文件时，当前的缓冲区被写入<br>set flash                       &quot; 在出错处闪烁但不呜叫(缺省)<br>set ic                          &quot; 在查询及模式匹配时忽赂大小写<br>set number                      &quot; 屏幕左边显示行号<br>set showmatch                   &quot; 显示括号配对，当键入“]”“)”时，高亮度显示匹配的括号<br>set showmode                    &quot; 处于文本输入方式时加亮按钮条中的模式指示器<br>set warn                        &quot; 对文本进行了新的修改后，离开shell时系统给出显示(缺省)<br>set ws                          &quot; 在搜索时如到达文件尾则绕回文件头继续搜索<br>set wrap                        &quot; 长行显示自动折行<br>colorscheme evening             &quot; 设定背景为夜间模式<br>filetype plugin on              &quot; 自动识别文件类型，自动匹配对应的, “文件类型Plugin.vim”文件，使用缩进定义文件<br>set autoindent                  &quot; 设置自动缩进：即每行的缩进值与上一行相等；使用 noautoindent 取消设置<br>set cindent                     &quot; 以C/C++的模式缩进<br>set noignorecase                &quot; 默认区分大小写<br>set ruler                       &quot; 打开状态栏标尺<br>set scrolloff=5                 &quot; 设定光标离窗口上下边界 5 行时窗口自动滚动<br>set shiftwidth=4                &quot; 设定 &lt;&lt; 和 &gt;&gt; 命令移动时的宽度为 4<br>set softtabstop=4               &quot; 使得按退格键时可以一次删掉 4 个空格,不足 4 个时删掉所有剩下的空格）<br>set tabstop=4                   &quot; 设定 tab 长度为 4<br>set wrap                        &quot; 自动换行显示<br>syntax enable<br>syntax on                       &quot; 自动语法高亮<br>set autoindent                  &quot;自动对齐<br>set smartindent                 &quot;智能对齐<br>set mouse=a                     &quot;使用鼠标<br>&quot;set mouse=v                    &quot;使用鼠标选定复制<br>&quot;inoremap ( ()&lt;ESC&gt;i            &quot;括号自动补齐&quot;&gt;<br>&quot;inoremap [ []&lt;ESC&gt;i<br>&quot;inoremap &#123; &#123;&#125;&lt;ESC&gt;i<br>&quot;inoremap &lt; &lt;&gt;&lt;ESC&gt;i<br></code></pre></td></tr></table></figure>    </div></div><hr><p>vim &#x2F;root&#x2F;.bashrc</p><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">alias</span> lll=<span class="hljs-string">&#x27;ls -lAFhi&#x27;</span><br><span class="hljs-built_in">alias</span> ll=<span class="hljs-string">&#x27;ls -lAFh&#x27;</span><br><span class="hljs-built_in">alias</span> l=<span class="hljs-string">&#x27;ls -aF&#x27;</span><br><span class="hljs-built_in">alias</span> ld=<span class="hljs-string">&#x27;ls -ldh&#x27;</span><br><span class="hljs-built_in">alias</span> la=<span class="hljs-string">&#x27;ls -A&#x27;</span><br><span class="hljs-built_in">alias</span> cdd=<span class="hljs-string">&#x27;cd /data/&#x27;</span><br><span class="hljs-built_in">alias</span> cde=<span class="hljs-string">&#x27;cd /etc/&#x27;</span><br><span class="hljs-built_in">alias</span> cdh=<span class="hljs-string">&#x27;cd /home/&#x27;</span><br><br><span class="hljs-built_in">alias</span> c=clear<br><span class="hljs-built_in">alias</span> d=<span class="hljs-string">&#x27;date +%F/%X&#x27;</span><br>HISTTIMEFORMAT=<span class="hljs-string">&#x27;%F %T  &lt;====&gt;  &#x27;</span><br>HISTIGNORE=<span class="hljs-string">&#x27;ignoredups,ignorespace&#x27;</span><br><span class="hljs-comment"># PS1=&#x27;\[\e[36;40m\][\u@\h \W]\$\e[m &#x27;  </span><br><br><span class="hljs-comment"># PS1=&#x27;$&#123;debian_chroot:+($debian_chroot)&#125;\[\033[01;31;1m\]\u\[\033[00;33;1m\]@\[\033[01;34;1m\]\h\[\033[00;33;1m\]:\[\033[00;32;1m\]\w \[\033[01;36;1m\]\$ \[\033[0;35;1m\]&#x27; </span><br><br><span class="hljs-comment"># PS1=&#x27;$&#123;debian_chroot:+($debian_chroot)&#125;\[\033[0;35;1m\][\[\033[01;31;1m\]\u\[\033[00;33;1m\]@\[\033[01;34;1m\]\h\[\033[00;33;1m\]: \[\033[00;32;1m\]\w\[\033[0;35;1m\]]\033[01;36;1m\]\$ \[\033[0;35;3m\]&#x27;</span><br><br><span class="hljs-comment">#PS1=&#x27;$&#123;debian_chroot:+($debian_chroot)&#125;\[\033[0;35;1m\][\[\033[01;31;1m\]\u\[\033[00;33;1m\]@\[\033[01;34;1m\]\h\[\033[00;33;1m\]: \[\033[00;32;1m\]\w \[\033[01;39;1m\]\A \[\033[0;35;1m\]]\[\033[01;36;1m\]\$ \[\033[01;36;1m\]==&gt; \[\033[0;35;0m\]&#x27;</span><br></code></pre></td></tr></table></figure>    </div></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">使文件生效<br>退出vim后，输入：<span class="hljs-built_in">source</span> ~/.bashrc 或者 . ~./bashrc<br></code></pre></td></tr></table></figure><hr><div class='spoiler collapsed'>    <div class='spoiler-title'>        代码折叠，点击展开    </div>    <div class='spoiler-content'>        <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs html">颜色代码:<br>字背景颜色: 40–49 字体颜色: 30—39<br>40: 黑 　　　　　　 30: 黑<br>41: 红 　　　　　　 31: 红<br>42: 绿 　　　　　　 32: 绿<br>43: 黄 　　　　　　 33: 黄<br>44: 蓝 　　　　　　 34: 蓝<br>45: 紫 　　　　　　 35: 紫<br>46: 深绿 　　　　　　 36: 深绿<br>47: 白色 　　　　　　 37: 白色<br><br>ANSI控制码:<br>\033[0m 关闭所有属性<br>\033[1m 设置高亮度<br>\033[3m 斜体字符<br>\033[4m 下划线<br>\033[5m 闪烁<br>\033[7m 反显<br>\033[8m 消隐<br>\033[30m – \033[37m 设置前景色<br>\033[40m – \033[47m 设置背景色<br>\033[nA 光标上移n行<br>\03[nB 光标下移n行<br>\033[nC 光标右移n行<br>\033[nD 光标左移n行<br><br>默认的特殊符号所代表的意义：<br>\d ：代表日期，格式为weekday month date，例如：“Mon Aug 1”<br>\H ：完整的主机名称。例如：我的机器名称为：fc4.linux，则这个名称就是fc4.linux<br>\h ：仅取主机的第一个名字，如上例，则为fc4，.linux则被省略<br>\t ：显示时间为24小时格式，如：HH：MM：SS<br>\T ：显示时间为12小时格式<br>\A ：显示时间为24小时格式：HH：MM<br>\u ：当前用户的账号名称<br>\v ：BASH的版本信息<br>\w ：完整的工作目录名称。家目录会以 ~代替<br>\W ：利用basename取得工作目录名称，所以只会列出最后一个目录<br># ：下达的第几个命令<br>$ ：提示字符，如果是root时，提示符为：# ，普通用户则为：$<br><br>echo -e &quot;\033[32m输出绿色字符串\033[0m&quot;<br>echo -e &quot;\033[43;35m输出黄色背景绿色字符串\033[0m&quot;<br>echo -e &quot;\033[1;43;35m输出高亮黄色背景绿色字符串\033[0m&quot;<br>echo -e &quot;\033[5;43;35m输出闪烁黄色背景绿色字符串\033[0m&quot;<br></code></pre></td></tr></table></figure>    </div></div><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
      <category>bash</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>bash</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CentOS 函数</title>
    <link href="/p/function.html"/>
    <url>/p/function.html</url>
    
    <content type="html"><![CDATA[<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a><strong>函数</strong></h1><p id="hitokoto">获取中...</p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><h2 id="函数-1"><a href="#函数-1" class="headerlink" title="函数"></a><strong>函数</strong></h2><ul><li><p><code>函数由两部分组成 ：函数名和函数体</code></p></li><li><p><strong>格式</strong> ：</p><ul><li>语法一 ：</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-function"><span class="hljs-title">f_name</span></span> ()&#123;<br>...函数体...<br>&#125;<br></code></pre></td></tr></table></figure><pre><code class="hljs">* 语法二 ：</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> f_name &#123;<br>    ...函数体...<br>&#125;<br></code></pre></td></tr></table></figure><pre><code class="hljs">* 语法三 ：</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">f_name</span></span>()&#123;<br>    ...函数体...<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>函数function是由若干条shell命令组成的语句块，实现代码重用和模块化编程</p></li><li><p>函数function并不是一个单独的进程，不能独立运行；它是shell程序的一部分</p></li><li><p>函数与shell程序的区别 ：</p><ul><li>shell程序在子shell中运行</li><li>函数在当前shell中运行</li></ul></li><li><p>删除shell函数 ：unset function_name</p></li></ul><p><strong>示例</strong> ：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#切换至etc目录</span><br>    [root@CentOS7 data]<span class="hljs-comment"># fk()&#123;</span><br>    &gt; <span class="hljs-built_in">cd</span> /etc<br>    &gt; &#125;<br>    [root@CentOS7 data]<span class="hljs-comment"># fk</span><br>    [root@CentOS7 etc]<span class="hljs-comment">#</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#删除该函数</span><br><span class="hljs-comment">#或者用户退出系统后，自动删除</span><br>    [root@CentOS7 etc]<span class="hljs-comment"># unset fk</span><br>    [root@CentOS7 etc]<span class="hljs-comment"># fk</span><br>    bash: fk: <span class="hljs-built_in">command</span> not found...<br>    Similar <span class="hljs-built_in">command</span> is: <span class="hljs-string">&#x27;fc&#x27;</span><br>    [root@CentOS7 etc]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><p><strong>在脚本中定义及使用函数</strong></p><ul><li>函数在使用前必须定义，因此应将函数定义放在脚本开始部分，直至shell首次发现它后才能使用</li><li>调用函数仅使用其函数名即可</li></ul><p><strong>使用函数检查磁盘最大使用率</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@CentOS7 etc]<span class="hljs-comment"># vim max_disk.sh </span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment"># Maximum disk occupancy </span><br><span class="hljs-function"><span class="hljs-title">maxdf</span></span>()<br>&#123;<br><span class="hljs-built_in">echo</span> `<span class="hljs-built_in">df</span> -h |grep <span class="hljs-string">&quot;^/dev/sd&quot;</span>|<span class="hljs-built_in">tr</span> -s <span class="hljs-string">&quot; &quot;</span> |<span class="hljs-built_in">cut</span> -d<span class="hljs-string">&quot; &quot;</span> -f5 |<span class="hljs-built_in">sort</span> -n |<span class="hljs-built_in">cut</span> -d<span class="hljs-string">&quot;%&quot;</span> -f1 |<span class="hljs-built_in">tail</span> -1`<br>&#125;<br>    <span class="hljs-built_in">echo</span> Maxdf=`maxdf`<br><br><span class="hljs-comment">#运行脚本</span><br>[root@CentOS7 etc]<span class="hljs-comment"># sh max_disk.sh </span><br>Maxdf=17<br></code></pre></td></tr></table></figure><ul><li>使子进程也可使用 ：<ul><li><code>声明</code>：export -f function_name</li><li><code>查看 </code>：export -f 或 declare -xf</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@CentOS7 ~]<span class="hljs-comment"># go()&#123;     #创建一个函数</span><br>&gt; <span class="hljs-built_in">cd</span> /data/scripts/<br>&gt; <span class="hljs-built_in">ls</span><br>&gt; \<span class="hljs-built_in">rm</span> *<br>&gt; <span class="hljs-built_in">touch</span> firstfun<br>&gt; <span class="hljs-built_in">echo</span> &#123;1..9&#125; &gt; firstfun<br>&gt; &#125;<br><br>[root@CentOS7 ~]<span class="hljs-comment"># export -f go  #声明该函数在其子进程依旧有效</span><br><br>[root@CentOS7 ~]<span class="hljs-comment"># export -f     #查看函数</span><br><span class="hljs-function"><span class="hljs-title">go</span></span> () <br>&#123; <br>    <span class="hljs-built_in">cd</span> /data/scripts/;<br>    <span class="hljs-built_in">ls</span> --color=auto;<br>    \<span class="hljs-built_in">rm</span> *;<br>    <span class="hljs-built_in">touch</span> firstfun;<br>    <span class="hljs-built_in">echo</span> &#123;1..9&#125; &gt; firstfun<br>&#125;<br><span class="hljs-built_in">declare</span> -fx go<br><br>[root@CentOS7 ~]<span class="hljs-comment"># go    #执行一次该函数</span><br>f1.apk  f2.apk  f3.apk  f4.apk  f5.apk  f6.apk  f7.apk  f8.apk  f9.apk<br><br>[root@CentOS7 scripts]<span class="hljs-comment"># ls</span><br>firstfun<br><br>[root@CentOS7 scripts]<span class="hljs-comment"># cat firstfun </span><br>1 2 3 4 5 6 7 8 9<br><br>[root@CentOS7 scripts]<span class="hljs-comment"># unset go    #删除该函数</span><br><br>[root@CentOS7 scripts]<span class="hljs-comment"># export -f   #重新查看该函数</span><br><br>[root@CentOS7 scripts]<span class="hljs-comment"># go      #重新执行该函数</span><br>bash: go: <span class="hljs-built_in">command</span> not found...<br><br>[root@CentOS7 scripts]<span class="hljs-comment"># export -f go    #重新声明该函数</span><br>-bash: <span class="hljs-built_in">export</span>: go: not a <span class="hljs-keyword">function</span><br></code></pre></td></tr></table></figure><ul><li><strong>或者</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@CentOS7 scripts]<span class="hljs-comment"># hello()&#123;</span><br>&gt; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;hello,are you ok?&quot;</span><br>&gt; &#125;<br><br>[root@CentOS7 scripts]<span class="hljs-comment"># vim hello_fun.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-function"><span class="hljs-title">haha</span></span>()&#123;<br>hello<br>&#125;<br><span class="hljs-built_in">echo</span> `haha`<br><br>[root@CentOS7 scripts]<span class="hljs-comment"># export -f hello</span><br><br><span class="hljs-comment">#运行脚本</span><br>[root@CentOS7 scripts]<span class="hljs-comment"># sh hello_fun.sh</span><br>hello,are you ok?<br></code></pre></td></tr></table></figure><ul><li><strong>又或者</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@CentOS7 scripts]<span class="hljs-comment"># vim one.sh </span><br><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-function"><span class="hljs-title">one</span></span> ()<br>&#123;<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;let&#x27;s go to play computer?&quot;</span><br>&#125;<br><br>[root@CentOS7 scripts]<span class="hljs-comment"># vim two.sh </span><br><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-function"><span class="hljs-title">two</span></span> ()<br>&#123;<br>one<br>three<br>&#125;<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;`two`&quot;</span>    <span class="hljs-comment">#添加&quot; &quot;可保留原有格式，而非打印在同一行</span><br><br>[root@CentOS7 scripts]<span class="hljs-comment"># vim three.sh</span><br><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-function"><span class="hljs-title">three</span></span> ()<br>&#123;<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;That&#x27;s good idea.&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li><strong>若未执行 export -f function_name 则会出现 ：</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#运行脚本</span><br>[root@CentOS7 scripts]<span class="hljs-comment"># sh two.sh </span><br>two.sh: line 3: one: <span class="hljs-built_in">command</span> not found<br>two.sh: line 4: three: <span class="hljs-built_in">command</span> not found<br><br>[root@CentOS7 scripts]<span class="hljs-comment"># </span><br></code></pre></td></tr></table></figure><ul><li><strong>所以</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@CentOS7 scripts]<span class="hljs-comment"># . one.sh </span><br>[root@CentOS7 scripts]<span class="hljs-comment"># . three.sh</span><br>[root@CentOS7 scripts]<span class="hljs-comment"># export -f one</span><br>[root@CentOS7 scripts]<span class="hljs-comment"># export -f three</span><br><br><span class="hljs-comment">#运行脚本</span><br>[root@CentOS7 scripts]<span class="hljs-comment"># sh two.sh </span><br><span class="hljs-built_in">let</span><span class="hljs-string">&#x27;s go to play computer?</span><br><span class="hljs-string">That&#x27;</span>s good idea.<br></code></pre></td></tr></table></figure><ul><li><strong>批量创建用户</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#准备用户名单</span><br>[root@CentOS7 data]<span class="hljs-comment"># vim name.txt </span><br>lisuo<br>laowang<br><br>[root@CentOS7 data]<span class="hljs-comment"># vim batch_user2.sh </span><br><span class="hljs-comment">#!/bin/bash</span><br>. /etc/init.d/functions<br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> = <span class="hljs-string">&#x27;-c&#x27;</span> ];<span class="hljs-keyword">then</span><br>        <span class="hljs-keyword">for</span> USER <span class="hljs-keyword">in</span> `<span class="hljs-built_in">cat</span> /data/name.txt`;<span class="hljs-keyword">do</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">id</span> <span class="hljs-variable">$USER</span> &amp;&gt; /dev/null;<span class="hljs-keyword">then</span><br>action <span class="hljs-string">&quot;<span class="hljs-variable">$USER</span> is exist.&quot;</span> <span class="hljs-literal">false</span><br><span class="hljs-keyword">else</span><br>useradd <span class="hljs-variable">$USER</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-variable">$USER</span> | passwd --stdin <span class="hljs-variable">$USER</span> &amp;&gt; /dev/null<br>action <span class="hljs-string">&quot;<span class="hljs-variable">$USER</span> is created.&quot;</span> <span class="hljs-literal">true</span><br><span class="hljs-keyword">fi</span><br><span class="hljs-keyword">done</span><br>        <span class="hljs-keyword">elif</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> = <span class="hljs-string">&#x27;-r&#x27;</span> ];<span class="hljs-keyword">then</span><br><span class="hljs-keyword">for</span> USER <span class="hljs-keyword">in</span> `<span class="hljs-built_in">cat</span> /data/name.txt`;<span class="hljs-keyword">do</span><br>userdel -r <span class="hljs-variable">$USER</span> &amp;&gt; /dev/null<br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$USER</span> is removed.&quot;</span><br><span class="hljs-keyword">done</span><br><span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Usage: `basename <span class="hljs-variable">$0</span>` -c |-r &quot;</span><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment">#运行脚本</span><br>[root@CentOS7 data]<span class="hljs-comment"># sh batch_user2.sh -r</span><br>lisuo is removed.<br>laowang is removed.<br><br><span class="hljs-comment">#运行脚本</span><br>[root@CentOS7 data]<span class="hljs-comment"># sh batch_user2.sh -c</span><br>lisuo is created.                                          [  OK  ]<br>laowang is created.                                        [  OK  ]<br>[root@CentOS7 data]<span class="hljs-comment"># </span><br><br><span class="hljs-comment">#查看执行脚本后是否成功创建用户</span><br>[root@CentOS7 data]<span class="hljs-comment"># cat /etc/passwd</span><br>....................................<br>lisuo:x:1002:1002::/home/lisuo:/bin/bash<br>laowang:x:1009:1009::/home/laowang:/bin/bash<br></code></pre></td></tr></table></figure><hr><p><strong>在centos中，函数保存在 <code>/etc/init.d/functions</code> 中，在脚本中<code>调用某函数之前</code></strong><br><strong>需要进行其<code>声明</code>，否则无法正常调用；系统中除了内置函数之外，用户也也可以编写函数、声明函数、调用函数；</strong></p><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#过滤搜索action函数关键词与其之后10行显示</span><br>[root@C7-3 data]<span class="hljs-comment"># grep -A10 &quot;^action&quot; /etc/init.d/functions </span><br><span class="hljs-function"><span class="hljs-title">action</span></span>() &#123;<br>    <span class="hljs-built_in">local</span> STRING rc<br><br>    STRING=<span class="hljs-variable">$1</span><br>    <span class="hljs-built_in">echo</span> -n <span class="hljs-string">&quot;<span class="hljs-variable">$STRING</span> &quot;</span><br>    <span class="hljs-built_in">shift</span><br>    <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span> &amp;&amp; success $<span class="hljs-string">&quot;<span class="hljs-variable">$STRING</span>&quot;</span> || failure $<span class="hljs-string">&quot;<span class="hljs-variable">$STRING</span>&quot;</span><br>    rc=$?<br>    <span class="hljs-built_in">echo</span><br>    <span class="hljs-built_in">return</span> <span class="hljs-variable">$rc</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#删除函数</span><br><span class="hljs-built_in">unset</span> function_name<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@C7-3 data]<span class="hljs-comment"># cat test.sh </span><br><span class="hljs-comment">#!/bin/bash</span><br>. /etc/init.d/functions    <span class="hljs-comment">#声明函数</span><br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$1</span> = 0 ];<span class="hljs-keyword">then</span>         <span class="hljs-comment">#$1为脚本名后输入的第一个参数</span><br>action <span class="hljs-string">&quot;<span class="hljs-variable">$1</span> is good!&quot;</span> <span class="hljs-literal">true</span>  <span class="hljs-comment">#调用action 打印结果</span><br><span class="hljs-keyword">else</span><br>action <span class="hljs-string">&quot;<span class="hljs-variable">$1</span> is bad!&quot;</span> <span class="hljs-literal">false</span><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@C7-3 data]<span class="hljs-comment"># bash test.sh 0</span><br>0 is good!                                                 [  OK  ]<br>[root@C7-3 data]<span class="hljs-comment"># bash test.sh 1</span><br>1 is bad!                                                  [FAILED]<br></code></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200620115608308.png"></p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu安装</title>
    <link href="/p/ubuntu.html"/>
    <url>/p/ubuntu.html</url>
    
    <content type="html"><![CDATA[<p id="hitokoto">获取中...</p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><p>@[toc]</p><p><strong>Ubuntu 1804-server 下载</strong><br><img src="https://img-blog.csdnimg.cn/20191228083326655.png"></p><p><strong>Ubuntu 1904-server 下载</strong><br><img src="https://img-blog.csdnimg.cn/20191228083350180.png"></p><p><a href="http://cdimage.ubuntu.com/releases/">ubuntu server(服务器版)</a>  </p><p><a href="http://releases.ubuntu.com/">ubuntu desktop(桌⾯版)</a></p><p><a href="https://pan.baidu.com/s/1ll8Y7oAUKoeTf3xHY450LA">vmware workstations15下载链接 提取码: bnih</a></p><h2 id="安装步骤-开始-："><a href="#安装步骤-开始-：" class="headerlink" title="安装步骤(开始)："></a>安装步骤(开始)：</h2><p>1<br><img src="https://img-blog.csdnimg.cn/20191228084311521.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>2<br><img src="https://img-blog.csdnimg.cn/20191228084320970.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>3<br><img src="https://img-blog.csdnimg.cn/20191228084323397.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>4<br><img src="https://img-blog.csdnimg.cn/201912280843381.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>5<br><img src="https://img-blog.csdnimg.cn/20191228084347637.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>6<br><img src="https://img-blog.csdnimg.cn/20191228084354151.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>7<br><img src="https://img-blog.csdnimg.cn/2019122808440570.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>8<br><img src="https://img-blog.csdnimg.cn/20191228084413157.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>9<br><img src="https://img-blog.csdnimg.cn/20191228084419596.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>10<br><img src="https://img-blog.csdnimg.cn/20191228084438224.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>11<br><img src="https://img-blog.csdnimg.cn/20191228084446623.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>12<br><img src="https://img-blog.csdnimg.cn/20191228084454135.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>13<br><img src="https://img-blog.csdnimg.cn/20191228084501855.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>14<br><img src="https://img-blog.csdnimg.cn/20191228084514110.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>15<br><img src="https://img-blog.csdnimg.cn/20191228084520361.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>16<br><img src="https://img-blog.csdnimg.cn/20191228084530290.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>17<br><img src="https://img-blog.csdnimg.cn/20191228084543748.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>18<br><img src="https://img-blog.csdnimg.cn/20191228084551166.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>19<br><img src="https://img-blog.csdnimg.cn/20191228084600736.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>20<br><img src="https://img-blog.csdnimg.cn/20191228084603927.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>21<br><img src="https://img-blog.csdnimg.cn/20191228084615839.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>22<br><img src="https://img-blog.csdnimg.cn/20191228084623971.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>23<br><img src="https://img-blog.csdnimg.cn/20191228084631432.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>24<br><img src="https://img-blog.csdnimg.cn/20191228084633648.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>25<br><img src="https://img-blog.csdnimg.cn/20191228084649953.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>26<br><img src="https://img-blog.csdnimg.cn/2019122808465951.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>27<br><img src="https://img-blog.csdnimg.cn/20191228084712172.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>28<br><img src="https://img-blog.csdnimg.cn/20191228084723918.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>29<br><img src="https://img-blog.csdnimg.cn/20191228084732301.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>30<br><img src="https://img-blog.csdnimg.cn/20191228084740309.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>31<br><img src="https://img-blog.csdnimg.cn/20191228084748146.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>32<br><img src="https://img-blog.csdnimg.cn/201912280847551.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>33<br><img src="https://img-blog.csdnimg.cn/20191228084805287.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>34<br><img src="https://img-blog.csdnimg.cn/20191228084816399.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>35<br><img src="https://img-blog.csdnimg.cn/20191228084822942.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>36<br><img src="https://img-blog.csdnimg.cn/20191228084833129.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>37<br><img src="https://img-blog.csdnimg.cn/20191228084841495.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>38<br><img src="https://img-blog.csdnimg.cn/20191228084846620.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>39<br><img src="https://img-blog.csdnimg.cn/20191228084901330.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>40<br><img src="https://img-blog.csdnimg.cn/20191228084907900.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>41<br><img src="https://img-blog.csdnimg.cn/20191228084916639.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>42<br><img src="https://img-blog.csdnimg.cn/20191228084929924.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>43<br><img src="https://img-blog.csdnimg.cn/20191228084936704.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>44<br><img src="https://img-blog.csdnimg.cn/20191228084943893.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>45<br><img src="https://img-blog.csdnimg.cn/2019122808495182.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70"><br>46</p><h2 id="安装步骤-结束-："><a href="#安装步骤-结束-：" class="headerlink" title="安装步骤(结束)："></a>安装步骤(结束)：</h2><p>#重启虚拟机<br>#基础配置</p><p>student@U:~$ sudo -i<br>sudo: unable to resolve host U<br>[sudo] password for td:<br>[root@U ~]# </p><hr><p>[root@U ~]# echo ‘127.0.0.1 U8’ &gt;&gt; &#x2F;etc&#x2F;hosts<br>[root@U ~]# echo ‘U8’ &gt; &#x2F;etc&#x2F;hostname</p><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@U8 ~]<span class="hljs-comment"># vim /root/.bashrc</span><br><span class="hljs-comment">#追加以下内容</span><br><span class="hljs-comment">################# Custom Alias ############</span><br><span class="hljs-built_in">alias</span> c=clear<br><span class="hljs-built_in">alias</span> d=<span class="hljs-string">&#x27;date +%F/%X&#x27;</span><br>HISTTIMEFORMAT=<span class="hljs-string">&#x27;%F %T  &lt;====&gt;  &#x27;</span><br>HISTIGNORE=<span class="hljs-string">&#x27;ignoredups,ignorespace&#x27;</span><br>PS1=<span class="hljs-string">&#x27;\[\e[36;40m\][\u@\h \W]\$\e[m &#x27;</span> <br></code></pre></td></tr></table></figure><p>[root@U8 ~]# . &#x2F;root&#x2F;.bashrc </p><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@U8 ~]<span class="hljs-comment"># vim /root/.vimrc </span><br><span class="hljs-built_in">set</span> ignorecase<br><span class="hljs-built_in">set</span> cursorline                                                                                    <br><span class="hljs-built_in">set</span> autoindent<br>autocmd BufNewFile *.sh <span class="hljs-built_in">exec</span> <span class="hljs-string">&quot;:call SetTitle()&quot;</span>                                                           <br>func SetTitle()<br><span class="hljs-keyword">if</span> <span class="hljs-built_in">expand</span>(<span class="hljs-string">&quot;%:e&quot;</span>) == <span class="hljs-string">&#x27;sh&#x27;</span><br>call setline(1,<span class="hljs-string">&quot;#!/bin/bash&quot;</span>)<br>call setline(2,<span class="hljs-string">&quot;###########################################&quot;</span>)<br>call setline(5,<span class="hljs-string">&quot;#Date： &quot;</span>.strftime(<span class="hljs-string">&quot;%Y-%m-%d               &quot;</span>))<br>call setline(6,<span class="hljs-string">&quot;#************:   *********             ###############&quot;</span>)<br>call setline(7,<span class="hljs-string">&quot;#FileName： &quot;</span>.<span class="hljs-built_in">expand</span>(<span class="hljs-string">&quot;%&quot;</span>))<br>call setline(10,<span class="hljs-string">&quot;###########################################&quot;</span>)<br>call setline(11,<span class="hljs-string">&quot;&quot;</span>)<br>endif<br>endfunc<br>autocmd BufNewFile * normal G<br><br><span class="hljs-comment">#######更便利的使用 vim #####若不想使用某功能即在该行首加 &quot; 即可#########</span><br><span class="hljs-built_in">set</span> clipboard=unnamed           <span class="hljs-string">&quot; 设置vim中默认使用选择缓冲区寄存器,y复制,p粘贴</span><br><span class="hljs-string">set pastetoggle=&lt;F1&gt;        &quot;</span> 斩杀复制粘贴时产生的恶心的缩进<br><span class="hljs-built_in">set</span> ai                          <span class="hljs-string">&quot; 自动缩进，新行与前面的行保持—致的自动空格</span><br><span class="hljs-string">set cursorline                  &quot;</span> 显示光标行<br><span class="hljs-built_in">set</span> aw                          <span class="hljs-string">&quot; 自动写，转入shell或使用：n编辑其他文件时，当前的缓冲区被写入</span><br><span class="hljs-string">set flash                       &quot;</span> 在出错处闪烁但不呜叫(缺省)<br><span class="hljs-built_in">set</span> ic                          <span class="hljs-string">&quot; 在查询及模式匹配时忽赂大小写</span><br><span class="hljs-string">&quot;</span><span class="hljs-built_in">set</span> number                      <span class="hljs-string">&quot; 屏幕左边显示行号</span><br><span class="hljs-string">set showmatch                   &quot;</span> 显示括号配对，当键入“]”“)”时，高亮度显示匹配的括号<br><span class="hljs-built_in">set</span> showmode                    <span class="hljs-string">&quot; 处于文本输入方式时加亮按钮条中的模式指示器</span><br><span class="hljs-string">set warn                        &quot;</span> 对文本进行了新的修改后，离开shell时系统给出显示(缺省)<br><span class="hljs-built_in">set</span> ws                          <span class="hljs-string">&quot; 在搜索时如到达文件尾则绕回文件头继续搜索</span><br><span class="hljs-string">set wrap                        &quot;</span> 长行显示自动折行<br>colorscheme evening             <span class="hljs-string">&quot; 设定背景为夜间模式</span><br><span class="hljs-string">filetype plugin on              &quot;</span> 自动识别文件类型，自动匹配对应的, “文件类型Plugin.vim”文件，使用缩进定义文件<br><span class="hljs-built_in">set</span> autoindent                  <span class="hljs-string">&quot; 设置自动缩进：即每行的缩进值与上一行相等；使用 noautoindent 取消设置</span><br><span class="hljs-string">set cindent                     &quot;</span> 以C/C++的模式缩进<br><span class="hljs-built_in">set</span> noignorecase                <span class="hljs-string">&quot; 默认区分大小写</span><br><span class="hljs-string">set ruler                       &quot;</span> 打开状态栏标尺<br><span class="hljs-built_in">set</span> scrolloff=5                 <span class="hljs-string">&quot; 设定光标离窗口上下边界 5 行时窗口自动滚动</span><br><span class="hljs-string">set shiftwidth=4                &quot;</span> 设定 &lt;&lt; 和 &gt;&gt; 命令移动时的宽度为 4<br><span class="hljs-built_in">set</span> softtabstop=4               <span class="hljs-string">&quot; 使得按退格键时可以一次删掉 4 个空格,不足 4 个时删掉所有剩下的空格）</span><br><span class="hljs-string">set tabstop=4                   &quot;</span> 设定 tab 长度为 4<br><span class="hljs-built_in">set</span> wrap                        <span class="hljs-string">&quot; 自动换行显示</span><br><span class="hljs-string">syntax enable</span><br><span class="hljs-string">syntax on                       &quot;</span> 自动语法高亮<br><span class="hljs-built_in">set</span> autoindent                  <span class="hljs-string">&quot;自动对齐</span><br><span class="hljs-string">set smartindent                 &quot;</span>智能对齐<br><span class="hljs-string">&quot;set mouse=a                     &quot;</span>使用鼠标<br><span class="hljs-string">&quot;set mouse=v                    &quot;</span>使用鼠标选定复制<br><span class="hljs-string">&quot;inoremap ( ()&lt;ESC&gt;i            &quot;</span>括号自动补齐<span class="hljs-string">&quot;&gt;</span><br><span class="hljs-string">&quot;</span>inoremap [ []&lt;ESC&gt;i<br><span class="hljs-string">&quot;inoremap &#123; &#123;&#125;&lt;ESC&gt;i</span><br><span class="hljs-string">&quot;</span>inoremap &lt; &lt;&gt;&lt;ESC&gt;i<br></code></pre></td></tr></table></figure><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 修改网卡名称为eth0</span><br>[root@U9 ~]<span class="hljs-comment"># vim /etc/default/grub</span><br>GRUB_DEFAULT=0<br>GRUB_TIMEOUT_STYLE=hidden<br>GRUB_TIMEOUT=2<br>GRUB_DISTRIBUTOR=\`lsb_release -i -s 2&gt; /dev/null || <span class="hljs-built_in">echo</span> Debian`<br>GRUB_CMDLINE_LINUX_DEFAULT=<span class="hljs-string">&quot;&quot;</span><br>GRUB_CMDLINE_LINUX=<span class="hljs-string">&quot;net.ifnames=0 biosdevname=0&quot;</span><br></code></pre></td></tr></table></figure><p>[root@U9 ~]# update-grub<br>Sourcing file <code>/etc/default/grub&#39; Sourcing file </code>&#x2F;etc&#x2F;default&#x2F;grub.d&#x2F;init-select.cfg’<br>Generating grub configuration file …<br>Found linux image: &#x2F;boot&#x2F;vmlinuz-5.0.0-13-generic<br>Found initrd image: &#x2F;boot&#x2F;initrd.img-5.0.0-13-generic<br>done</p><p>#修改静态IP（空格有严格要求）：<br>[root@U ~]# vim &#x2F;etc&#x2F;netplan&#x2F;01-netcfg.yaml</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#内容如下：</span><br>network:<br>  version: 2<br>  renderer: networkd<br>  ethernets:<br>    eth0:<br>      addresses: [192.168.124.7/24]<br>      gateway4: 192.168.124.10<br>      dhcp4: no<br>      nameservers:<br>       addresses: [8.8.8.8]<br></code></pre></td></tr></table></figure><p>#使用vim编辑文件时，可使用该命令阻止递进<br>:set paste</p><p>[root@U ~]# netplan apply<br>[root@U ~]# ping <a href="http://www.baidu.com/">www.baidu.com</a><br>测试能否ping通外部网络；若通即完成</p><hr><p>Ubuntu无法使用xshell连接如何操作：<br>[root@U ~]# apt install openssh-server<br>[root@U ~]# service ssh start</p><hr><p>Ubuntu无法使用scp传输文件如何操作：<br>[root@U ~]# vim &#x2F;etc&#x2F;ssh&#x2F;sshd_config<br>PermitRootLogin yes</p><hr><p>Ubuntu无法使用root在Xshell直接登录如何操作：<br>[root@U ~]# vim &#x2F;etc&#x2F;ssh&#x2F;sshd_config<br>#追加此行</p><p>PasswordAuthentication yes</p><hr><p>一定要记得修改文件后，重启服务</p><p>#重启服务<br>[root@U ~]# &#x2F;etc&#x2F;init.d&#x2F;ssh restart<br>[ ok ] Restarting ssh (via systemctl): ssh.service.</p><hr><h2 id="Ubuntu软件源配置"><a href="#Ubuntu软件源配置" class="headerlink" title="Ubuntu软件源配置"></a>Ubuntu软件源配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@U ~]<span class="hljs-comment"># cd /etc/apt/</span><br>[root@U apt]<span class="hljs-comment"># cp sources.list sources.list.backup</span><br>[root@U apt]<span class="hljs-comment"># vim sources.list</span><br><span class="hljs-comment">#追加以下所有内容</span><br><br><span class="hljs-comment">#默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse<br><span class="hljs-comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br> <br></code></pre></td></tr></table></figure><h2 id="常用软件包安装"><a href="#常用软件包安装" class="headerlink" title="常用软件包安装"></a>常用软件包安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt install iproute2 ntpdate tcpdump telnet traceroute nfs-kernel-server \<br>nfs-common lrzsz tree openssl libssl-dev libpcre3 libpcre3-dev zlib1g-dev \<br>ntpdate tcpdump telnet traceroute gcc openssh-server iotop unzip zip make -y<br></code></pre></td></tr></table></figure><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CentOS安装</title>
    <link href="/p/centos.html"/>
    <url>/p/centos.html</url>
    
    <content type="html"><![CDATA[<p id="hitokoto">获取中...</p><script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto" defer></script><hr><p>@<a href="CentOS%E5%AE%89%E8%A3%85">toc</a></p><p><strong>LINUX</strong><br><img src="https://img-blog.csdnimg.cn/20190921091053644.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="获取发行版的途径："><a href="#获取发行版的途径：" class="headerlink" title="获取发行版的途径："></a>获取发行版的途径：</h3><p><strong>CentOS</strong></p><p><a href="https://wiki.centos.org/Download">官方</a></p><p><a href="http://mirrors.aliyun.com/">阿里云</a></p><p><a href="http://mirrors.sohu.com/">搜狐</a></p><p><a href="http://mirrors.163.com/">网易</a></p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/centos/">清华源</a></p><p><strong>Ubuntu</strong></p><p><a href="http://cdimage.ubuntu.com/releases/">官方</a></p><hr><p><a href="https://pan.baidu.com/s/1ll8Y7oAUKoeTf3xHY450LA">vmware workstations15下载链接</a> 提取码: <strong>bnih</strong></p><h3 id="CentOS安装步骤："><a href="#CentOS安装步骤：" class="headerlink" title="CentOS安装步骤："></a>CentOS安装步骤：</h3><ul><li>安装 vmware workstations15，并打开</li><li><img src="https://img-blog.csdnimg.cn/20190921091135421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>点击创建新的虚拟机，选择第一个</li><li><img src="https://img-blog.csdnimg.cn/20190921091206967.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>下一步</li><li><img src="https://img-blog.csdnimg.cn/20190921091240336.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"> </li><li>选择你下载的镜像类型，例如：CentOS 7 64位</li><li><img src="https://img-blog.csdnimg.cn/20190921091300245.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>给你的虚拟机取一个名字；将虚拟机安装在某个路径。</li><li>在C&#x2F;D盘中新建一个文件夹</li><li><img src="https://img-blog.csdnimg.cn/20190921091316398.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>设置200G，无需担心你的磁盘不足，这里是虚拟磁盘，虚拟机不会立刻占光你的计算机200G。</li><li>下面选择第一个，然后下一步</li><li><img src="https://img-blog.csdnimg.cn/20190921091331974.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>选择CD&#x2F;dvd;使用IOS镜像文件；浏览并打开你下载的镜像（iso文件）</li><li><img src="https://img-blog.csdnimg.cn/20190921091347271.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>确定；开启此虚拟机（第一行是直接安装，第二行是测试ISO文件完整性不进行安装）</li><li><img src="https://img-blog.csdnimg.cn/20190921091408182.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>回车</li><li><img src="https://img-blog.csdnimg.cn/20190921091434271.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>选择默认English；点击Continue</li><li><img src="https://img-blog.csdnimg.cn/20190921091452134.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>点击DATA&amp;TIME；点击上海位置；Done </li><li><img src="https://img-blog.csdnimg.cn/20190921091508907.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>点击SOFTWORK SELECTION；选择GNOME Desktop</li><li><img src="https://img-blog.csdnimg.cn/20190921091528616.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>点击INSTALLATION DESTINATION</li><li>下面的Other Storage Options选择第二个；Done</li><li><img src="https://img-blog.csdnimg.cn/20190921092637820.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>中间选择Standard Partition</li><li>点击左下角+；分配磁盘空间（具体如何分配可随自己意愿）；Cancel</li><li><img src="https://img-blog.csdnimg.cn/20190921092715237.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>创建如图所示的分区；应注意&#x2F;data需要手动打出；创建确认点击Add mount point；全部创建完成后点击Done</li><li><img src="https://img-blog.csdnimg.cn/20190921092751108.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>确认无误后点击Accept Changes</li><li><img src="https://img-blog.csdnimg.cn/20190921092911884.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>点击KDUMP；取消Enable kdump；Done</li><li><img src="https://img-blog.csdnimg.cn/20190921093005276.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>点击NETWORK&amp;HOST NAME；左下角修改主机名以便区分；右上角点击显示成ON；Done</li><li><img src="https://img-blog.csdnimg.cn/20190921093052852.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>做完以上工作，点击Begin Installation；点击ROOTPASSWORD，设置管理员密码（两遍）；Done</li><li><img src="https://img-blog.csdnimg.cn/2019092109314353.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>点击CREATE USER；设置普通用户全称，用户名，密码（两遍）；Done</li></ul><hr><ul><li><strong>如果你已完成以上所有操作，那么恭喜你已经完成了99%的安装，剩下的只需等待虚拟机安装完成；最后点击重启（Reboot）即可登录</strong></li><li><strong>根据你的电脑配置，安装所需时间并不相同；但这可能需要不短的时间（也许你可以去喝喝茶什么的？）</strong></li></ul><hr><p><img src="https://img-blog.csdnimg.cn/20190921091855232.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2R1c2hhbnNhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="点击跳至文章尾部"><a href="#点击跳至文章尾部" class="headerlink" title="点击跳至文章尾部"></a>点击跳至文章尾部</h3><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MD</title>
    <link href="/p/md.html"/>
    <url>/p/md.html</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="3503576a35601a368f301152c7daf7f82294dee415f564cec2dfb86250a977fe">62d7e6cc018e8efe1e3280d343a54d396ed0aea9210d19192ed9622aa4a8a6d0c94cd07fa896c0dbed04c6c48d4eb9b58bed796686e706321bfb442f19292628a2453dd4c76ea612c2e228fb1b2b3087adc71d5c8216acd7ab3664ce4586cc1692bd6a33ff5a1b24ad23c68f6ae611f5767a46bdfff7abf507f00dd581faf8a20b9d97d6cf1b474cf821ef33d5ed707796d50343c18264f60019942b0b9cd5b0a8fb868d98c10196df36930f7d084eb0936db9dc5cd5a4bea68add606080d74c49129519773e8e05595feba63bb5d73ec4cf146439eb6938b4a8201a746f7f72bf67f0a12e11313915ebd7cc5a8c75bcd2f34fa5e8719e25437d2a8ec57e9eeefccee5ce469cb82a7292a3e975b241db259661c8b6696584ccfac28846260df4ec99324eb95ed9dfaf1c7715e14e701241a7095dd8f56bec6367bd02f5efa372ff1cfc270898a912c1e3045a142ef394dc16e857a3545223b4613c7cdd217dc57286b32624bf07f13ec21fcf18a1d772f2911ce963ce3dd9c4464278ac7c9c8357ea800950244ab14090ebb4ced411a8d87924eb98043d538bd18e9a64acb18f883d63f2270eb0ca45e961819a244cbdac43b5dc83b617aeb79ad16e990993d5380733a504e79d95acea36da2d889c61083a96922c25078a59ca9126463dd80b0bc8316d2d933d53d75898dcb973ff802e7436df50a0e4a2e98860346c1b3fbce6e052df8fcd3b208dc6fdd3c2332c0db9808d6f44da97fc056c4e34942bc185f5f047e1531c16b5cdc59298bc36e97eec1ac1ffca56eccdb0c4d9f264b57f2f39cf3d0b0118ffc5fade0e729513f84172265f637618c35876525c27726b6d34b12dd17aaaa714c7adbd2bb0c6cc40d0658bbd27e0ce149bbcc17a6ca51fb69ffe7cc70d6bbdd7cfc32dbb570edf4380b1a6e69a652fb290957c0e2aa858953e0d70636563a9b5dbf1e1a3bdc997590961174374736f2e36320f557dd9907a1dc8bab6a73adda9f616e81221bbb0a0a455f8b7d1c4824f997cbe1f46626fe95c9529dd31e4a49c4a3a937e58b47429faf1da8d22c70bac4d43b934fce48b540119c43001a66603d09d33c67a7fa6cd3ad107c38b8995331745b4452e3642643b20b72af0142332c5c7efad127682b011951cd08325a872df2452709b40617b126d591b8b14090e38938c43855fc2c8febfd8246654fe0abe46b5a40cce80b24d7c70f1c0c3e7a18d4884e7665c82d6fed3bc787392239e548bfe76e290f05a04d060e92cf987217c3aeb3d2d1611827b8ec3010ecf602f69c148b97443959bb7c0d337451e62d43b02add6cc771c4f0a2336eabc2736e18f9b0d15ad52a776ee085df372c4794d4719e9770353277a921c39f0b4a8893b37e90a8a1ec63a7bef26b814e577acc8fbd558b36dabc62c3fa251775c65566d47b74ceec19596deef280ad6a328723e70b00a9d5803f94ad69290738ba81c52e164246f423d166af3ee25921789ef086530e843806fc6a399df85d139cc315c71c731517012b7fded75cd5e3e5576c797078bdd9d16327fe1a8c5bd735fd3e9587f2248f49dc460856ea7e8c9a11f64722e44fb81cb49e500d89bd96d3cfbfebf7c67d09da86aafa48a00b060e03de82a911ec575fa786545a49084987d319163953fe50a0045d6a205ad3c54590be9b9f090308353ca44bf033180c1af445db80499988b14bab5c63bd0c8b55e0160951670519b93ad3c939a01ff070a1c626d352eecb50fe3a35ad8e8f8298d43f65f9dc22eae3cfa487752e865ff1381bdb08008f7706a13eb4deaac39c12172b371c3eb12fb9bf306822c19b0935f9f246e28083a5d22a35369ebdc09a5b689ea3c0bd19ee71143aa182e47fbaf8a92c6693b12c7627e0bda8b7d24e75dca76380cc24b138eec6088f0a8200cfc7e7c26e06b65a8f1f55b7cd4f17b3c208eb02c2a8c04bc87d5e24795ac3eae198725a6550aac626a55cecf95f6bbc463b5b49523087407f28680c41020a3fe39b0283d132a957b3134f654177247b491e165eadd98a66d4ed70688cf0fda932dfc761b68741eb3b7ce9dccda79fdd39a5b8c9f2d52fb82d95b84962ece7a21ae4b43d602e3bc7c015f70811351abaae6a8e9fa06d1b1057a6d937c2a116fef7108ca433864bea9d698ba4d0215e70233f796798e3b5c67b3d742ef45ba531b8aa256a1a70d575d92e797c17ca8fab91a3a4845b86b48b4be7db405ea54b5bc90c87625bc50e6e9fc398b216a68fc87a03de2e53258522d9724d3b8d9736c1aa8f15f22ab2d18834821907aefcbbcfdbeaca78f0874cc3bf03bca0656cd99911d3ff47b1c5b15cb416a65763abb0de1ba77a5100e304fc13abc9c2ffa3164ceeb1ccd991966d102b6bdfc4e33f650c26e83f3f165bfb17e7feb257172a667862d7e116b5e7716ef59cf14afd3cd1ea68ccf8e18a0c698e41af5ff42dd0cb1a6caa40a9b10844451f23e59acdc2dd94eda91baec0ca48b3cf511896ec82f14cb9abf307c8e58ef0d64714eb3857ed14b9152b417e9cc0ba3bea19206918e20bdd2bda932d63a4cef1416d3d9884856996632edbeb59c25ca2fdc176b9e8087290644954201c86a55976f173cc27275e16709b9ef783b52d8a65f70ef5714331af903c5463ecc9f9ea253d5132f447f34bf7e72830505fbef8cbfb0668d56dc0fd81a954f3f004b98012f956f7cef062e56bd1e98bffccd9fdb2f3c476ef5e4d643089b8363de435acc3604000dc368433db5bf2fe1990ae43ff1e5356c4c91f5b59036d0261a86a18c47666bd922f8a3ca4d2fde9e91c94b71302e2b34b80a9f67d21e4bcc97c6f49eab125fa6e3a0c08ef1af3b7fde9bcab365e3efe487e79a17427d6270712b6acade656cd694185116d6a76abe16a0884a58b501f5f9dc45d62b717e1ec939e84502ff6f59f6e85a62c9273408c2823db67936db51c36ea170ce588f6b0b360e393618af1e55c0f67eac55369f21226bbda8de720528c4df825f648b02070ff3b92897f5a145d22585d9a9a4c5b3bb03ae9f235b7935a716352ac112a627963afd997ff6fd95b3f842afdf0cd945d4c1aeca3eac8c850319e60892789c263ba4e5afd66ca124172b6058991818dd30b7dd3f92cd7bdb1ec3ba1b82623ebbecb6bdc8c273dedceb75e0ade96a3cd306ecfb533e3301c669e50f39d95c041153e8a5565f6a8af81eca5c27fb674e9aa3273c8500f516ef0d1203c4a87177075cff4fe6186e7ecdb2998a454a911744d6b6e8d204c1e8cbafa6ce64210c7e21e8f5b2f4645ed368c49004b7de058b81c79242d3177586450424d66ee5bb5dd1a2fb016eb9f52a5bd407350b59f10b033c3b7ddf5422526f90fe4d62ac74daec8738666597741bcda599de4af4b24c450166a73c233ce837d79afa81e0ed82f7fb522ffb92fb5115d83e5998622c62106d17d7c69d0aeecda0ed58d0b202c22ccc512e01f0b71bd9ebc82dc0dfd852d5ecf867b7720aa0c1b8c9b5e7b66552577c5633b97d64ac44cf67c50762b4dd097d989435ffb43f73be73b8735e10323b213c59e2acf585116861a1fe6a46a96a87ce4704ec248f483824a8b3e0713142b4c7cc158ee951af1e2056824ea7da1b6931fa165dc102aea6ec57058aec1ea1920ac19d8344daa3ef1ca4c7aa192926f055368d97a726524b6739a32b436eb4aefc2367bf6d7ca1e3f796976868a8200fbc441f8bfdb13ffe5a2b9a065244c95fc13c7acac0e63acf91346ee3b64c4ada09bb1bcf85a6485cdc1a9292faacea87eb69f230e3fb3e5945f4e7338d09f886cf2c608ec71d486063971bade67e26219f97bc2f8d6aad69f599f7eca7424b84bf9d81d2dfb4e95a7a4ee04aafb3518ef872fb6a0edd40a073a98249af3f98a482c810e892d6a802d807a62da95bd26e550794b1c6441483b9454ab5092c8277d16e5249c75020a405296492871c84dd8813f184d1624bb4841cfdab6bb9b71957bbe8a509f5c59002d67c45fc602d5ed79bcb2b49c9a6ccb326184f596a02f3a7cd7a944524c7564c3971fea537c9fcafe669408fb0ded86736d8b5859ed840eaac4f8121b49184169aefb3f31b8a282fa259c8f13a629db80ddfce75f2266323c3f2beda7c9c6db2b5153cf711873b45340139b0b08c741f576b3665419346408e1e4183ff1a367ec49ee95aebd9cdb05f4c0d2419da2f27ee728a43b7a3b1ccc03dc754581b0de710feb5ff4dea1265aef0b585299751a98a1f6d8790d9e03d8fb2798d7b884dd90a84734304f6245a13b0c35b7e72ceeaa41ab9a328b1a14e423010805713c876576ab76caac30937d5ca1b679e181ff1ea7e1436e41505f946df4420cef803f70b74e867384212efebbac3fc92f6a3bf786f69fef8adb225499194b69e596d2cd424c1465224522f4a9b1498cf4092e5bf89313709cf8bcacaefd29ac3a54f2b8a172cbcb2b9b649c9316fe57de06b9d68e55f013cff944cf77822d1a48a9440245a1a1c014930a3e506668f3594406287e9d3b6228f6bed00881813be58e8d2ac9b249a5d3a1feab412d4922c93738b3a01509d4a04e7ea6e2e42a644044c588945d861d101d14d4dd9afbda65c8586a5b198e4a5cc999250aa8d8fb88e31c3ac2b89ac94d926f34885e4ef59dcaf62a03cfc2ea62b35599fbd97674e4732e632813ef7fdde28459923abe6be2caaf456996488666750c64621a1788df1a7daecd6f21ee65e2758349beff2a09bd420aaed47d63e0e4ce042adb8f691ec63d322e4953f889b755a0988075fab15b447cfd201d1a39e6087500236c746f7a097e5c823c860e82dc2b8d2ec446f5c6a853f1da083749dd32698f31804336179a9497f13389b02c0c77bb95fc1121991131cc8ef2353de67f5bd7259a8642491bc1a1cf6262d43fd905b123059599b0f289c4356d90a29fb90c8912814cd4a31505181daddcbe07aa7892f0b957d190f5923062341d72d46c0979c476fe9e02a39de304de885773fbb7d56db628dce250704397709cbac36b3cccd6b6cafb096911602ab85281f6755a353bb89e5439205a8b0fc093a893d97b815f9a24b43f83a6b0dacf193a41c37d8e55fdb600c9f00268b6d4ca12827a4e28c22801404d96e65c91a6bdc32b107d625725d0ae49795a2dc73b45e0901c9d614bda18a5f45dc508e6f1c6cefaf27d02dffcd0f26c2e29267e365d00acfac4663f50d9642ea15dbdcc4df0c7f14f3c2ab7d54902d1920d3e067bb647de59e4a062db854109be55a36f0fa184275e896ef01eedcf4022e6a9263e2737cf9b49089faa88e63106379ae6cb23554076855b9b37fc282e9247ade1c4dd62560d64e1d593728435c4de802ee51ce0e243dd70a41b2a0086aa01c7b9d150b132908bd925d0756ca8befce7f3e3bae9215f1d5759c36d190cffbe5ec2b962dc9be51aeb21290c23cb2ea5024ee4c107df3e5a3d8b4dabc449646c5e1d2e65a2220bf98584db617cfe28fdda3e2214460ac38d8690299b3e3667c5bf320f787672d18a85357a84f670c821c0343d1c85a07efc79dc2da8d116f5bb484a86625309982a656a62f7e0d801d50dd1d59bed6189ebafdfe6103d42d977074ee61bf8494460095834bc8de38d4d717efb9d26075c276b1afb959303220065a9fb3afe180116d75f3acadf78bb4e97f56763dae2bc7ac98124dba173b1ef63b7e6ff97430933edbcaf57ddad3ff138dcf1659ecbc3cdc3d5147a9744b414782886ca963d7736b5e23881ceefed421138a0fa823779aea5f0ab3eba0aea147439d34f359f15469ca121d91fbfc104ec4699b1cbf651d173c2638ded36838b861168cb91d2c1cc1a0a8ceecef52b20f0a9f8fd2281b9bbe2780227ad7af72ddb7c8e8bc3346480acc7f3d591c4b4b074b13eeaf6c4e128898fc3dab8f75286cbf5364f47b978ee1b54b7576cea750319dd1a2422653b5b0ce74616331d27e9154169598dd8777359d2d062425a5759d649f2d6d9a46037ace2eab3656a8ba29894bf35be0eec4eace2c81ac100093cff64d857f6c7502bfed0f4f41572fab6a0cb94d74b2c236f168bc79372e6dcde140a3f5a4800d0b6a42450469c0b71eb5660e1c0a45dc55b579f75d4f58b771f314ac40000a780a5d38cdac6753c6ec5038c90069190caa0aa705c850fd8ede735390627fca922629c3466d08fa30ee318358c75deb2d2942437d480f6e9a8edb0d6b9e8c932851912f40d1ebc87a2991f46339ee75f30fb895c2bd11143227bf2d3c2ae8e91bb301bfee1d1426c1510ce284ebb83c51771310765c7dd041a890ce8139f7f5a107b723539dbd4d634a27dc942340a87b80ed82713c90af85a0fd27e75534ec58f51f23fdf056a1773af47ea4b814e92546e3794d0e8114fdaf581a605de36111c23519b82fdea7b66fd7a5b2594ccfa5332cb666b315521d5331a5f69a3672647af6309f74d744caeea5586b33e1f62d441bfd9e9394fdf58bcc7553cf4d05a72c16eb1cf33788927d2dec0d8b9a69c07214f4144083f18f65d9dad2776474033ffb92cece98da7a3540d3198aa865aafcd3a6dd4df3328b73c41668566726f31ce1898532b9e6380db71ff243b97d0e2f86ad632e00969a2c76626b0f1548e2afae6fb3f37c980c776cbb77c900741911006aa6d7e74ca786ec2dd6021e88c00430181e29a395e2a4b94550c1f0274dd0cb75941d1a8e1733a9765aa8821982dab9c1d3a2b66f14e5ab19d7cfae9d2422733353a5209b3126800578df73ab52c11c783a534d00d002b1ee3b134fdd4f0f58f886df3ad98627d8c281e535b5cceac093a577ec90c0eab13b4ae1368c0685a0b754dfd0e3977faecd06fad2db85a775fe2fa9d0f428db9e6f91fed1ed3bafb09762408d6af1f993d13fdd7aee2859826cff469831e1c313f6d48e91334196092c0e8c201f6b991f5f64a618c102055fb3c0d16cbead3063060500e3032c41a591604ef322441a15288b5cf0d19059979c6c5e66ede009e330e6ab5e3a0200e37364f496dfdbb1a69a9caa58a6666afc41dfe5c7bfb8a7ede698c889426f25475f859369148b97a18ce71b27beaa9ee234c07239c71fed9c94b7095ade53eb06c4c5c31a0be07d6a3074d36a95da64cc4aacd0f718039ed294c477a8cf1a6866da9e34d110b6c8336c993c984843d89edbe2bfb4f3f267d6d190f718be22eb61002099ad794081cfea2dd459d8cf374a6a1541f666bc5ba4227826080614a990c459c3509d752da881ead7274581b07630effb49e34e3cc6b9f967ab7d46bb1a9ca0144f31f8cc01907fdbf104109f6b75c464486dab753e23d33b6cc9d9dd18cb86d82116a7c577eb32a3d1eac7d205bb5a5e27a47f7661f42cb03716be0823c4d43d61d4979456caec91d4d6b7297228586e50b66cf878ed2e887d71664ca00889caac94d3b106fc56af62bf71e2b19add720651f428a507a0543d7ea42df01327abdfa132bce3a8ddf9b0442a20665fffa6ec0f514a4bfdd73a6bad689980fbec8f09c4ef5b5983536d10514986da889ba5217bcc86277bca50ce2b2a78d28f85305c2d0ba115d481e017ed5bbdc9416c1cbc46496415ecb2d8a649d4bd79fccf13db7d4550280a91bc84c657c662de9764ba4777772c787fdbdbd4454c1db8f64940416bbb43e86917e13bd58277aee48243cc005cb85ab55d90720e5b0114f3d05bd5c6574e63f48d1b48ad5104ed6bd8d51212aa74348a2a416dd4ecf3fd37f522d1e5e6426ef482889496a4f98bb872d43f5c320ee26a90a7b181e32e0afff003c5ab172b69c8ca5006c68da3c9c9c504b96812055ba5d4dcb72e1a651633358bdcb56a84a232c48ae4dcd263ac0e8708d02d299b408a3acbe4529acadf914c8445cc313778e4b48656d73f93bc39d3f5b7f15f38927e626a55e35954ef02ca645ccd1214266fcdd684c7a41841e60393dfc2d0f8910078dc15ab9cef612259afb5a619638f0495a1d07de45efb0f97f24676ac82a388ebf283e49e4b6bac840a29a88245e687c8156446833494f3a714cbb19f0f40964c1117211ad4b796b5ec256e0c8176e41a03978c9f4d8c075cf4752fd7d7b65b0eff808e097fa60ac9bcd59ef7dda36c8b0883ce73ed1d03c0759a5344663f0ddb6db14de6e04525503bfcdf599c0f2b22f60c864ce57b3719dd5c9d5aaa0e4a32f23f6be399e8b7e05e2786699e180ca8608f47a6dcc8ba3c649bea038e305808de7c887469e33e27a5577d3d28055a56d7fba2fe2c9fd84e8c83133456ffce576914f5a672a413c64b0510049bfc44efb620b41e6bbbf2521bf89f473a96c209604d0fe596c1c37d45a6758f97855140b0906ba7a96268563fdc4ea428c2aa864fa9999e68f04db18ae1895485bf64deefb6df7139f77e5ae7a6c0c33495ff007e2a3ca121177c26436b644c42c6c5825b172daf980fefbe4f2ce8b45534ff9cf3717eaaeb7291e895c98ea23ba071ca719435c729851e7dc47d8cc95925f4f2be070590d65d0255ab349210f688003801179e9ffd1e7d970066a8c1f074e47e59a1e2f902c6c1721e34b804b3d07b03869e5075547bea105c102ef646a65a456b01f1fa51b0594ab8463e59a7f3fd88f387d529b1668fadfc9108775c19b065b1ad6484472c5b96231aef38d5a7bdd410557ed30873cbe0d2de1dd26a8c6965fbd84ec6b24cd70df93a0da317ef8b29f0867d39e1d53278ee408ae259ca26667a4e7ed16c3437ebddbd1d9f47c90c431318605572ceed35cfff507e15ea95a830dcf04ad489597748fa86b2d64931e9c8c167f19504647919fab6490b30c4ac444aef1fa2a9c18da1dd8009596ec566955cc352d33c4aa705cdba1e6f6789bf2c10704fdefdb1d6ff1d030a236b567020b31d81d3446093edb9d221ed87c785f9733952b3079591687a681c0e31375b9a36b717c8144ab67f61f86e6728ee24ef60cd8e233d840f8afaf195878fb11ee8240b833d6d4acfee78f5eeecbd1d03f737b6cc2a893f1cb8d3c67f2423617ae4262dcba4a27cb50d84f93836ecf26da6aecb778fc79b49baa6cd97e4a77688d64ba93efc98917e4ee29842d9fde9d95e64a9d9439ce087404d34f9c50f16f386f4243d9fd1a021df1e2f940957004c8b37836f12c4ce714198ae268b4119e299c1dcd66efd4aa5631973be3840db8370cc3a99260c358358c408eef182bf7a3df3e45b1f9e798358e931a583b9675ad9c0742b22412e0ba996ba7196efebb74a062fa8de3c0d0f6c5831a8bae8d71559182127227aa9b3404ed15fc3bd68cb6b0955ca269ecd631878607756447ad2aa8dc0c4b6b8d4529a7e50ccfe44105e8211e1be1505909683480005b5f0f8c21166831ec327965b6aed830788c3d692cac4683cd79ba649efadc34dc3f872f6e1131d00ef351759c7bcd77b30539c66d11bc2abd3e097ac86205c87b6be11e56c707ad8df9dab1048a6e7079f42a007a218d0ea33dfbe5f8c5740c904b411cf9c8f2dc6dc0a20cf0f11667dedc7bfe6c05c62f76f94159949dfc7c132c1a79df50dc57bfe469664d59c86db8f9f362aaf0b3f02f24201447ea2842f1e8fb901effc1ca6fa926ac2588617b2961c1a9dd5877588fb04e4139fa588e8410528a77f5962cbdf94164e21da8d3caf1e802db9580ef97c784f7613a2cb9a6ca083289b076dff081b4a1d54306b597954eabbc29af0842a6180d76bd18919abd3c471454caae4eeee2be1032196b4548463629a9d682cc89e4ed7f1adf5c43517a4dde82f8a592cc9be4e49b79ade04fd1c38cc42fc402806b5790a1e6c2fea0645f79a35d4976c4687c8727b2d0a1ce2246d189fffa373760e301ab11bc52c91fe9195ae9f6f40da367d6570634012929bddcfc29836654f4f11b2032b387fa53d80376eaa480818020a1405919f28c63092ee7234d7cec43b86acdfc3e49af9be816a8487a039f4e950d3316d9b0dc06f0376d6bc78ebd96660fb6552f74b82d97c21c9a897a7dfc9d1a26893223c3e9258b4bb50954aa61fa9cbf6d4940792b8fa31b518416f440fef67ba074f21afbb283d57297ce9bc1a9fdfd48f3b77cacc730b29065b27f7ad91e1708726750ae010de6c15402e6251a6a0df9300aa8eed080e83b39fe7f26fa2dc0c42ec53061f7558e55966c4bc97dd473f518b10e70b77315799646077093895c7a101de45831d6850242966dfe85d9a27aa4c1c101b46d796e623edfd6133d23901aa0d722961ce2c9161eaf08b69808d85a4e49f4aeff363bbe04ebafdf70ed88dad6702d2d4da9199b6bcf6d41c7eae0df2ba76cc29a4d593b615622ab3eb26674a16814f030c1ba30422c630caf3d2aaf2867faf8cc840a78a7c272828353c1395ffdb622142bc3ad739099fc97f7fb0658d13093328c805af35ad7ce1a2068165ae2c4bea67e9e86a4fb43d116eb98ad951bd63676140e97d6131de06ec48bb6526ce8fb99b4e8e6ba36b6baf8ab5229078cfcb83be75d06b36ce826b628de2a33de81023ea7328c00ccd368db0fa32ca7f811326a7df7f951c6d9b266a2fd424a04e127ffc21c3ce60ee20cef38a2812d664a5778506a407533bca498aff39fab097367d78b5c32bb9d8e9226255ad18d70cc0974973f84c21a7ea69cef8f325b26208926978859673609522bdc37ced48e88b9e93778927c9e6d419277a9eb7bb20b8f6446b076f3750fbbc5cb0a52483ad0bf6096601125a2818a0b39fbfa95b2ea8284b4c1b7bd50c80cb71d5b4d20743f53bcd56bf43e2097862c6e09e199d442a878554704cddf9a2657eefc068e6c638741a5a3ef5ffb7fd8c1379d7e30a092ff07e76d4cfd951b789af188a3b6e4e23d7ac93ac74f211b46307181d7a5a965584f8db75e09896d2ab57c8ea0d09028fbef5e5d849229d0b8bdcd6b3e6efd50359c4f02f43911b7015e1fa6ca5fefb73d23e5030b4d51c80486206aa6bde1f3e4fa371c2101fa8e2d93cdaa1f39f55ba0102f6ed1074a70c3bf4b93a16b47ebd4f70c528a47dc8bfefe242b8b1945371a5e1f601c7e67b0eb05004767491ffa49356b58a4daef75ddcf943a1ed8041a9895b9f7a5ac7ca18ff41064b17e72b5aa96deedc2c5cdbff4ec32070267836f9f5465e1061814aa7b681fa89e58fe456b4b736db7bef407040297caea044c9d902b9f22e299e1b4f396d29962cf017e916e4862fcd76f6ad9586cf966d745383eea90d1ebe842a7df39cee879b467fea6643ad37f29b07ce10df42f6d4b5737a6796428527c4239d007ca608787f9f23d21cc681940c3612a7747d971e4d516a09aea5f37608289bf9456adfdd5b1d8b382f17f579d07013edb069693aa0dc7a725be21110dcbf31f8a1f4e090fd9a331177f25e55aa21da06c8dd10419ae99f1c9ab18380eb57d17470907c9ea9856cc93acc8cdcd2bcfc09bff21976990f54ee9cbcd421f10f415733435fdd92280d97b7f00156f4a3ddfb603cc10d9d9029f62743bb9ec15da6a3b1ddb61c99ad91d9a521ea917a50a36ecb66bef371e5b2f0641380afc0d41e80b0eb90a048abf1ee0cdb25e687575255e3d12ba2d99d5d594a793574a40e4665cad85bd0856ae352e356b716248a18cd0f0db971414238c01a9adf642f3ca1731002113c8da053b51454ca0bd8262b38bcb800b6f1fabd93744779881a73ab190bcd88a65a656208e87785295cad0e344cb7217d3136cc4119c952f820a0117a4fa12158a50b32c38d7cb7f9cec67550c9bddf6193ae6a33ac153b820a96e25e1119bfd6365d71542658756467ea6e2c4dbd110874122ee668ce2ef7db0131ea511b58e3c3a2f22849f2b215c9d9b1fab64317c1667a334012007f8eef00f57ffc42eeac8c64cd00fbd491961834d1d6ab3a28d533df693fd796b14afa3390534c61dff90cb030f0f6dbf5a6e494fec48b43a6a383a2eb5efe068e3d8367446779f035581183e17a864cba192bc1d91ff4c2a259db7e7c21a3b8371e5109874b4ae5c7292df4167463e4b14d79b4c4fc8950386788346b4a96a82c0ede01a6a6abaa36b3c7998fdce157ce0d3c8dfc14c9c3b6710af791f7d696d939eb02a77f786cdd85e827cdc38efa4baea6585278188b478f6e1c9e2acbbc881ce8e031d0f139830bc07a3401069869ff5d085aa7c7fa586bb6086db8214e1ddf56882851818b5d40ed18693e13786e2fffde8b98fba7b2081762c16dfbdaa14628720f14c61c26257d9c33d30fa653c3f99b2c330c55e344cb8ad5653dd8aeccd944d7af97387368ed1b3dce73ff06fe19ce45731f4ccbdae599dc5fb6fa66c089846d3ada521265d5e4135e99de597d1359c505df75dbcbf314b392fa41565d44e4652d43f787bee88996e945b737acd347aa79ba095f26488f4c32b38184d3b75370df739a3366288c6f3d02d9353c30c6eaaa4354f1c88d643787d8c4a0a60fddbc44a065da7a3a6b55368281e8a461a664de69c489798dd3cab22798586c941f3366c7f38d7f0a7b9c7398364a29bcd96e831d89c1531b4670a1d02d5b8707b5ab12dcd40f6daceca5415535fd6bbf952ef4d099c5372191d4ee068a68e89c5f9b8339b0132957fd6490e3afc31740de204d879fee2acdc1f21f581eea97a6adac037f02f521b2f0e47cde0bf894f1b00e69729184da43c506e67fe8ff69e253100b649f7cd45a03632dc6b5ecd5617a50e0d3077d49a751535e4a07c8de0b9110717b0494ba04badbdb0d157c5ff36acf3f121a58da95cc873cc9cebc3486446d8195f83b670c964b532a5c0ea8a903a38dd827fa8f3b227f1abc7bc8fc77fff6be7e4cdf86e3f206e4111393928f40b730de29814755473a930ceb29d614fbf2a1f6e9fb962b39fe393a54007193824dc5f8e46b1a47a9623d663b047ded028a01e2fee6766595803dcc232d5ed3a8247a4e40936d31d9944d3716e579f681da058bade8f89e3abb1b16771de0e8711b6b52b356a01bb35118b76684ad2804be2210a344c07f5f6d0885bfb6e18c034b632b0b0ac61cfe06bd198e366a38e7c6c3167f57984da6fb97cfcba2719c4633436f34828f986a220e41c61b18e89bd467c796aa974c5a43a3deff568e6407da5787f9976aafa85f76588796091372856cf0175ce4f0eb9ce6fe6edb63cb5698dabff7a7dceacceabadda1740b07080683a0065a04b6936920eb4a5855377383141d1a2a4369ba9e166fc4b39199926e9d6c76a033cbbc82e1927d186cf55012b148368e947dfcc7e4a932dbefe2b2fe533e4d089aef38e4f38ef9b2b199c223c21fbb43f4b92e6cd17a2d9e352b3e1b75584747adc1648dabb9b9a2ae9a156bdc173cc53fc2455c2e058c2ad5fbe237713187ab59ae4c86ac6b1f00674ed85593864c9d755ab1fefe7341b272555e6c3b9e8f03cc67ef4fea9dadca62f3cf3a871a1f949ff6355a301030c0c482c4443209f1a63848e02dd7c89cfefd0496f632ee7cd4be23b9fa5b6ec96df21734bc1aea8f749511e013a27e7eeba22ebb1712f44c778a73bdf99734e60fa72e9f1aa81f5a9a7d3ca5b611e40b495bbd6140acaae85138cd05b4c6e8e674d03e6d9484f8df8d6518717cc732163a4987c340a42b5d7d98c7456c3bef0cdc8df1e4caf3600c8cd32de97df04d3b99d1da6e0adc37c51e053da6a67ab1a398492d5d5d1625119420f3c765d19cbc9a00014904c1d5cacd9e54e20fe32035498846e850ee99bc2347b30285f09d3ab031263d19b62a8138f79446df0e7abf2aee96585c4e64479d856874fe3f42458305ac853d72c5584738a647e9a4d1fc9cbb0acb45640f7d29945ea58e89490b685d03d8b3fe07a1b4cea805eb8ca83cfcb75fb9dc9928b9df8c8334bd798072d3389d09c46ac7373cc852de581f3e9d2edd4bb8458b9cf20d4a9f643ba52a3d03ad33146c60e180d8018e52e2118ce34f802d996266434b8bfb2071dfaa379471dac965c8deac295b4d27aed55130120959bf1f8c0444700c37e49028dcb34877c010d675f601a6390d64f88cf51eca5bc154e7b88f0118e18ee00851d5ef3787832945c22c61996148faa955a12132eb48f76237f8ab88cd8372b0a511b10ba4ac8c6a295ac78af6a71b38214cbe06851a5e50ca073ecb73037eace029f15a285c3c61fbb47a6b2ed430974353a7a52c2c4e36d79906133df3cb75bcf28e72941a7582a427f353a0c7c4fc0ae9013d20f4da4942472bcaa1638dd83f5edb16ba898a02fa496827ecec04d3fd194ada89167b2ab4865649cb2356f70d52fa028c3a5597f211ab03ba894eaff920875733d8b9a3fd15d3f4098cfeaaab091f63a593c6899ac9efa146ae3c7d651675faddefb5476aaa0311bad5676e64ad0361c981dec699b12ab69a1da41f630ac0b3d52ee4fb260f68a775879e2dba8cb0520964469e0687fcfa7d951ba9f85efde6479c91e056b92d1c101f650620c58bb099aeae8f5f66119d623ed7482847559a8cb6a19d4ac07ff0fad594343747a477316219bcc1a838d7e1d515379c4f38d2fbb4f31276b55aaecd774fd569017df2c5a28e981ad54fafa42d385d3fe0d63ea1708380c78450864b662d41f4b5d1e1b1ce9a806e51c5d1af2b23053a82b31531128c7ce29fd5086045117fa693b0532b0f81ab57447c1b05c7082cc657d50c211fce51a74b5bee72bcb8106927d8d76a44704ec9874447ef36c73910e41d87e61bc2fb45a13d39027113d2bbc46135e284e07b0942dba1e4cdf11d6953900387ff8eaea54dbceca4ffbfc453f5eae1482c2afceac105c985f1b5228373506bdfb49fff4d45eccb4c8311719671bbb7cbf52c8d7fd8c1e60361017f7e3c546cfd4bf480484ea372a7e5c684fd6e03e653c2fbe0d66a3afa631c0926b4ef2d95a0c4185b0d6511e89f2e97410b764c1ab74d9c4b4491c94d45639dc6bf184061355d9e88eadfb751cbadea95020686e7231025afb9f491e063ea8051a3d7887cc34e41bfff3c361900ab3dbb677c84108a3a4492f779ca80ecb27e21a237c1cce935656034d459964ef48f47a64c9625adcd173e2ae3dda199faab2effc1e3bdedd967bf34fc7a73c8e9e09f66ee6c07733dfe403661e8ce484c542a412c4d0d8c36ff10d8f4e475d3f0aed960278d2edc675344ed0ee377f15efba57a847f2c9f44461fae7181a901442efdcb9a81b520ecde57aaae2b3194c6dc77d06851dcb5606034d252da82a6f09c4793c6f1f6b3a3c1bdad92714b5fdb8f18d2845d45745f72fe0ec9e07569977f4ef3dede86f638db2ff285016c1878e72f1a09100043fdebeac0e57662cc42c73a3c0949e3cbfc9c6f321a8b9df48c5fc4eac56a15a5225022460865cfd114e17c0f73b56d67ec045b8d67c1f4168fcd08635401f5f0f9490bdaa5b7123b3633e87fa2b61a86f04ae12cae13e6478c660ed7a404ef99e6a8af14bb39d29d104ec003ab544becf0c167c2cc89582a4eed953ae8aeec64c5f452387ae1e932457515e3610a6750755e51a2eb753ba91ec0905382d5face9cc20cd0373ce9a82420280e04ed08fb9d9c60c2547a9f5c69916cfc710ce3ea6580f7cc33dfc5139814b316678d401a70f7a65969d23b3f1b019fbe7a63082fb4eba238ef11a9a807a77eb7b720094e72fd4624d2d6ac16069a979452379a2b1629d1d12b2ca7e9920439f4f668bfdb0fce2079a524d0679ddeaf316fbb2a5c3043ebdaeb6130f7d830f3ea29473509fec967bafc0cc92c4f80593b934bb5303761122c40508859f526d8c04c152f639d24006be8a050a631aac2ae021b761b2aff4699583967f4c6a0e5b017a8350b479faafc4512db35d8b85d6f0f2a7b28409b65d5d539609465d4c9443d704ac79390f3a75aa6e25f1c7332e8b1446c90443802e8ba68276977ba2073fbb2df8440ff2887a284f16e56f0dc7c655a17b39129e731b4fa7de93f6a26b90620990de11839eb05e6bc94a0fee930c9dec5ba497ff46179b427188bdbba74e95bb42342f8494705dc107af0cea529f3cde12ad25eb3a248c48be428858a07f518f1ae0e8e3fc402cf3b91ce47a9bfca456c81b9749ea3b616e8218410d8c756d8e2cd8c864d33366a94028447d43c8f3f084a4cddeba482c8cddf06d04c3a41da95bc27278d0df09e8529768c76e7ed46f4d4bb179f6eb48c32e0a6af8ee989edde6b95d66df0c262d9150f998e5dd2c71ad23b51a7f96842c6b02ec5037137373c902f0481e7c82825b63dc1400337c0561fab273510c9ccfd0373358605ec9284e1676dec3731d7deab623ee07a353c57fe1fde51c310b6f7a6f8a16e9b8f72d0308478a0088e2d0bccecbee7d40132dc5ad40aa54daca30a252150a2af7dc98bd905d1a24140f8d8254dbb8f333b98686ef660566ef09f11d745a7203fa56ca45f051366cb547bb9237c8eef6b9c9191bf761470a19aa24c3327e8c95609e34dd341189e04be60793f2cc18415d6f28b4571b2dd37b5782ab13db7e4f337c68a4e55810d24dae361b6427a70e6a4a4dddfd0bc43499d075ee8ea3224e5b0bef6b534e1d18315591b73aa9eb5a5f19a6dfffeaa5f91f5ff5b137c98ab24f9569356a620c995d4d671f9ff3eb2884b02507644971f74903727d14e2baa1eef445a7d021b2a787b5d5c0b978f688df2ef3a92398834c784b36bb5417fd06d1c7f4706df56e0ed1b03bb6678b80b62d9b15d3d771e688c038d6875863b452fcc425c76acacb3475014182a80976004a5adf3e732f0ede2b6dee9968dcfb675eaf6bd111171b2aeb0a4d0d96be5c68bba953a74f1f46815e62cf91fe9d5e4914963d439a23d1d211a2dc9be9a92b6257653ad384b90e7f63b7f013ae56d748eb519e891163194f93af1b3ee9c8baf2bbd5588377d8d443560141fd75f1202850618a349ae2a597f55de474645890cf4079568888e9d6f9eba5f77c2c717f805b4a16dd431fa5fbdacca003afd8e7d38255624411af5daf78f25e2c02a32f2e1e3addec34358c9e02ef38eb9072c08fc55f39b5202bd530e49814be86fc23a898398a04a8ec5c624264ffe9dc641e6c2db9c71b531f9b5bd86971b37d65b4ca5767099a42488d26052cd91e4f66d32c263b8ac369bf53baaa3c174714395429758c4899884402062ccecc1fd870d86fb1b255df3d2e16a02ae49017deaa630ac06125dcab28b07085c08c18c85c972d4151edede2bdc83bf58e737ff7eba24e582847cff4e4e77f67a4b516c9be9cddbc20a8ff9e7d70a985f801cb442a4f9a1144ddb497e5b4e7b79fbedc91573fa2bc2065b8e4694cee94b29440bf055d9ddc230d823b6eebe1a6f61dad7c29abd88001fd4b2ff5b847fc7ae2353b1d963b12045cccb5796fe7f30e59e1f1c1eba4769348ab30822620a97fb9e8aacb5f6d7e00743f81a8bdd44fa48184dd3efca239e1753f34db92269aaa982e8506ce62690dc1b22f82a37cee2b542c0ef898dcc1b1794ae351bb84000933f06a13c82ca8e54442774f5073d71e1f32f8b4893d50a1b824caf0bbf825876fe8d0bb79c348e8495e2c00b58524798db528016264375d228edcc96586221bcde83fc07a86539dd12cd4048d3c1b7f33476069ed210e9c94e8bb5d85e624c82c5d71573fb69df2a1754adfac8a3336097bf0d7d9fdb70fa93b523897005c8ba5551bc5e7ba491e2dd143e1497bf3f04d2cc3058c8c1c627ff93c42840358c3e7d030fe5d54b05aa692a9afb81b65c6b88646849702cb4555d404009ffeee7e078a0e9f7a8ba0fc9835b28daf0cbbb0e2ae39da2a6d706ddde23aa5eff63f2e4b1ccaf7ba2cc8d0d8ed5df673eb768240dbdc445c2935dd759987a7064cb8755803f1d6f7658938934be97018aace683a7b4c3cd65e58036c5e3b346e5dce336cb348415caa05b7569fd385861ba11aa554bbc0801b871ae0c6d318ebe7e4a41a827f2e9fae44c8bec8d3301527bbb4f11c4a20ae68261fe3649549bb8df31f0f39d951d27a66caf74265c16464f31d231f1d5fb9c29dd3718c61e245123bbdc3ee352d5f9fda584e80f4ad40623e0977b623cda26768566a491461241a3476ecd1559bae567f05d314dc4efce01b8a00005288c582d49ed48c218e6bb99270d8a65915b64a85dd9fcc45be010ba68231179b844d804e1e2f9575a3229f402d66402857cdce3ff83b7fda7770b9bed7fc203ab09ae30b730136a80f5235b24bb5e92e28ca86f4258550fe958b8d44020d8a0eac8eac98d869d44117d9db1ab99956e1f8e130bdabf1c7ef22b2fafcecb4d07fee97066b1584ede725d5be9ab6f83c0a144e77cad7697c73e4b373312c1dde3eff94bd923520c8889879258915ebddd335ec13648e7ac8d524190160b32404870cb8b40a92a3694a8e548e235b98ed82bf1876493063dc00aaf22178152b760f5990ebfe3275007aa3900d019825ab7f2576f1f3d6d239e79248444d59e45b731e92c809f7130a1116e4e7174add512c5168806b5f1ce0c5c0234c260ada5aa64294808d4d1d6aa895d97b4af16c528ba25804ac6129fb6ab6b89303a064282b779418265e309b7d6eb49f1295c5c5bf9d1dfba7c977a59105d38c661f6b0e3f8a1546b18db59ee804a9ea5f06e6d96ce2f145b54f2594156b2401ecc35e17612ebac180ca4e65106df33470640444dc35fa4a2daef62a713fa607b30d8c42361992a609d3896c0e2bb46c343dddded3a9921d63e490a9833b90680ecde88736328d3d24200970f5a7d8268829a7df9fc72b38326a5c6ec3ccbc0de83958e4b55c61c0c9cc87ca5fe26a8e5bfbae627e87dd201a7e702e138ac1104f64b4896ce695ad0508b4db0f22d65f2cba291329ea57b0c19b2ba1522f2c38e49e43b8999fe79e993f2aaa5a1d8cd9063aa01a298fe4d6fb883c6e17780a518ffbdcd07a5e37440b0912a59319a0fa3c3d79fb8a8485472976f622f41ee41f460d448b7db44350b8cd551ffd4cc0a838c964892cd5f61c20741ebe7886eb1df45a5f923708fc560213874f3ac64ffbcb343b6a66d06bcdd9e0836817e5ec9d700d94f71bc2c6ee1fc33011fce36b861e8852e86b4e2bc14a288496e2789d9eae2261dbdbcb0ff1bc309e87b1f29ac76add37ca6382b5474978b6ed7abf0d6978083f965b1da727c6366cb90fe308b6b81d6d458101a8a2fa64463442a919b2df5b21b1f4e288ae67580a0f99bb7b080c7c985a58e3ba3ad856ad2b3e84a35085ef71a2549da3ad7db4f0897f41ce5f1da3e29866eae9498687523364cf1ca10e6c971be9133fa8cf9cfd3b821456122ee344d2c88be19304bc1b08bcf7df7096a093e9a1a9167ae76c5f3851808a9a3ec3048777493892d91e1a085351585c11a992fba5515e44406b126b444a0d74d91083e9cd3d3d333239804c118416898f82f4103949f20915f297cbae2e1dd5f1756d80f9dfe4102ddf42ee76e0e7857f342a73896a5df1fc2e1d133dd3013eae651921fbaa306309dfbe8d8d3706e3e0a963afe637f5675c79ab4135701a903765961627a6be813c4f52429f124874448cf00ea3e6ca4e88f9865f97d59ef89e664d4e64fa633b45fcb4360536ea5995e9cec527d8d065726b26780c5f72326405aa8543c2a8191826ed6544da192d2565055bc4554d042062ae6cb4c2313f2ff12b1fe286ad199ec8fbaf60d815c8b0736f545c826a52a94a1ad1c2bb8f4ffd19ff040f43421b461e2588f6cb1201ccdfbd2303887b17ea8dfe97741905152814ffb47596f6760c21dbc308fcbe004d50b8c85d101be090149dc3abc6bdf3e61fc618d38494e3188eb5e9e5b410202e5a1c0bc22674a14456e0fefc24845e4da392b4a7c6b893adcf58d7ce3d306a3cb821b8beb73b151b35203c79c39cec771fef86f8c71206f9cb8872ad565f21478398a6790799d367198795875482a15ec4df78e52597b48826c8b830c0e95364eaa38b22e93a62c6e611eaf685626345038350646265cc7ee981be3046f7789933c3a0bc1d6cc9621c0be456ad0800ef3c2f5aee57891358914f9d8ff5fa75cdff28e8f88363f103869357e8a9362bb04c7ff76521319baba5fc1523f7717a66cafc6a2b075d9e7bf97326724f823411fe1d19645d4297f560a5e2001173fdcd176a560ad51a58ca2f7bc2d38a09eb989e0c844e8e649e6e16d06a781b0e684c29a8529dae07b6dc695a67f69986ca752f3464603de4f2cb2c861e31519254d3bbeae4d7a32d891028f409d44ed18dc5285169f7894221a6a19f6b025723b2bfc3240145cc09e76f274085f9406cb50d29dbf4fb9cf5470f4e66dfc209c94cef5f62178a312d7b97ee7b69361777c9b97399766d067e736f862197ee5fae6b8659b815221865c19d607cfea12a59800bb7e1fec9a645bb82e7381ae662a999e275a73dbd69f9ad7f31816345788d1243a37a930402249248ca6a8aa6f0f158ddb067a4c820ab6a7db22407ea098d29e318bb70cf556fe572253eaa52d9acda3d4d27112a1cad1dd1848dce24b03872a51ec240c17a7f2b1ec58bf0e8e0d0eb602a744cc22d685e40d69cbe8f006cbd3c72bad5b7d0687ed007bfbc2ee359e4a2c782c2b8329bd4b04d3881dd392d5ccb3c2a959bd04b16fd2eaa298d5617c69838c887dd2aa4b93425220e0b376747f3c3ff9602d1cf88694383df4fe876ed190b66ba76bbea75693febe5feffd4dad5631d55f47e2fc6e08c4409ac467a227b7bbb7745dfaef68b27906c2d7254048918dc570b5d8d7a8cc336fbe3c7cdbb3b082d71b87550aac9cc2420b54ea1f8ede9313621ac62676ca182002afb6fbc8b1955e60a3a17e00cbea3da8ef2fbe663164e3c1ccb4a1e6f3aca6bc2107f4575f2676000515aa075a652aef7afcd8a6913101b3abb4967487b6f04abbf4903191e95f57e6bb4a54a5da8ed183885fd6e9d21922eda02c10d5b1a071f73bdf7ea3a50f037518799b331c368a204d20897f3c59b69964cce4beeff630dc0d895369507167416b0b2ec261f46dd1ca2beeb09502052b2f0aeebe2a702f2307f551f244ca5191a06e3ba7505a751db35fcee56e34f71ced3fc8079e0a63dc02d72d294fa78bb92560d70ecc2fe5fa2e1bc1896f0776b3ef4d458fb19dbeb64e90465878a9266010bf899f5a14ff29d6babddeb974bcc3d3a2be55e2e087f49af358e27902ba5dc69e1741d97456943411e8a59f7ae56580841b75826478738528f724e5ed4117697db4eff55c9d7e27502d6b0ebc76bbc63d23dc04f6d318b6476cb8aec8b8eaaf600488715c7b372e8054e83c3747e45e31d90de04b5f07a091d7c88a05e14e8fd53db9bf5a880648a2c14f6eda565ab00632bc4050eaa6b085d12c29b8031df3ed053d8d8e61f8d36c71aa9a3f2ef64feabdad4223f21ba3c153661cbb8824de4249bb9961540bb19693d84b60c531f702ae3bf4fb05fbaa8334cae44d2c03dd0d00f9a996da00084047f975e100dc9541d30bf97cfb0c35c63cf69b5e1725636259d1ce096b869dd954d26b0c03130313f7517b8760869455fa7baacd1009a03fd0c0c3d653352f4df2cf196b1ddfc865cdce9e09feaa290e568f4b1249a0db3730dfc2f5fee19ec18ae6f393799d2c1ad17698a8a79ed2be9ae92bfe54f3e64668a4fb69c745853e2c3f45d3eaf8c779883d7b815b48c9b8679032853f6f1aa8e775e35d12e28db4fda2b60527cb391f245c54291255e3c00a7b9d9e00930c08036a6b2507a578402242161b8e0d71658709e0ac9bfb42266b7730b15df921bbe63451a92252c8e3d5aab95bd8986a54ad89d93e52f7210ff7485368199f2ad18a75fd34079f63c3cc5fa42112f3a8cdad1ac80b14f625d10666cbc8414c2e81bbd7860eb9631bb15c6d54b7b240cd5cf4c48ba7272b89ed4bcbba31ab2473fb80831f81477fcbb04ba81efb9fd37bef1498b3ea0e4755505ac84e3ce3ea2f2d324fcbc62807b71c797990bf0e5b19d6c6b650edc572af7c6ef383e2daa1305d4705a6ec1f475219c70a74e9f48dcb41d06ba2b03179e259b1caba439df461b60cf7297f8fcbc68bd89db1505da512a0bb2639fb598b5bd29a6d222fd950865253554ffeb52be668165fbc5186add5e4595592ddacdd18ffbfed099feee958d029178cb88e5f985994a1db400efc0f6983a7a6b682d68ef37f372d18aecc8e04a6736218b3f42f6425e9999a9d9ee6d5a4e404c36bbf82d6000d90cf14d09f8fbb4c69324663e36272d53f4684e0d22e65f9e86687601870b5ca70d0a4c6ec165a22a37f6b58c1b44156c0a52c33f897ca587f376d7f813c6601d56e1ae6f7bad3edefb5382766ce384e409a63abfc7b91801376e1e2234d931543b5681a48dbf7c01a3adf7a4a47b33807020dd2e13baecd97d1ae4ea590de5aa3867e9d1c7b605a4f8207e09ffda3a2e6d2de6216b822b9645a8f4218a93c64036e57c6b671dbce14310db2490b77d241032084cb593b4635aa48d9189f1dd5f846017ab3cc3a1474905324590021697b335191a8595d0523949e6d92cafe8b6721532913788f12f5bd9ea150e7179ce055aa7990c80054d10ba9a4377541024c74fc4438fb06719b787916e468015ba18c4404e148cc688f51fa8e883ccc0c7fc28b68c0e3775076abde77462e311a5687eadba5f943f48ee67486e67287f5caa92c504dde8604b0efd2388e632b786fe9c416603cbe315781953ba55735dc868f7e6a872e0c87af9e56a89dc905b285aae7c29554bb77bbd3d95383b7845d6ba3bc7286ec156f787bf0ffd480ff6b3d36f67d398ac2c61ed74b291eda9fe30ef2c6810a6f1fab384c4336be0f067d39c60141b5efe34296f5c029574a75cfcd7888982b8440a96e58bc0a59558a566ab11e2addff7a76aa8056d04eeee76da735b3c834e3eb2151ad071721650de652960f98069092d7ae582c9533c86d24b3ac5b8d72501ca6a736867d70d85d7fabda2a068eaaed1c4ef270e90c0b1c0f2718e410c73924dbd9551af6e6d5559f619cc3152ff7b2857d3851aa02d06ee2e4c8621629f9c74d0397d5fe4b7de6d4f616c2c67dd4d02583633ef29e808cc7b8218ce0cf38df747cecb732d5c76962d724a2eb0ceb9648bf48dd04a0e9049a11bba9be0a017b94ff61261e646f244fd77e9f3cf877eb2324ececc640379ec9b5421acab3bd1c0bfec3a8684d35b0778fbf26b359e4a67c8894706998ce10a38425006fd9cb9722f946833ae7831fec661cbbd88f8e36f71b2e5892b0b10910429485b3220839ea88ae76d88bc81d7025af2b8b16dccf60ea41dd6fa8077ec41608cc1913ca5562b65a10b9e5b3fe544a50ab7e541bf97b500cf3176ac87c99e7555bcdea613722395b4e53d251cb145cd564e57128e95e7b15ad670d0fa516fe9f1af484e53a9d1be70905c5fa9fe5f492dffdb6fcd17f40b1f2126b056c4783d932fa96f1dad243f0d8327093fa43f7ded8620c8ff4891f9cfb7f856eca6605217aa357eb9e788552269e0583cf5d4fc2e3f904888d22aa348242df22c8d606cf13c367329477ceddf894cae042d23a6c873157d684a8bf95c584226cfa39ab6a3884383275727722abe47257fea1b1ef7b807126156d86ec859542e78117a29e6cc6a90286078a014632759886555fce5a18bffef49217212cc0fd45ba2317c836cacc2bb308d3e2bc6f55ae5a4a96f7b59b92b07a031bc8a0d4b7696860e8acd88f1cb93e878f5a2638a329eadc15f997f4a3b172a782c0ad07fb224830ced208b991ead5719af52da228f7fbd63da4c46528eef25bfa96d250a7210edb3c32fba13d36f7d01b5cce4fb94d08aeabac79d96da81629bd137d073b0f6bad03d09fc6771e20dfa58245584f5d1f0424ca4b55c6d29d4858d5052446b49e8a932d8a12e7f992df2c1a674b294280bf42ce1e3f9c9e9406afafeb5d08c2dd7654d6f96c0eee9cd003ddb997a8925ebb20a36425c648da171654f8fddbe9143f01561d86e9fc704dad7f8b51b7647a7d5dc83d22aaf8549ac7946fb9ff3cc22cb8ac782c987398f2e9455c16074830dd056c890e5ddaf649d8e5bc54f1b209ea427424b6c358868ccecb88a8699ede6d87524877e608f700e2de278bd6160cb03e2fa0ecf73e8c87f66eb629026afd7d848caf3da65bfc65611c320209add3c221940b4a28522bd774c81833805ee84766b484748a1e785896a99c883498fcbf5f58e9091681f234865906646ccfcc9a0695fdb04309524907821d4334073c4f842943e843381ccebabdba1e4c73c64d562e6d084a8a6a7a511f529df99ca8d92dbd02ccc4a0ee7daae121b990442035fc2514bafae90d5dd39f6711a7c0f786b63faf51c6ec8d5ddd329a6ddc594b287faa823fdcd42e013ade4c0fe3af544cc293ae7289d9746466f076f4c0b4e15aee10f2d45470694c755c4fd8646068e22db76d169b7824b01431ec5a83121309ef02e42d2beff286335fd2ed772f84ed65b4ec0744a07d680fc74a1fc7fd1e0a9240d1afc56dd3cc9e2ddac32fd00c01db65c2871486a6368f3259f1609a0291963f7559065f789401299c8405774b0ad806eb64699c5956e353bd4bc104ff963b549633590bb89c3dd1e4226e61b62d930c55ccaa16243ad95bb8221fd70c226e03bfb1d17a0d66511e046b591128e31e5703485a352897f6d356a57716519013f058faaf926d51711f33a266f5211f922135c8e3fdb30638a0f2e6f3b6b45fdc601c95d9221353511d1cb2a83c041370cb75f4e5afc50be6767ccab1d62ce29b0f3e5d011a704e001322509b33f27b12aacd217e230dd8293589a7bb0785dd5b8cae757866a74dd5456826c999fdfe504d64fed0e06b378e86b351f4e1f7baf7bf0551165be4c2642ddc70997342d489e292ee43bf6af3a63763f6c6b3be65514cd63ea0cde7582043190fda97d4ac3506d8a6d4b8188ae81877a9ce424e56323dc61ae2743fee97cf9af5025cb020018254766bbf6d669d6332cdd1eeab421d17615cb163f81fefd9744d53f7d4def7bb4c620e7bc7419d56e891eb794fcc52a4b73bb879b9ddd8f12bc96e88171ab1b7f5cedd9c225570c816c6f91663cd2df07b029a71e96a162fff410fd056f85b1c5e13a3e07b9421077965fee54f8924c5292ee82ec1c0d62b4d5cc72463d0b0d95f48a5e7030195582899c359942d5627f0074f3db2d3f79b5a758e521c63dc5b77d15f6916677daaa1237b963b643d062755cb24234deb83fe617a7d887aef622207c71c4eb5445ad285caa33373c638771fb6910453095872c3abd6d757192cf726ef700ea9c926dc1389205367d2594cebd97c62a8cb02c146969516adf7d7c7e93c9f6af677158545557d8f03b269dba61129c2f3c6fcddeec0a9638ab7c0564fe2802c758c6a84d15cbce1424df2f4f671e30f30fcc07026b1cf23f0852694e6da0bfd6ea2b7a6c8088a54b6539ff994ef4713fdb1fb76c620ce25bd72f6eab77ae0572020d6936ede3dd24c4f696e0f9967a9742026201360303aa4f0f6d92fdd1682fc93d788f1d8d8590cdd22f2a2f06b1813c290bee57199018b7354c88bd0f1b4b756847752933fc03461c08ade2ab1914dcee1c01d873c13f0d40a929c5287999ec6f21bf4d15107232b2c7dbc87ccd9eca45f146b376e4885383c4a403465d41ac73bf9ba7d0b7713c80795f81d142a069b76c9ea13f52d4b52f40bcb0bfe5f7d57fa75245b57af8ca51c53d5f9d227c79cfee793a102514b64e4687982970d78f20b985dcad6668162b96bf88ce07012e04de5e3d0aefcff61257a2225e2f0efe109ecc2584723697b31545175dcd1f14aa9ac9d2aebfedb32e953bf44480c373da903ca69610aabf6efaae8593ee884c26a6f5bed304b4be6c4de4549be80f63ef0c8000b388231167e8a9574b6ba0a497fb4d97f4ba8b68b69da760d7905828420fa684034bf952bf0290b1a9fb2cd16a79e3f8321e82ad78436a18184139f05ba7fbac7dfd27879001d0efd85c94d475b6d73ee422d0b9e9a42819586fc59ead26ce10fefdda550831e58e3a0f769b77ccaf65772c20f60182e51210edfd5111cbce7e06d2b2867762c19c590d0a645cc581ce7bc90ed0c8aaee9332a2065cb174a7d33b6c6c1315a8681fabb4988b45e88d7ef38c56f5c4ecfab7953527bf994ac4f5196f440006b263b9720319320a45bd286e03d4924658d7fd74b5e3dc605ec85e1fbe6a801cb915f0351ee13ea49bd7555f9de36e42b3216603be08cb6986d5acbd2ac943e5fbde85a5de01127eac8700e2721d9e84b97e6dda08ce959a39cff66a4e5317847552fc5577748b1be13084265380ab09accc1cb3b371c3ac4c98778b35fcd360a28f7394f01587fdb12acd14b3e9280d5e96918359f65a12591ca3ee468463a03cebb30738175b09070dabefc8f22ae4237d740f7e277571def9ab5a3dcb7ea0538006d9c2a52022af514eb3a15c9e4e01eaa261a1b9697d8e5d9724823b36c06fe56481a3119ff524345b65e0855c529ab996e7171a709dc24af5aca684cb181a645c27f44bdeed33a63acd11aeb0fea635a2c2761a4ae1969cfb195f3c7f6aed1e89992f525410ee2abf23442de6af16cd467bc84cc0490b626a1a510988e551b277223899ba8618f571dca9fd5860f81c3d6d2f7f82721ed13cffad7c9dfde5f81cbc466d02e2010b53efbbc166754f69391c54e6a2ad35dd65aec677e39856c8e34cc85ff3c6ff976e27e2b6e8a3b415a8626f6841c2e6c79969df922b41fff112e9f3f074c31c2ba38c21fd53274c38a3d1675f32eee3efdd9194da87e2ab57654001e204ef3d649ab9a0785835b62efb0ea1ba4676f8107f1ead931b7c1b6f0ab4691cd8d626d5ebafc315e9cb0278eb2fab0b6cfbfbd8f51efbcf80e479a8938ebd52a10d0fcbd2ab608a5642685e5eec73bf55b4c2f42f47af61302819eb8a3d8998d9e67c273279636e2932db533800d261cc007542666042b4326c16af32329f578886cd97a7d2966fd7c929b57a2d4635b079db25925416ca102de963d0b649f96b86030f256560bdcd3d8f794742629e1529935b3b701494df40bea3af5ed03b17a4e80ca417f3ea6adc9460977591f10547250dee2f9b1fec7febf7cc07b403e9ef39f0c0f2e1ab2a1a4c66edb27678660a8973fb414ed2ba692ab37a4d709b1d828895f9aef6de33d3481cfb323a7e7bf02169a4df6013ac6f3370fe325bffad4edf42a59453ccf42c5140be84f7d216cb02c74eaf934d16cd05f95ef14eccffe88099bbd2bceb5368e43521406de1230249fcaed5a56d68f55b4f7bb9bff3ad0befa758a5f22fa423f5ef1742a18a8822b388927969a57320891016dc4af010ce2a8c423d4c1d945c483044e27e2d9883bfe195f23173a3bcc062d690817b74e5b36d1a55586cc92daa568644f09d16dc64cdad845767858830df3373c0d5ef9290a546eb9b3438a3f969c41dea2b981f71167c4896a7d37d3710205a706d8e43812a3643e3936f8b8c49d06ab12c6ceb47cb9267b27cf88fd916b108b236d0960f6131ab9c631edf85c773c01e9f0959320fa3692f354efc0dca9b9de0e5cddb5516bccd7d593c2c6e3d16141995c672fbac66ceed7ce75a5e34819a25d68205ebb7187c9d8737e453ee625d22bb98b6e5000e206d00924e5bc4996652e8837e611d6443fb4955305e75ad2f458529bb1da9c89686ae93eac22b39959b479c4577b8a5c7ec0e775b2f63de72e80206440c8352ba61f93ba9b9a2c0a30eff92703af204d869e46849c3f3a5f999e0256d3e57a6352902d5c390e15eb97d3aa45804327f4cd8bfd7aa1d188ec9a4e491740cc43a3e1ebf9a34d757e26d254d965cc6a12298d72ba1c53ca300829f9c4a31f9858ac34376c11889e90ce309aa817a2227ffaa98009d5a41cbf2cf87e815b54b1b174078abb104eb4197f22203dbeb8c1925474dc7c113d50d9fab21551cf7e498fef91c87f094f9b28085820260d9d519fc55f929e3da6af28d33d9990d0ebf8feb139e520d06edcad286612a210f31ad0b590f21d0659b97948e58966a38f9e047b917894e36ca4fe4bb3bc7f6aece2dcbd561545c4c94ea27787a06998acfae383c43de1e08e35399af2383a76110fc20e5c4be92962c030a74beee79f27cd5d69b5a67de4df2c102094061b2fa0a95808189308dc68acc3b87d9a93e08546fbd70b259ef66aa37c6d560c033043db27b40ffe5e7ad37af4be0dc7cec1e08ec1a912ef302bc577581b458b54fd471f438550cac9cc1054635c6e492724905c901ebf11b162b24dd079a11eb8a962da7ca28958eb9395dabf158bb5b1080f6002a03bc8c5cad61c0ff00d3a58b6ede7eb5d097087e6ba4e38f6aa1cb232405db213ed91c2fb7cfb01fa98426c278376b7b0632e041847ea47e03c34a060c6e9a7f359d7e32d61e26417b72de2ca08f21486d8c587183932eddd3e2cd6da35cc7ee9175d28ebb00d69d329ae39ab5aa1b1bc69a1e37215836a8dfa1e1a8edc0e6c8d4e9dd51d14602d0d3b95f59f6beafa519088c05ec202bd829a93ba0d538751fa49143df310654aba24301252cc1a798f682f2f658056c6fdd68ed0f5afc061a6b08fa94f039a06b27829b6ce37b700650bb761da544b0d31ab8948dc5e5bef3c8dc3012d8088ace8071fcfc7d8ff9de1fe6682e61de2ab9e12df0ee4f874d02e406618a201544d3f6fa85750e968caeda5fdb2ea7b802756ff71fd691bf21889690817db7458f027209c321bacd658c5f69f4a1de3cef8312e2aa01ec57dd6457edad0d5febd288da41f8b014c9340b3555e479d14c1b3de13b80bee6991953d0dbbfd03ca9ba441a7a6d33a41bd332c1da0a6959719735743d255d0c1a79da3d4e1cc4b0a9392badce338a3a7459de2ffb95696ab47258501e51d6c4613e52c04568a22965f60af809fe3278372b00719205288f9806966a30f98eca60feab2e6ab3c787d95a7c3d7089631504d0d8a21af60f2687138d9876193ee64f98f41dfcd1df4dd07ebd4c1bed567e48794f98fc9b74262ba2bfdce1d23b42156ad37378154c4b314f6ef1a32a7fbb680ddcf95779019c8839b780d588f1c721686c0aa8f69e3258ce1bcc2c03636bf3ba52404ac01b7f7fd68b100ef2e0fddd98f5fdfcdf4136075099b692cf229b6f7ae644b6809b81c118732138f8aa9f397285f24e23088e7c58282847553b929fdc05837fe4b6868490b7f66658405ef5c77fd2be6c69b41f1fd843301123b0d95cb14ac0cf960e5215c7c14c1bc9f6cdaa9044c5c83944b96ed41002ce027d2dfe66577f38dd3afd645803d83cc705e7a239a62be4a745b925a51df1e2a30b151bba2d0cbea2af26ba5e61f5198619d124488c896a29462e89ceaac41d330edda437662fed14de02170f1259566704f10cbd0eadd17e8f9fce12f26a763508868c807bc60e8e6ea9aa98f5d54300212f7dab807c94bf10f29829c01f1642b42ee3b651bf5ac1f5ddb8867dafa58d8250c9a113e9132491e8be6fa6f9abced865f0acfca83f365491923b40af4402790c7e2190dbd98e1c0c7ffdc2eb537f49003c921b2199fdb5044ac72a6f5f50303a3546ce9cd77d2d18de90bfae08eae51522c658e1e048b32a62f005631cb293bdc5b79a0db0f0669654947f805dce894ba04870fbe5fe6ae48fea9e52e7cfa4ebc8a366e62f6ce7936bb4a97c60137dfe11ab273a91d4e2495b1052d74471afb88719850f41819e1d0775839bf5af076b9e087f48719fbf5860a35c8f8103e4a338a22ae5741a0856e43e4dcbf9d29294caa8c3c068154f63e4cd783f1ad122beb437b57ddc2040af8965ccbd409050175cd87ef8ef8d4d4c09b550a611017bfb62a24e48aa00c27dd66d60a7b0ca2d1dcbefd85a491cf758ce693e533d25c3b05497c6c10e3fbcc7b65e520da67619f3ec19e3d97c579bdfba0f6f7bd5994fc4ec33e88b2f46d1c95c221ab020b12019401e7b5c5a830d46ae52f76ef5b1dffb9e9417d3c3895ba4f3934807763d9020d7722eb8d299133f99b0c294d1ad4632f42fbf3ca97e87a104e137e35c8c5d91bd12bbac777b37b21d3904f51f83309ecc7e204d44d5cfc9732004d2541cccf707d9fedb0c6d9a8cf0e00c6e51e38ec720a5dc5a954fdb92f42867e8137e24d485d2f2e495be202e59b605efd81845c70820920d7081872f40e9999c7a37a64755ef4145e7831866fdd608ad48f8f71b077b1920024dc4667391392f7b7d978193974227e279ad6529d1241228eaabfe73a015e234cafaf754e6b07232b2ae8efe020c473556b7e9a5f1dc1666b8f09a331e54ad29bca66ef5cb8212060c5516cce03bdd0b2ffa2af1c5d1146ec3cf53b2def2741dce12eaf335903fa7694a8b2e45ddebb51d79f8e5b9c2a9f30975378cb5867fa5435ac3af96d6a7f4bfdb5484e3be0eb64d075eead15b46e5228b6d74b7e379cbc1358124569afcc0b68856ef24030f82319b3db4956abb4a2eeab8cf87be320f9ff32bd7024d554a3a1b45b1319d3b43952fa15857d7868dbaaeb1759d75ae0e3aa72fa754d867b9b9fa68c635ee0c0f6ca4d65dfd0d5e10cb11717e9b51e059f452044f17a65b92dd3eff1ba844916eac7e733581289fb93d9f762f2290bd9ab0eb576e9feedbc95bb63aab67c5950e97154b0932999bb370b65a213cc6be2f93517c8beb7c8f3fa9248a23cc51c5060a225d3fab7c2206939824879e3ed6751eb1488fe6f723591620713927b6e4ba8de1894b538c4705226db8e668cf698b372c5247712cba27a26d5472f1daeab7c2b43997c1a21a0293598b1d02bee5c96d5e97506970d783ad2d92609c10ed62b8ee1a191ab15bcd801a6b2eb3854cfe931929443e7dea0b47eaa9ca388dda1c9aade3b45129970f673cb3e37f4c8fe21b671f8d16c01d71ec4b925d9564cf3928406adb8848f5049a335b348327f4ef12891517324629aa9de07d7c3b12287e438e1e95bba99c448cfd18d089d2b710530bdedf2f8c71eccf5b1a0ed6fadba6c2fad98ab59fc0727b7d46b78f1fc75ad005479fa7c82f0bee947831dc946c9cbbaea2edcb77c9b0ead8bcdc29b23bf3d1cf76f23184bdd98b91fc6ced574ad3db5043b24d8d3041fd507436c592f2414f41e064e2c48604506fe830526502eeaa36883ce2ad5b679114f77d3fed8020cc28077b6397e431f33b0a91d63553d62420b4396ee37103e9a1e9557df195cffc777212f04e3aba4818a8eec6e6bd1c617756ed5a5e9a1b9ada52d1e2ddbfde7cbd2fffee50c4702c270f1cc7161efd26807c6584a7ae0ec7cf364ba35c4eebe2d0f9fa786f94a79d0f6dda1b3aeb77580d0429fd20fca4b2ae093bd99fa3cb144208493b446bf4bb7831a578356dc943bc1ab2865a82473039980c30e045e042389037a3b7d22b62d54fdaf7b179bcdad7bfcca3f9cf48a4e479fff488e3113976d2aa8baf9c31c4a5ee588ef100d44f8fc068a2f1280f78ec0e1968d91be47f92b011f8cee8ce68aa0b4c7ee84e61bbb36f9c9e77c446a65bf083a14ba95d7e750ab966c75959579a98d6e59ed1afefdbe5ce9dc9ca0755c3167dfd31f4177e9e09057f1286b8adbfe265b79adc7fec04169642098a8cb2fd3a846ff67484fa7d1bd8d0c44eb580365a5b2380f0abc6baed63cc7565e300e880676c8563f7be3fce9f25ba41eaa38a79e49a2e7da5a13f685165e871ba6dadaf0b3faaf41a21a2e897d59cf14c99657d4138a4b6b6cdc6a09a9682b577585f7e234086d8a525707230c3cd79b460e015aafc33494360ca11525b7177b47750b47d6c25d8f252b96ecc67db4cceb17c384446393a95bd9a13e0db1627bb78a56b473a8eb1784ce357fa12bf8a9bbea58080cc14bfd8718968c9b4d892f61ac019f74c86e63a186723463e43dac5e839e2a34de32ce5ffd0545368c32395c0598b53e30f168fe8f04e7a6eb131865dbd3427f2bd50685821925e22f288a884fe30f8dea5917bfddff51e472d9d409718d3de97fe986ae818dc70dd848e25247031b6e997bd0af256a30002b2411d11e86dec3ca1816fd26502732b4d12cbcbcef85c3c0b2e2d8d51dac68f090c89a1fb80f6d02c468a8e5c50ffd44c1a18589552e822ce990d7c04ef0eaff5da4d0038a2dc0e708df545f797d35cebea5ce8b68da57a9018fa4bb24ba5b421d7348384b5081b81090c254f478c4d2b04a49b3adc9a6bef4555b18249928edd49549b6993ae05887e0d859ffc8e55f5a2960cf1809fa3099d3ab952b147d7d1ca8d65327d486f132095d843db11c9d263720c7a696ccf50bcb14a63ede5787af1ecfc23514d902be09ccd75c2aa7df80b0ef871710c3f106bbfb56dadb619cb0cfd58a0ad4e14c29267b6a4c77c1d33b959911780c16189460ad7eba9ed035499f086d62df5bd06692be13d0ec7344c110ae1f0354122ad2f47e98077f9f49c187b4049cd368b4f12be9434f254e63b4a80e08e5d800c2a47dd81594789b8b486449ac63f70f44b7f65a2239022d828e54618be5ee2ab99a8b9e318f0497cde0b342ce26448140c348f53d108419984a55f2d55ae19d41c17efbf5cb795fa96310fff4416c55f64a521359c6828399c86fa28ab25ab7b945c501234d8545652071706df7fac38bd3b925a2d76e237e238b0ae0e4af4b4514fb8964ee6252870b27cdb6cf63459666e65f504c784bed2955ecebfe5a110a0152ab0246484ecddaeda7e1ae64387519e74a50e8ba81f94500c77345f0b8d50cce13cd7dfcac952d2fdef3634842faa87e536fdee91cddadfc86c9948ef4dd0cc46ae32766a5574cb13fd81bfa6f58d04ab5ca48930046206f37db3575f2bc9cbcf1697c8b80fbfd9e5d37ea1023976bb6bcd1986866a8ee40a8f940b2bac9e6adf855d48ad190be595584655c38217e481ca585a808c4c6441580b82b986e7626f3ae56f63d7bfa2392b8554c7319f2647a5becc753b2bfc89dbb8bbfca9ff7619bcf7510e5dd70f1102717ae4851d8f0c6644205009e633ad19e2692abcb25c04a880e52ca5c63fe3da1690fd0307b6dcaea2bd08b0dffb95c4a9070c3ad9612fbf601237b1771c138e906be26020d5535a48c42beb35833a822709f6c98bcaeaece12136c3c9b8662ab47fcb5ca5fc97beac7936f8137dcf855130eadafa5ea2074adb7be502297bf8286c52a04cefac7668c95ea099f4f8cf1d76a0c83e539996764fa89d18bf918533d9d3f17f532ad4f9c3b129a265f67b54a76ed480ffbf251ce1fed81a92817eb78926e8959effb80e6656aa2f0549418d88d6d52f8cef227bebba22a816abb3a427a7b2c8e9f930a2d4d6fde4c1d6f13813a848cbecb269f7d886bd370d04e4d6472575671c1037abd7c202985ea7746203e4a101cc5b96eafb4f743c8db734098d57eff1afc5dd83006b9aa45f031b23d423515ce375c054b2856383e2f9888bf5c7596dd10f649f368bb86fcb38606e6910f2a23edb259375d47db138cf660dee80babba377d301ef5e5149e94d58571f524e65c72e0abb1f254ac29f77d27a62e0a5faf850bd99e7e8cceb1ca00fd61730abe53b3fe4eeb9b85825fc2bd8ef168df7c887b8d076eab07a525f3bdaae024d944619fae9691da659b3cd8a6876c2c9588431c4a99c1a8c793f57f31170f790759632b6009c5d49447fac3b871af6ca60767cdd31da8013e4c0121d627b34a5558b066578022784f755a12c95da10601d44f3356e6ae4a653d93f73f947bb81f54f08796561b8bb9ac3b83c9ad24c6ea3d3de0166c67465ee45675da7e071a3c808ca52511bafbccec11634bc70f1a40a4bb8b0e690660341356c180a11143b84a7205ff4de12246343e85a43c39c4039f836860ead16dc420f71e4bcbc2afe88f739460eee3837669b7922adbfaaf6cfc71bde0d764d26dd7799c1a243e67e05c2f9b8d860db26f36646851e66193500120eccb801cac020b84d4126af8c303a60e51a261acc1783bd5f0f0efa47a15482ccf46984f01b8b529c046ee3bafe13b06fe4697383e977cf031403a45c212c20b657b00c20a8a26999a6defc553c3835ec3ee7409afe98c3491499b8cc3e41133fa12bfb9db89406a5497b8d7cb7fab9a163e5c230d1ee082f0638534db9a182fc7906df8921318284f90e307694085625c79625e97d52a443f9b4b3e1f8db7f0e1667b84362f9eb7cb955a274760f8bac7896bf5b86f4361fab5366934631d3f437b17d1fb3defb721578c76ec53bd4519010fea45161329eafe0624d88e74da33a1b4eb70403e2fd7d77b4f4dead9f9a2a0bf259f3530fa4ee6c04565b82658a40961b8e21a1faebd8157facd8f4052497f4a08866a8ee63e5cc00e7e2515aeca3e609712e0438acc0e010065f34fb9a9fe09d38e608997f2206a664ae7a13ee9caf994c18dbb13ccb0bcff0a70cab74592b975dbefb7f343f98115684b9af617a040f2d53cd6792cb3a06332cee417b19c0d12fc654b8d253e4958a59faac225f1b7e53105a9863c5e618b081cb210c76ef090527ba83af793248804c0830061c76f319e8b2ba5904eec595181fae18ceb4248a2a2a5e6581afc1fa5f55796bb62b3b4ecd7dfb6708b9400e1a73df465281caeeca39da0c65f7d8d69c39ce3c70455a7d62d3d5c0167fd1af554717c7a1bdbd05bb4d9bbce050a7fc97dfac5fe48f243877e60181d95a3bbae29ba304e91d35a0a66e87baf2f6273de40a87429cfcb7c1f46567ce7f90661bd7ac9c1fafa3103a8521ae6169738d2500cd7674d89e44955ed075ef4ecd692ca0d39dcf43ab2b267eb5e219482b3a7acbbd436a96a8e603643d298b184c55702b209de691b5382889874f512b3e9af0259a0cdeb5ca3fba4bcf667e8746886aff016c07942d0a9202b69fad339d652d46453f129dfcd55261701b35c9085dd30409bca1cd46312f695653d4eca5e40a9f2345337636362a83c514e98e98963962467d4e6fbcede4aac5873ec1a167400ee0b3169a0c77b2480f69252c4f5bdafd501ddee21fbe287649df004e3990e2fd695c1a61b834c42f9fd46af916029c37a1fc9bae73fb08d492deae838e3d38b434b3ec19c9a6d3a71b45e3ce1e55897e5181d349e9b52e89491668e344e1f577764b6967532ae44061465bef60e9a37e851cfcaa0cf82fad06272f7cac5006bdbc3861c03e5ae1470c66a3f85914ecdd9cc61de71bea8634be7bfc5fb6075cb6599b38d8ae6f4fcde644a82cb5ef6b97b8c53121913c042b053520244ecd88936c9417b15aff50d5995dcb3831a3b31aa0ad5ad433e550e8ac5468719c60c613e6f61ee5bf1102a631cec42df99f38217987b399b4a9fd0db513a510ecafc87dd678182a59b36a73b98cbfadb1820777a0087591c7b42e9d00d10b6a38e15ff933828538d437e66ed5845385830a3029e55a958a98435c1718a2c091a57508d0c09b77544c23bcc35a48c6560c0fd25b547944ab394ad14be7064f1e614d737119f3c522cc1872ae3de6ce09ea89e2e55edde77aa55d744d58310135506ef3626b20380e459576e72947e8e6186658eea22181f3fc9a87efd5227d36d36cbff5968bf7c901b057dc94283763fea362de835e01cafe9616122b99eb7987a3820e5d8620bf6d87fe8ea1fef0d0ac8bc49de14fc236851dbbfae11f19f5fb81b23e9b66c3d45e860d3b84e04aa2ee5c7c4b38867d142e2e625b5a13fad4718ee64ccba08d2bf1c38c01b72130bb5b469aa474570d03dad2db331a0016eb0054f824be9e04823b75650710bddaf2f1a3e5203b5b68860c5755b0a4fe6508c50844eca403f57fae5d9a9b1c7500bfe15c6645a05164a72ea07dcf745007ff1330e4b6960d68810ad48575212a1be84032cc458c3bbff28a72028da53ece1968ef024a8f230deb552ff6256d5a4f467b81f5649d64bfaa907b3e0f8bdcc2974285efc86831ec5604cc509fc7ac6c6aacaf3b586e275334277fabf58f197629a478af17d34b897892272420a388ad09546b8e765f1e7eafd9ac7c5da3ec2a91282f9c2f059a3b974c8c4fc231e8433f620416b2fa0731419b09f56d9ea2b8491ddb231d79e607e3228f199b488c4bb57c91c79b01b0afb78250a5119ab1498518e1c11cfcae23fd60aa630a41655c6d810cd4c2157920fcd5021cf50b4c5393a0c550253780444cdf5e4125fdcdd29db95874736979cb5053dc8de4c2825d55d0e7a4811ea5d130a7d3fc34e0d41fe3671a0a4e49c0222217730efdd91e7199f9425d404411942bc12a75f1e4ffae9a5f33b3cc5401b55960116ec95800f95ee16101878f5b07f524458f44ae264291ad60a20d5f8f16a4afb9b4d1e8bc5de0951bd2327c6dc2f26095db5768f3e42051ecfa0f92c5110aa1effb932b4fd9eaec7311fe426101e0266cef41e7df5490103ef7790b55e378e104addef1b8123e6d9a9af0549e7a8af0242f541b7c4e57fea31d87975213d34102add8f592881060d470b91c9fbb987015fc81bee22442710f56a37057e478b61ef79f4b3a06069c810bf2cb40baa927ef0a83ba279ba8bf4f8969d9f7f5e2ca2efdfabf6d93edf901bcbff8ee49d2610b1987d22006de912315e8dbdbdced999</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">输入密码查看原文！</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>md</category>
      
    </categories>
    
    
    <tags>
      
      <tag>md</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
